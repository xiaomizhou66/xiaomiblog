<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="小米粥e博客"><meta name="keywords" content="html, css, vue, JavaScript,js,vuex,element-ui,iveiw-ui,axios"><title>react.js--[create-react-app 脚手架] | liuxmoo</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">react.js--[create-react-app 脚手架]</h1><a id="logo" href="/.">liuxmoo</a><p class="description">半路被拎来的前端。(*^▽^*)。学习最快的方法→慢慢来</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">react.js--[create-react-app 脚手架]</h1><div class="post-meta"><a href="/2018/08/19/⑤ -【react.js 框架 】-create-react-app 脚手架/#comments" class="comment-count"></a><p><span class="date">Aug 19, 2018</span><span><a href="/categories/⑤-react-js/" class="category">⑤ react.js</a><a href="/categories/⑤-react-js/create-react-app-脚手架/" class="category">create-react-app 脚手架</a></span></p></div><div class="post-content"><h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>使用脚手架快速搭建项目结构。官网叫做 React App，其实就是 create-react-app，这样过比较好理解。</p>
<p><a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener">gitHub 网址</a>，上面有视频教程。</p>
<p>脚手架搭建的项目也是 <strong>单页应用</strong>。</p>
<h1 id="二、环境准备：应用的安装"><a href="#二、环境准备：应用的安装" class="headerlink" title="二、环境准备：应用的安装"></a>二、环境准备：应用的安装</h1><p>以下应用如果没有在电脑安装过，那么就要先安装才能在电脑上使用 create-react-app 脚手架创建项目。</p>
<h2 id="2-1全局安装-node-js"><a href="#2-1全局安装-node-js" class="headerlink" title="2.1全局安装 node.js"></a>2.1全局安装 node.js</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 node.js，命令行输入 node -v 查看版本来测试是否成功安装</span></span><br><span class="line">① 中文地址：http://nodejs.cn/download/</span><br><span class="line">② 英文地址：https://nodejs.org/en/download/</span><br><span class="line">③ 历史版本下载地址：https://nodejs.org/dist/</span><br><span class="line">④ 全面的详解安装方法：http://www.runoob.com/nodejs/nodejs-install-setup.html</span><br></pre></td></tr></table></figure>
<h2 id="2-2全局安装-npm"><a href="#2-2全局安装-npm" class="headerlink" title="2.2全局安装 npm"></a>2.2全局安装 npm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新版本的 node.js 中已经含有 NPM，如果是新版本不需要再安装 NPM，</span></span><br><span class="line"><span class="comment"># 安装NPM， 命令行输入 `npm -v` 查看版本来测试是否成功安装</span></span><br><span class="line"><span class="comment"># 全面的详解安装方法：http://www.runoob.com/nodejs/nodejs-npm.html</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3全局安装-cnpm"><a href="#2-3全局安装-cnpm" class="headerlink" title="2.3全局安装 cnpm"></a>2.3全局安装 cnpm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org <span class="comment"># 安装 cnpm</span></span><br><span class="line"><span class="comment"># 安装 CNPM，可以使用 `cnpm-v` 查看版本来测试是否成功安装</span></span><br></pre></td></tr></table></figure>
<h2 id="2-4-全局安装-pnpm"><a href="#2-4-全局安装-pnpm" class="headerlink" title="2.4 全局安装 pnpm"></a>2.4 全局安装 pnpm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install pnpm</span></span><br><span class="line">$ npm install -g pnpm <span class="comment"># pnpm 是先使用缓存，要比 npm 要好一点</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-升级NPM版本"><a href="#2-5-升级NPM版本" class="headerlink" title="2.5 升级NPM版本"></a>2.5 升级NPM版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级 npm 版本，命令行输入</span></span><br><span class="line">$ npm install npm -g ，或者是淘宝镜像</span><br><span class="line">$ cnpm install npm -g</span><br></pre></td></tr></table></figure>
<h2 id="2-6-react-安装-（不需要额外安装）"><a href="#2-6-react-安装-（不需要额外安装）" class="headerlink" title="2.6 react 安装 （不需要额外安装）"></a>2.6 react 安装 （不需要额外安装）</h2><p>官网也没有安装 react ，因为 create-react-app 就包含了 react ，使用脚手架创建项目的时候会自动的安装 react 与 react-dom。</p>
<p>但是下面还是写一下方法</p>
<h3 id="2-6-1-npm-安装方法-npm-init-name"><a href="#2-6-1-npm-安装方法-npm-init-name" class="headerlink" title="2.6.1 npm 安装方法 npm init [name]"></a>2.6.1 npm 安装方法 npm init [name]</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm 安装方法</span></span><br><span class="line">$ npm init <span class="comment">#这一句需要么？？？</span></span><br><span class="line">$ npm install --save react react-dom <span class="comment"># 一般是不是不推荐全局安装 react ？</span></span><br></pre></td></tr></table></figure>
<h3 id="2-6-2-yarn-安装方法-yarn-add"><a href="#2-6-2-yarn-安装方法-yarn-add" class="headerlink" title="2.6.2 yarn 安装方法 yarn add"></a>2.6.2 yarn 安装方法 yarn add</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Yarn 安装方法</span></span><br><span class="line">yarn init <span class="comment"># 这个需要么？？</span></span><br><span class="line">yarn add react react-dom</span><br></pre></td></tr></table></figure>
<h3 id="2-6-3-pnpm-cnpm-安装法"><a href="#2-6-3-pnpm-cnpm-安装法" class="headerlink" title="2.6.3 pnpm/cnpm 安装法"></a>2.6.3 pnpm/cnpm 安装法</h3><h3 id="2-6-5-cdn-安装方法"><a href="#2-6-5-cdn-安装方法" class="headerlink" title="2.6.5 cdn 安装方法"></a>2.6.5 cdn 安装方法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  CDN 引入 --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UT</span></span></span><br><span class="line"><span class="tag"><span class="string">F-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello React!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">react.min.js ======= React 的核心库</span></span><br><span class="line"><span class="comment">react-dom.min.js === 提供与 DOM 相关的功能</span></span><br><span class="line"><span class="comment">babel.min.js ======= Babel 可以将 ES6 代码转为 ES5 代码，这样我们就能在目前不支持 ES6 浏览器上执行 React 代码。Babel 内嵌了对 JSX 的支持。通过将 Babel 和 babel-sublime 包（package）一同使用可以让源码的语法渲染上升到一个全新的水平。</span></span><br><span class="line"><span class="comment">注意: 在浏览器中使用 Babel 来编译 JSX 效率是非常低的。一般还是不用这种办法了，还要去找 链接 --&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-7-create-react-app（包括-react-与-react-dom）"><a href="#2-7-create-react-app（包括-react-与-react-dom）" class="headerlink" title="2.7 create-react-app（包括 react 与 react-dom）"></a>2.7 create-react-app（包括 react 与 react-dom）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g create-react-app</span><br><span class="line"><span class="comment"># 全局安装 create-react-app 脚手架</span></span><br></pre></td></tr></table></figure>
<h2 id="2-8-安装-调试工具-debugging"><a href="#2-8-安装-调试工具-debugging" class="headerlink" title="2.8 安装  调试工具 debugging"></a>2.8 安装  调试工具 debugging</h2><p>React Developer Tools : an extension available for Chrome , Firefox , and as a standalone app that allows you to inspect the React component hierarchy in the Chrome Developer Tools</p>
<p><a href="https://github.com/facebook/react-devtools" target="_blank" rel="noopener">React Developer Tools 调试工具</a></p>
<h1 id="三、初始化项目：react-项目构建完整构建过程"><a href="#三、初始化项目：react-项目构建完整构建过程" class="headerlink" title="三、初始化项目：react 项目构建完整构建过程"></a>三、初始化项目：react 项目构建完整构建过程</h1><h2 id="3-1-react-框架项目创建"><a href="#3-1-react-框架项目创建" class="headerlink" title="3.1 react 框架项目创建!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"></a>3.1 react 框架项目创建!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 完整构建过程</span></span><br><span class="line"><span class="comment"># ① 创建应用 应用名称 my-app 最好使用正确的路径 my-app 为自定义名称</span></span><br><span class="line">$ create-react-app my-app         <span class="comment"># 用这个好了，不要搞其他什么特殊,避免发生错误</span></span><br><span class="line">$ yarn create react-app my-app    <span class="comment"># 使用 yarn 初始化项目</span></span><br><span class="line">$ npx create-react-app my-app     <span class="comment"># 使用 npx 初始化项目</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ② 进入项目!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!这个很重要，很重要，很重要，很很重要!!!!!!!!!!</span></span><br><span class="line">$ <span class="built_in">cd</span> my-app</span><br><span class="line"></span><br><span class="line"><span class="comment"># ③ 开启/运行项目，start 之后浏览器就会打开一个窗口，不打开就自己复制链接去打开一个窗口</span></span><br><span class="line">$ npm start    <span class="comment"># 开始使用，当然 cnpm start，pnpm start，yarn start 都行的</span></span><br><span class="line">$ yarn start   <span class="comment"># 这里还是使用 yarn 吧，命令行都是使用 yarn 安装的，很快，并且也提示 yarn start</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 先 start 之后再来安装下面的东西吧，要保证自己每步写的代码都没有问题，写了很多，才发现一堆的错误，会很头疼的。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ④ 路由</span></span><br><span class="line"><span class="comment"># $ npm install --save react-router 这个已经过时，不适用了，现在用的是 4.0 + 版本的</span></span><br><span class="line">$ npm install --save react-router-dom <span class="comment"># 4.0 + 版本使用的是 react-router-dom</span></span><br><span class="line">$ yarn add react-router-dom <span class="comment"># yarn 安装法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ⑤ 官方动画（看自己是否需要，也可以自己做，或者是网上大神的开源项目使用）</span></span><br><span class="line">$ yarn add react-transition-group <span class="comment"># 网址 https://reactcommunity.org/react-transition-group/</span></span><br><span class="line">$ npm install react-transition-group --save <span class="comment">#安装动画插件 yarn 的好处就是不需要 --save 了</span></span><br><span class="line">$ yarn add react-motion</span><br><span class="line">$ npm install --save react-motion <span class="comment"># 安装动画插件 使用 https://github.com/chenglou/react-motion</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ⑥ 请求，拦截器</span></span><br><span class="line">$ yarn add axios            <span class="comment"># 使用 yarn 安装 axios</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ⑦ ui 组件库 蚂蚁金服 antd design</span></span><br><span class="line">$ npm install antd --save</span><br><span class="line">$ yarn add antd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实践之后发现使用 npm 好多错误（版本问题啊，等等），还是用 yarn 好了!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接用 scss 文件之后， yarn start 会提示安装的。</span></span><br><span class="line"><span class="comment"># $ npm install sass-loader node-sass --save-dev # 安装 scss</span></span><br><span class="line"><span class="comment"># $ yarn add sass-loader node-sass # yarn 的好处，</span></span><br><span class="line"><span class="comment"># create-react-app 2.0 已经默认的是支持 css 预处理器了，但是还是要安装 node-sass，只是不需要配置了。</span></span><br><span class="line">$ yarn add node-sass <span class="comment"># 只需要安装 node-sass 不需要 sass-loader ，否则会报出下面的错误</span></span><br><span class="line"><span class="comment"># warning Pattern ["sass-loader@^7.1.0"] is trying to unpack in the same destination</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># eject !!!!!!这个会移除我的 webpack 不要轻易使用！！！！！！！！!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line"><span class="comment"># 如果 create-react-app 中的 webpack 配置满足不了需求，可以运行这个命令将所有 webpack 配置以及服务移到项目目录中，</span></span><br><span class="line"><span class="comment"># 这样修改起来就很灵活了，但是这个命令是不可回退的。</span></span><br><span class="line">$ npm run eject   <span class="comment"># 会生成一个 config 文件夹，其实相当于 复制 node_module 中的文件夹，不直接修改 node_module 文件夹避免错误</span></span><br><span class="line">$ yarn eject  <span class="comment"># 用 yarn 来运行，其实 2.0 版本的脚手架不需要这个操作了已经！！！！！！！！！！！！！！！！！！！！！！！！！！</span></span><br><span class="line"><span class="comment"># 不要忘记配置 config 文件夹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打包应用，开发完之后，打包 disc 文件夹部署上线</span></span><br><span class="line">$ pnpm run build</span><br><span class="line">$ yarn build</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果是下载或者克隆别人的项目！不要忘记这个步骤啦，不然报错了还以为浪费时间</span></span><br><span class="line"><span class="comment"># 还原依赖</span></span><br><span class="line">$ yarn install <span class="comment"># 用 yarn 吧。</span></span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<p><strong>还可以引人其他的工具库:</strong></p>
<ul>
<li><a href="http://www.iconfont.cn/home/index?spm=a313x.7781069.1998910419.2" target="_blank" rel="noopener">阿里图标：</a>内含千万字符实体图标选择使用</li>
<li><a href="http://liuxmoo.gofoer.com/2018/08/12/12-lodash1/" target="_blank" rel="noopener">Lodash工具库：</a>一套工具库，内部封装了很多字符串、数组、对象等常见数据类型的处理函数，方便我们处理js的各种类型数据</li>
</ul>
<h2 id="3-2-查看版本-以及其他-命令操作"><a href="#3-2-查看版本-以及其他-命令操作" class="headerlink" title="3.2 查看版本 以及其他 命令操作"></a>3.2 查看版本 以及其他 命令操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-V   <span class="comment"># --version 的缩写</span></span><br><span class="line">-h   <span class="comment"># --help  的缩写</span></span><br><span class="line"></span><br><span class="line">$ create-react-app -V   (or --version)<span class="comment"># 打印版本信息</span></span><br><span class="line">$ create-react-app --info             <span class="comment"># 打印当前系统跟react相关的开发环境参数，也就是操作系统、Node版本 et</span></span><br><span class="line">$ create-react-app -h   (or --<span class="built_in">help</span>)   <span class="comment"># 打印帮助信息</span></span><br><span class="line">$ create-react-app my-app --verbose   <span class="comment"># 打印本地日志，其实他是 npm 和 yarn 安装外部依赖包可以加的选项，可以打印安装有错时的信息。</span></span><br><span class="line">$ create-react-app my-app --scripts-version   <span class="comment"># 由于它本身把创建目录初始化步骤和控制命令分离了，用来控制react项目的开发、打包和测试都放在了 react-scripts 里面，所以这里可以单独来配置控制的选项信息。</span></span><br><span class="line">$ create-react-app my-app --use-npm  <span class="comment"># create-react-app 默认使用 yarn 来安装，运行，</span></span><br><span class="line"><span class="comment"># 如果没有使用 yarn，需要指定配置为使用 npm</span></span><br></pre></td></tr></table></figure>
<p>create-react-app 对于开发者还是很友好的，可以自己去定义很多东西，如果你不想这么去折腾，它也提供了标准的 react-scripts 供开发者使用</p>
<h2 id="3-3-搭建完成的项目包含的功能"><a href="#3-3-搭建完成的项目包含的功能" class="headerlink" title="3.3 搭建完成的项目包含的功能"></a>3.3 搭建完成的项目包含的功能</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- React, JSX, ES6, TypeScript and Flow syntax support.</span><br><span class="line">  <span class="comment"># 因此就是上面的，不需要下载 react.js 了的。</span></span><br><span class="line">- Language extras beyond ES6 like the object spread operator.</span><br><span class="line">  <span class="comment"># 对象扩展运算符</span></span><br><span class="line">- Autoprefixed CSS, so you don’t need -webkit- or other prefixes.</span><br><span class="line">  <span class="comment"># 自动修复 CSS，不需要 -webkit- 或 其他前缀</span></span><br><span class="line">- A fast interactive unit <span class="built_in">test</span> runner with built-in support <span class="keyword">for</span> coverage reporting.</span><br><span class="line">  <span class="comment"># 一个快速交互式单元测试运行器，内置支持覆盖率报告。</span></span><br><span class="line">- A live development server that warns about common mistakes.</span><br><span class="line">  <span class="comment"># 一个实时开发服务器，用于警告常见错误。</span></span><br><span class="line">- A build script to bundle JS, CSS, and images <span class="keyword">for</span> production, with hashes and sourcemaps.</span><br><span class="line">  <span class="comment"># 用于生成JS，CSS和图像的构建脚本，包含哈希和源图</span></span><br><span class="line">- An offline-first service worker and a web app manifest, meeting all the Progressive Web App criteria.</span><br><span class="line">  (Note: Using the - service worker is opt-in as of react-scripts@2.0.0 and higher)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">- Hassle-free updates <span class="keyword">for</span> the above tools with a single dependency.</span><br><span class="line">  <span class="comment"># 使用单个依赖项对上述工具进行无忧更新</span></span><br></pre></td></tr></table></figure>
<h1 id="四、搭建框架中间遇到的问题"><a href="#四、搭建框架中间遇到的问题" class="headerlink" title="四、搭建框架中间遇到的问题"></a>四、搭建框架中间遇到的问题</h1><h2 id="4-1-npm-WARN-deprecated-circular-json-0-3-3-CircularJSON-is-in-maintenance-only-flatted-is-its-successor"><a href="#4-1-npm-WARN-deprecated-circular-json-0-3-3-CircularJSON-is-in-maintenance-only-flatted-is-its-successor" class="headerlink" title="4.1 npm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor."></a>4.1 npm WARN deprecated <a href="mailto:circular-json@0.3.3" target="_blank" rel="noopener">circular-json@0.3.3</a>: CircularJSON is in maintenance only, flatted is its successor.</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm WARN deprecated circular-json@0.3.3: CircularJSON is <span class="keyword">in</span> maintenance only, flatted is its successor.</span><br><span class="line">这个 CircularJSON 它其实是 ESlint 的问题，</span><br></pre></td></tr></table></figure>
<p>ESlint 的问题 <a href="https://github.com/eslint/eslint/issues/11052" target="_blank" rel="noopener">网址</a>，出来十几天的问题，2018-12-21 没有解决曾问题，</p>
<h2 id="4-2-npm-install-出错"><a href="#4-2-npm-install-出错" class="headerlink" title="4.2 npm install 出错"></a>4.2 npm install 出错</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">λ yarn install</span><br><span class="line">yarn install v1.9.4</span><br><span class="line">[1/4] Resolving packages...</span><br><span class="line">[2/4] Fetching packages...</span><br><span class="line">info fsevents@1.2.4: The platform <span class="string">"win32"</span> is incompatible with this module.</span><br><span class="line">info <span class="string">"fsevents@1.2.4"</span> is an optional dependency and failed compatibility check. Excluding it from installation.</span><br><span class="line">[3/4] Linking dependencies...</span><br><span class="line">error An unexpected error occurred: <span class="string">"EPERM: operation not permitted, scandir 'F:\\qianduan_dir\\00program\\react.js\\hello</span></span><br><span class="line"><span class="string">-world\\node_modules\\@types'"</span>. <span class="comment"># 安装依赖的时候错误</span></span><br><span class="line">info If you think this is a bug, please open a bug report with the information provided <span class="keyword">in</span> <span class="string">"F:\\qianduan_dir\\00program\\r</span></span><br><span class="line"><span class="string">eact.js\\hello-world\\yarn-error.log"</span>.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/install <span class="keyword">for</span> documentation about this <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">λ npm install</span><br><span class="line">npm WARN deprecated circular-json@0.3.3: CircularJSON is <span class="keyword">in</span> maintenance only, flatted is its successor.</span><br><span class="line">npm WARN deprecated kleur@2.0.2: Please upgrade to kleur@3 or migrate to <span class="string">'ansi-colors'</span> <span class="keyword">if</span> you prefer the old syntax. Visit</span><br><span class="line"> &lt;https://github.com/lukeed/kleur/releases/tag/v3.0.0\&gt; <span class="keyword">for</span> migration path(s).</span><br><span class="line">npm WARN rollback Rolling back @types/q@1.5.1 failed (this is probably harmless): EPERM: operation not permitted, lstat <span class="string">'F</span></span><br><span class="line"><span class="string">:\qianduan_dir\00program\react.js\hello-world\node_modules\@types\q'</span></span><br><span class="line">npm ERR! path F:\qianduan_dir\00program\react.js\hello-world\node_modules\@types</span><br><span class="line">npm ERR! code EPERM</span><br><span class="line">npm ERR! errno -4048</span><br><span class="line">npm ERR! syscall mkdir</span><br><span class="line">npm ERR! Error: EPERM: operation not permitted, mkdir <span class="string">'F:\qianduan_dir\00program\react.js\hello-world\node_modules\@types'</span></span><br><span class="line"></span><br><span class="line">npm ERR!  &#123; Error: EPERM: operation not permitted, mkdir <span class="string">'F:\qianduan_dir\00program\react.js\hello-world\node_modules\@typ</span></span><br><span class="line"><span class="string">es'</span></span><br><span class="line">npm ERR!   cause:</span><br><span class="line">npm ERR!    &#123; Error: EPERM: operation not permitted, mkdir <span class="string">'F:\qianduan_dir\00program\react.js\hello-world\node_modules\@t</span></span><br><span class="line"><span class="string">ypes'</span></span><br><span class="line">npm ERR!      errno: -4048,</span><br><span class="line">npm ERR!      code: <span class="string">'EPERM'</span>,</span><br><span class="line">npm ERR!      syscall: <span class="string">'mkdir'</span>,</span><br><span class="line">npm ERR!      path: <span class="string">'F:\\qianduan_dir\\00program\\react.js\\hello-world\\node_modules\\@types'</span> &#125;,</span><br><span class="line">npm ERR!   stack: <span class="string">'Error: EPERM: operation not permitted, mkdir \'</span>F:\\qianduan_dir\\00program\\react.js\\hello-world\\node</span><br><span class="line">_modules\\@types\<span class="string">''</span>,</span><br><span class="line">npm ERR!   errno: -4048,</span><br><span class="line">npm ERR!   code: <span class="string">'EPERM'</span>,</span><br><span class="line">npm ERR!   syscall: <span class="string">'mkdir'</span>,</span><br><span class="line">npm ERR!   path: <span class="string">'F:\\qianduan_dir\\00program\\react.js\\hello-world\\node_modules\\@types'</span>,</span><br><span class="line">npm ERR!   parent: <span class="string">'hello-world'</span> &#125;</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! The operation was rejected by your operating system.</span><br><span class="line">npm ERR! It<span class="string">'s possible that the file was already in use (by a text editor or antivirus),</span></span><br><span class="line"><span class="string">npm ERR! or that you lack permissions to access it.</span></span><br><span class="line"><span class="string">npm ERR!</span></span><br><span class="line"><span class="string">npm ERR! If you believe this might be a permissions issue, please double-check the</span></span><br><span class="line"><span class="string">npm ERR! permissions of the file and its containing directories, or try running</span></span><br><span class="line"><span class="string">npm ERR! the command again as root/Administrator (though this is not recommended).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">npm ERR! A complete log of this run can be found in:</span></span><br><span class="line"><span class="string">npm ERR!     C:\Users\Administrator\AppData\Roaming\npm-cache\_logs\2018-12-21T11_11_52_804Z-debug.log</span></span><br></pre></td></tr></table></figure>
<p><strong>解决：</strong></p>
<p>其实就是 node_modules 下载出错了。<br>大概是安装到一半的话不要停止，即使 ctrl+c 停止，但是node_modules 文件夹已经存在了，再停止重新安装会出错的可能性很大，装了就不要停止，否则就需要先删掉，node_modules ,删除缓存，然后再重新的安装。</p>
<p><a href="https://github.com/npm/npm/issues/17747" target="_blank" rel="noopener">网址</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># node_modules 删除这个文件夹</span></span><br><span class="line">$ npm cache verify <span class="comment"># 清除缓存</span></span><br><span class="line">$ yarn install     <span class="comment"># 重新下载依赖</span></span><br></pre></td></tr></table></figure>
<h2 id="4-3-安装-scss-出错-webpack"><a href="#4-3-安装-scss-出错-webpack" class="headerlink" title="4.3 安装 scss 出错/webpack"></a>4.3 安装 scss 出错/webpack</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">λ yarn add sass-loader node-sass</span><br><span class="line">yarn add v1.12.3</span><br><span class="line">[1/4] Resolving packages...</span><br><span class="line">[2/4] Fetching packages...</span><br><span class="line">warning Pattern [<span class="string">"sass-loader@^7.1.0"</span>] is trying to unpack <span class="keyword">in</span> the same destination <span class="string">"C:\\Users\\Administrator\\AppData\\Local\\Yarn\\Cache\</span></span><br><span class="line"><span class="string">\v4\\npm-sass-loader-7.1.0-16fd5138cb8b424bf8a759528a1972d72aad069d\\node_modules\\sass-loader"</span> as pattern [<span class="string">"sass-loader@7.1.0"</span>]. This could result <span class="keyword">in</span> non-deterministic behavior, skipping. <span class="comment"># sass-loader@^7.1.0 试图在同一个地址解压</span></span><br><span class="line">info fsevents@1.2.4: The platform <span class="string">"win32"</span> is incompatible with this module.</span><br><span class="line">info <span class="string">"fsevents@1.2.4"</span> is an optional dependency and failed compatibility check. Excluding it from installation.</span><br><span class="line">[3/4] Linking dependencies...</span><br><span class="line">`warning <span class="string">" &gt; sass-loader@7.1.0"</span> has unmet peer dependency <span class="string">"webpack@^3.0.0 || ^4.0.0"</span>.` <span class="comment"># 没有找到必须的 webpack 依赖包</span></span><br><span class="line">[4/4] Building fresh packages...</span><br></pre></td></tr></table></figure>
<p>解决：因为之前用过了 <code>yarn eject</code>，不要轻易使用吧！！！！！还是不知道怎么在 react 中使用 scss!!!!!!!!!!!!!!!!!!!!!!!!!!!1<br><code>yarn eject</code> 会把 webpack 这个打包工具去掉。出现上面的警告，去看创建好的项目中 package.json 文件内容少了好多！！！！！！！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 版本是自己选择的，不用版本就会下载不指定版本的 webpack</span></span><br><span class="line">$ npm install webpack -g <span class="comment"># 不需要安装</span></span><br><span class="line">$ yarn add webpack@4.19.1 -g <span class="comment"># 不需要安装</span></span><br><span class="line"><span class="comment"># 但是之后没有使用  yarn eject 也出现了这个问题，是因为 vie-cli3 没有包含 webpack 打包器么</span></span><br><span class="line"><span class="comment"># vue-cli3 脚手架也会出现这个问题，只是一个警告，因为新的脚手架是对 webpack 进行了封装，一个警告不是错误 error 我们不需要理会的。</span></span><br></pre></td></tr></table></figure>
<p>问题：<br>  cli3 中 对 webpack 进行了封装，<a href="https://cli.vuejs.org/zh/guide/cli-service.html#%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4" target="_blank" rel="noopener">CLI 服务</a>,上面的只是警告，不用理会，react 的 create-react-app 2.0 中好像也是这样的问题。</p>
<h2 id="4-4-使用-yarn-安装时候出现的问题"><a href="#4-4-使用-yarn-安装时候出现的问题" class="headerlink" title="4.4 使用 yarn 安装时候出现的问题"></a>4.4 使用 yarn 安装时候出现的问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">λ yarn add axios</span><br><span class="line">yarn add v1.12.3</span><br><span class="line">warning package-lock.json found. <span class="comment"># 发现了 package-lock.json 文件</span></span><br><span class="line">Your project contains lock files generated by tools other than Yarn. <span class="comment"># 您的项目包含由 Yarn 以外的工具生成的锁定文件。</span></span><br><span class="line">It is ion inconsistencies caused by unsynchronized lock files. <span class="comment">#它是由不同步的 lock 文件引起的不一致</span></span><br><span class="line">To clear this warning, remove package-lock.json. <span class="comment"># 要清除此警告，请删除package-lock.json。</span></span><br></pre></td></tr></table></figure>
<p>其实就是因为之前有使用 npm 然后一会又使用 yarn 导致的问题，就把这个 package-lock.json 删掉就好了，留下一个 yarn.lock 来锁定版本就好。</p>
<h2 id="4-5-yarn-eject"><a href="#4-5-yarn-eject" class="headerlink" title="4.5 yarn eject"></a>4.5 yarn eject</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">λ yarn eject</span><br><span class="line">yarn run v1.12.3</span><br><span class="line">$ react-scripts eject</span><br><span class="line">NOTE: Create React App 2 supports TypeScript, Sass, CSS Modules and more without ejecting: https://reactjs.org/blog/2018/10/01/create-react-app-v2.html</span><br><span class="line">? Are you sure you want to eject? This action is permanent. Yes</span><br><span class="line">This git repository has untracked files or uncommitted changes:</span><br><span class="line"><span class="comment"># 提示还有没有提交的修改，就是 git 相关的项目， eject 之前需要上传到 git</span></span><br><span class="line">package.json</span><br><span class="line">M yarn.lock</span><br><span class="line">Remove untracked files, stash or commit any changes, and try again.</span><br><span class="line">error Command failed with <span class="built_in">exit</span> code 1.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/run <span class="keyword">for</span> documentation about this <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># commit 一下就好了，或者之前就是将它按照正产 git 项目来 commit</span></span><br><span class="line">git add .</span><br><span class="line">git commit -am <span class="string">"Save before ejecting"</span></span><br></pre></td></tr></table></figure>
<h2 id="4-1-Can’t-resolve-‘-assets-logo-svg’"><a href="#4-1-Can’t-resolve-‘-assets-logo-svg’" class="headerlink" title="4.1 Can’t resolve ‘./assets/logo.svg’"></a>4.1 Can’t resolve ‘./assets/logo.svg’</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">λ yarn start</span><br><span class="line">yarn run v1.12.3</span><br><span class="line">$ node scripts/start.js</span><br><span class="line">Failed to compile.</span><br><span class="line"></span><br><span class="line">./src/app/App.js</span><br><span class="line">`Module not found: Can<span class="string">'t resolve '</span>./assets/logo.svg<span class="string">' in '</span>F:\qianduan_dir\00program\react.js\todo\src\app<span class="string">'`</span></span><br></pre></td></tr></table></figure>
<p>这里就是路径错误了，路径一定要修改正确。是 <code>../assets/logo.svg</code>，<br>一个点表示当前目录下的 assets 目录，肯定是不存在的了！！！！！！！！！！！！！！！！！！！！！！！！！！！！！<br>两个点表示返回到文件夹 assets，这样才是正确的。！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！</p>
<h2 id="4-1-没有-cd-进入文件夹-每次都犯这个错误"><a href="#4-1-没有-cd-进入文件夹-每次都犯这个错误" class="headerlink" title="4.1 没有 cd 进入文件夹!!!!!!!!!!!!!!!!!!!!!!!!!!!!!每次都犯这个错误"></a>4.1 没有 cd 进入文件夹!!!!!!!!!!!!!!!!!!!!!!!!!!!!!每次都犯这个错误</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">F:\qianduan_dir\00program\react.js</span><br><span class="line">λ yarn add react-router-dom</span><br><span class="line">yarn add v1.12.3</span><br><span class="line">info No lockfile found.</span><br><span class="line">[1/4] Resolving packages...</span><br><span class="line">[2/4] Fetching packages...</span><br><span class="line">[3/4] Linking dependencies...</span><br><span class="line">warning <span class="string">"react-router-dom &gt; react-router@4.3.1"</span> has unmet peer dependency <span class="string">"react@&gt;=15"</span>.</span><br><span class="line"><span class="comment"># 这里这样提示，但是却不是它的错误，仔细看下 F:\qianduan_dir\00program\react.js 这个目录都不对。</span></span><br><span class="line">warning <span class="string">" &gt; react-router-dom@4.3.1"</span> has unmet peer dependency <span class="string">"react@&gt;=15"</span>.</span><br><span class="line">[4/4] Building fresh packages...</span><br></pre></td></tr></table></figure>
<p>根本不是其他插件的问题，就是因为在这里文件夹不是项目文件夹啊，都没有 package.json 怎么去安装插件!!!!!!!!!!!!!!!!!</p>
<h2 id="4-8-yarn-add-node-sass"><a href="#4-8-yarn-add-node-sass" class="headerlink" title="4.8 yarn add node-sass"></a>4.8 yarn add node-sass</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">F:\qianduan_dir\00program\react.js\ordering-system (master -&gt; origin)</span><br><span class="line">λ yarn add node-sass</span><br><span class="line">yarn add v1.12.3</span><br><span class="line">[1/4] Resolving packages...</span><br><span class="line">[2/4] Fetching packages...</span><br><span class="line">info fsevents@1.2.4: The platform <span class="string">"win32"</span> is incompatible with this module.</span><br><span class="line">info <span class="string">"fsevents@1.2.4"</span> is an optional dependency and failed compatibility check. Excluding it from installat</span><br><span class="line">ion.</span><br><span class="line">[3/4] Linking dependencies...</span><br><span class="line">[4/4] Building fresh packages...</span><br><span class="line">`error F:\qianduan_dir\00program\react.js\ordering-system\node_modules\node-sass: Command failed.`</span><br><span class="line"><span class="comment"># 什么鬼错误？不是支持 scss 的么，怎么还错误了？？？？</span></span><br><span class="line">Exit code: 1</span><br><span class="line">`Command: node scripts/build.js`<span class="comment">#</span></span><br><span class="line">Arguments:</span><br><span class="line">Directory: F:\qianduan_dir\00program\react.js\ordering-system\node_modules\node-sass</span><br><span class="line">Output:</span><br><span class="line">Building: C:\Program Files\nodejs\node.exe F:\qianduan_dir\00program\react.js\ordering-system\node_modules\</span><br><span class="line">node-gyp\bin\node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_li</span><br><span class="line">brary=</span><br><span class="line">gyp info it worked <span class="keyword">if</span> it ends with ok</span><br><span class="line">gyp verb cli [ <span class="string">'C:\\Program Files\\nodejs\\node.exe'</span>,</span><br><span class="line">gyp verb cli   <span class="string">'F:\\qianduan_dir\\00program\\react.js\\ordering-system\\node_modules\\node-gyp\\bin\\node-g</span></span><br><span class="line"><span class="string">yp.js'</span>,</span><br><span class="line">gyp verb cli   <span class="string">'rebuild'</span>,</span><br><span class="line">gyp verb cli   <span class="string">'--verbose'</span>,</span><br><span class="line">gyp verb cli   <span class="string">'--libsass_ext='</span>,</span><br><span class="line">gyp verb cli   <span class="string">'--libsass_cflags='</span>,</span><br><span class="line">gyp verb cli   <span class="string">'--libsass_ldflags='</span>,</span><br><span class="line">gyp verb cli   <span class="string">'--libsass_library='</span> ]</span><br><span class="line">gyp info using node-gyp@3.8.0</span><br><span class="line">gyp info using node@8.11.3 | win32 | x64</span><br><span class="line">gyp verb <span class="built_in">command</span> rebuild []</span><br><span class="line">gyp verb <span class="built_in">command</span> clean []</span><br><span class="line">gyp verb clean removing <span class="string">"build"</span> directory</span><br><span class="line">gyp verb <span class="built_in">command</span> configure []</span><br><span class="line">gyp verb check python checking <span class="keyword">for</span> Python executable <span class="string">"python2"</span> <span class="keyword">in</span> the PATH</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed Error: not found: python2</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at getNotFoundError (F:\qianduan_dir\00program\react.js\ordering-system\node_mo</span><br><span class="line">dules\<span class="built_in">which</span>\which.js:13:12)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:68:19)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at E (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:80:29)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\<span class="built_in">which</span>.</span><br><span class="line">js:89:16</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\index.</span><br><span class="line">js:42:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\window</span><br><span class="line">s.js:36:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at FSReqWrap.oncomplete (fs.js:152:21)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed  python2 &#123; Error: not found: python2</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at getNotFoundError (F:\qianduan_dir\00program\react.js\ordering-system\node_mo</span><br><span class="line">dules\<span class="built_in">which</span>\which.js:13:12)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:68:19)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at E (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:80:29)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\<span class="built_in">which</span>.</span><br><span class="line">js:89:16</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\index.</span><br><span class="line">js:42:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\window</span><br><span class="line">s.js:36:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at FSReqWrap.oncomplete (fs.js:152:21)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed   stack: <span class="string">'Error: not found: python2\n    at getNotFoundError (F:\\qianduan_dir\\00p</span></span><br><span class="line"><span class="string">rogram\\react.js\\ordering-system\\node_modules\\which\\which.js:13:12)\n    at F (F:\\qianduan_dir\\00prog</span></span><br><span class="line"><span class="string">ram\\react.js\\ordering-system\\node_modules\\which\\which.js:68:19)\n    at E (F:\\qianduan_dir\\00program</span></span><br><span class="line"><span class="string">\\react.js\\ordering-system\\node_modules\\which\\which.js:80:29)\n    at F:\\qianduan_dir\\00program\\reac</span></span><br><span class="line"><span class="string">t.js\\ordering-system\\node_modules\\which\\which.js:89:16\n    at F:\\qianduan_dir\\00program\\react.js\\o</span></span><br><span class="line"><span class="string">rdering-system\\node_modules\\isexe\\index.js:42:5\n    at F:\\qianduan_dir\\00program\\react.js\\ordering-</span></span><br><span class="line"><span class="string">system\\node_modules\\isexe\\windows.js:36:5\n    at FSReqWrap.oncomplete (fs.js:152:21)'</span>,</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed   code: <span class="string">'ENOENT'</span> &#125;</span><br><span class="line">gyp verb check python checking <span class="keyword">for</span> Python executable <span class="string">"python"</span> <span class="keyword">in</span> the PATH</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed Error: not found: python</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at getNotFoundError (F:\qianduan_dir\00program\react.js\ordering-system\node_mo</span><br><span class="line">dules\<span class="built_in">which</span>\which.js:13:12)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:68:19)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at E (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:80:29)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\<span class="built_in">which</span>.</span><br><span class="line">js:89:16</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\index.</span><br><span class="line">js:42:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\window</span><br><span class="line">s.js:36:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at FSReqWrap.oncomplete (fs.js:152:21)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed  python &#123; Error: not found: python</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at getNotFoundError (F:\qianduan_dir\00program\react.js\ordering-system\node_mo</span><br><span class="line">dules\<span class="built_in">which</span>\which.js:13:12)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:68:19)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at E (F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\whi</span><br><span class="line">ch.js:80:29)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\<span class="built_in">which</span>\<span class="built_in">which</span>.</span><br><span class="line">js:89:16</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\index.</span><br><span class="line">js:42:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\isexe\window</span><br><span class="line">s.js:36:5</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed     at FSReqWrap.oncomplete (fs.js:152:21)</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed   stack: <span class="string">'Error: not found: python\n    at getNotFoundError (F:\\qianduan_dir\\00pr</span></span><br><span class="line"><span class="string">ogram\\react.js\\ordering-system\\node_modules\\which\\which.js:13:12)\n    at F (F:\\qianduan_dir\\00progr</span></span><br><span class="line"><span class="string">am\\react.js\\ordering-system\\node_modules\\which\\which.js:68:19)\n    at E (F:\\qianduan_dir\\00program\</span></span><br><span class="line"><span class="string">\react.js\\ordering-system\\node_modules\\which\\which.js:80:29)\n    at F:\\qianduan_dir\\00program\\react</span></span><br><span class="line"><span class="string">.js\\ordering-system\\node_modules\\which\\which.js:89:16\n    at F:\\qianduan_dir\\00program\\react.js\\or</span></span><br><span class="line"><span class="string">dering-system\\node_modules\\isexe\\index.js:42:5\n    at F:\\qianduan_dir\\00program\\react.js\\ordering-s</span></span><br><span class="line"><span class="string">ystem\\node_modules\\isexe\\windows.js:36:5\n    at FSReqWrap.oncomplete (fs.js:152:21)'</span>,</span><br><span class="line">gyp verb `<span class="built_in">which</span>` failed   code: <span class="string">'ENOENT'</span> &#125;</span><br><span class="line">gyp verb could not find <span class="string">"python"</span>. checking python launcher</span><br><span class="line">gyp verb could not find <span class="string">"python"</span>. guessing location</span><br><span class="line">gyp verb ensuring that file exists: C:\Python27\python.exe</span><br><span class="line">gyp ERR! configure error</span><br><span class="line">gyp ERR! stack Error: Can<span class="string">'t find Python executable "python", you can set the PYTHON env variable.</span></span><br><span class="line"><span class="string">gyp ERR! stack     at PythonFinder.failNoPython (F:\qianduan_dir\00program\react.js\ordering-system\node_mo</span></span><br><span class="line"><span class="string">dules\node-gyp\lib\configure.js:484:19)</span></span><br><span class="line"><span class="string">gyp ERR! stack     at PythonFinder.&lt;anonymous&gt; (F:\qianduan_dir\00program\react.js\ordering-system\node_mod</span></span><br><span class="line"><span class="string">ules\node-gyp\lib\configure.js:509:16)</span></span><br><span class="line"><span class="string">gyp ERR! stack     at F:\qianduan_dir\00program\react.js\ordering-system\node_modules\graceful-fs\polyfills</span></span><br><span class="line"><span class="string">.js:284:29</span></span><br><span class="line"><span class="string">gyp ERR! stack     at FSReqWrap.oncomplete (fs.js:152:21)</span></span><br><span class="line"><span class="string">gyp ERR! System Windows_NT 6.1.7601</span></span><br><span class="line"><span class="string">gyp ERR! command "C:\\Program Files\\nodejs\\node.exe" "F:\\qianduan_dir\\00program\\react.js\\ordering-sys</span></span><br><span class="line"><span class="string">tem\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "</span></span><br><span class="line"><span class="string">--libsass_ldflags=" "--libsass_library="</span></span><br><span class="line"><span class="string">gyp ERR! cwd F:\qianduan_dir\00program\react.js\ordering-system\node_modules\node-sass</span></span><br><span class="line"><span class="string">gyp ERR! node -v v8.11.3</span></span><br><span class="line"><span class="string">gyp ERR! node-gyp -v v3.8.0</span></span><br><span class="line"><span class="string">gyp ERR! not ok</span></span><br><span class="line"><span class="string">Build failed with error code: 1</span></span><br><span class="line"><span class="string">info Visit https://yarnpkg.com/en/docs/cli/add for documentation about this command.</span></span><br></pre></td></tr></table></figure>
<h1 id="五、框架结构详解"><a href="#五、框架结构详解" class="headerlink" title="五、框架结构详解"></a>五、框架结构详解</h1><h2 id="5-1-没有-eject-的项目结构"><a href="#5-1-没有-eject-的项目结构" class="headerlink" title="5.1 没有 eject 的项目结构"></a>5.1 没有 eject 的项目结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">|-- node_modules/ <span class="comment"># 依赖包</span></span><br><span class="line">|</span><br><span class="line">|-- public</span><br><span class="line">|   |-- favicon.ico      <span class="comment"># 网站图片标识</span></span><br><span class="line">|   |-- index.html       <span class="comment"># 页面模板：一切的开始都从这里开始，所以这个是代码执行的源头</span></span><br><span class="line">|   |-- manifest.json    <span class="comment"># 指定了开始页面为 index.html。</span></span><br><span class="line">|</span><br><span class="line">|-- src/                <span class="comment"># src 目录下的文件才会被 webpack 打包，所以要把 js、css 文件放在 src 目录下</span></span><br><span class="line">|   |-- App.css</span><br><span class="line">|   |-- App.js</span><br><span class="line">|   |-- App.test.js</span><br><span class="line">|   |-- index.css</span><br><span class="line">|   |-- index.js    <span class="comment"># 入口文件</span></span><br><span class="line">|   |-- logo.svg</span><br><span class="line">|   |-- serviceWorker.js</span><br><span class="line">|</span><br><span class="line">|-- .gitignore       <span class="comment"># git 上传需要忽略的文件格式</span></span><br><span class="line">|-- package.json     <span class="comment"># 项目基本信息</span></span><br><span class="line">|-- README.md        <span class="comment"># 项目说明</span></span><br><span class="line">|-- yarn.lock        <span class="comment"># 明确 安装包的具体版本</span></span><br></pre></td></tr></table></figure>
<h2 id="5-2-eject-之后的项目结构"><a href="#5-2-eject-之后的项目结构" class="headerlink" title="5.2 eject 之后的项目结构"></a>5.2 eject 之后的项目结构</h2><p><a href="https://www.jianshu.com/p/7f81913d1298" target="_blank" rel="noopener">项目结构可以学习这篇文章</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">|-- build/   <span class="comment">#存放项目被webpack处理后生成的文件；</span></span><br><span class="line">|</span><br><span class="line">|-- config/  <span class="comment"># webpack 配置文件，存放的是项目的配置文件；</span></span><br><span class="line">|   |-- jest/</span><br><span class="line">|   |   |-- cssTransform.js</span><br><span class="line">|   |   |-- fileTransform.js</span><br><span class="line">|   |</span><br><span class="line">|   |-- env.js</span><br><span class="line">|   |-- paths.js</span><br><span class="line">|   |-- webpack.config.js</span><br><span class="line">|   |-- webpackDevServer.config.js</span><br><span class="line">|</span><br><span class="line">|-- node_modules/ <span class="comment"># 依赖包，存放 npm 安装的工具包 或 模块</span></span><br><span class="line">|</span><br><span class="line">|-- public   <span class="comment"># 静态资源，该目录下的文件不会被webpack处理，它们会被拷贝到 build/ 文件夹下</span></span><br><span class="line">|   |-- favicon.ico      <span class="comment"># 网站图片标识</span></span><br><span class="line">|   |-- index.html       <span class="comment"># 页面模板：一切的开始都从这里开始，所以这个是代码执行的源头</span></span><br><span class="line">|   |-- manifest.json    <span class="comment"># 指定了开始页面为 index.html。</span></span><br><span class="line">|</span><br><span class="line">|-- scripts           <span class="comment"># 运行配置，与项目的构建、打包 或 服务 相关的脚本</span></span><br><span class="line">|   |-- build.js      <span class="comment">#</span></span><br><span class="line">|   |-- start.js      <span class="comment">#</span></span><br><span class="line">|   |-- test.js       <span class="comment">#</span></span><br><span class="line">|</span><br><span class="line"><span class="comment"># |-- src/              # src 目录下的文件才会被 webpack 打包，所以要把 js、css 文件放在 src 目录下，项目的源代码及资源</span></span><br><span class="line"><span class="comment"># |   |-- App.css</span></span><br><span class="line"><span class="comment"># |   |-- App.js</span></span><br><span class="line"><span class="comment"># |   |-- App.test.js</span></span><br><span class="line"><span class="comment"># |   |-- index.css</span></span><br><span class="line"><span class="comment"># |   |-- index.js    # 入口文件</span></span><br><span class="line"><span class="comment"># |   |-- logo.svg</span></span><br><span class="line"><span class="comment"># |   |-- serviceWorker.js</span></span><br><span class="line"><span class="comment"># 实际代码中会去修改这个文件夹下的结构，</span></span><br><span class="line">|</span><br><span class="line">|-- .gitignore       <span class="comment"># git 上传需要忽略的文件格式</span></span><br><span class="line">|-- package.json     <span class="comment"># 项目基本信息</span></span><br><span class="line">|-- README.md        <span class="comment"># 项目说明</span></span><br><span class="line">|-- yarn.lock        <span class="comment"># 明确 安装包的具体版本</span></span><br></pre></td></tr></table></figure>
<h2 id="5-3-public"><a href="#5-3-public" class="headerlink" title="5.3 public/"></a>5.3 public/</h2><p>public 虽然目录可以添加任何资源，如：图片、代码 等等，但是 不建议 把这些资源添加到 public 目录中；public 适合存放 <strong>与 webpack 不兼容的库</strong></p>
<p>要引用 public/ 目录下的资源，需要使用一个特殊的变量 PUBLIC_URL 来表示 public 目录；在执行 npm run build 时，PUBLIC_URL 变量会被替换成正确的绝对路径；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">在 HTML中用 %PUBLIC_URL% 引用 PUBLIC_URL 变量，</span></span><br><span class="line"><span class="comment">在 JavaScript 中用 process.env.PUBLIC_URL 引用 PUBLIC_URL 变量；</span></span><br><span class="line"><span class="comment">示例：在文件 public/index.html 可以这样引用 public/favicon.ico: --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/favicon.ico"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-1-public-manifest-json-配置文件"><a href="#4-1-public-manifest-json-配置文件" class="headerlink" title="4.1 public/manifest.json 配置文件"></a>4.1 public/manifest.json 配置文件</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"short_name"</span>: <span class="string">"React App"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Create React App Sample"</span>,</span><br><span class="line">  <span class="attr">"icons"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"src"</span>: <span class="string">"favicon.ico"</span>,</span><br><span class="line">      <span class="attr">"sizes"</span>: <span class="string">"64x64 32x32 24x24 16x16"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"image/x-icon"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"start_url"</span>: <span class="string">"."</span>,</span><br><span class="line">  <span class="attr">"display"</span>: <span class="string">"standalone"</span>,</span><br><span class="line">  <span class="attr">"theme_color"</span>: <span class="string">"#000000"</span>,</span><br><span class="line">  <span class="attr">"background_color"</span>: <span class="string">"#ffffff"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-public-index-html-入口文件"><a href="#4-2-public-index-html-入口文件" class="headerlink" title="4.2 public/index.html 入口文件"></a>4.2 public/index.html 入口文件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/favicon.ico"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"theme-color"</span> <span class="attr">content</span>=<span class="string">"#000000"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      manifest.json provides metadata used when your web app is added to the</span></span><br><span class="line"><span class="comment">      homescreen on Android. See https://developers.google.com/web/fundamentals/web-app-manifest/</span></span><br><span class="line"><span class="comment">      当你使用 Android 屏幕的时候，这个 manifest.json 文件可以提供元数据，具体参阅上面的网址</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"manifest"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/manifest.json"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      Notice the use of %PUBLIC_URL% in the tags above.</span></span><br><span class="line"><span class="comment">      It will be replaced with the URL of the `public` folder during the build.</span></span><br><span class="line"><span class="comment">      Only files inside the `public` folder can be referenced from the HTML.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will</span></span><br><span class="line"><span class="comment">      work correctly both with client-side routing and a non-root public URL.</span></span><br><span class="line"><span class="comment">      Learn how to configure a non-root public URL by running `npm run build`.</span></span><br><span class="line"><span class="comment">      请注意在上面的标记中使用％PUBLIC_URL％。它将在构建期间替换为 `public` 文件夹的 URL。</span></span><br><span class="line"><span class="comment">      只能从 HTML 中引用 `public` 文件夹中的文件。</span></span><br><span class="line"><span class="comment">      与 “/favicon.ico” 或 “favicon.ico” 不同，“％PUBLIC_URL％/ favicon.ico” 将 与客户端路由和非 root 公共 URL 一起正常工作。</span></span><br><span class="line"><span class="comment">      通过运行 `npm run build` 了解如何配置非 root 公共 URL。</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>React App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">      You need to enable JavaScript to run this app.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      This HTML file is a template. 这个是 html 模板文件</span></span><br><span class="line"><span class="comment">      If you open it directly in the browser, you will see an empty page. 如果直接用浏览器打开这个文件看到的是空白页面</span></span><br><span class="line"><span class="comment">      You can add webfonts, meta tags, or analytics to this file.   可以添加 webfonts, meta tags, or analytics 到这个文件</span></span><br><span class="line"><span class="comment">      The build step will place the bundled scripts into the &lt;body&gt; tag. 构建好的内容将会导入 &lt;div id="root"&gt;&lt;/div&gt; 这里面</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      To begin the development, run `npm start` or `yarn start`. 可以运行 `npm start` or `yarn start` 来运行,pnpm start 也行</span></span><br><span class="line"><span class="comment">      To create a production bundle, use `npm run build` or `yarn build`. 使用 `npm run build` or `yarn build` 打包</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-4-src"><a href="#5-4-src" class="headerlink" title="5.4 src/"></a>5.4 src/</h2><p>上面这个里是创建时产生的结构，但是我们的 项目页面肯定是不少的，文件多了，都放在一个页面是很难看的。根据自己项目的结构需要调整。<br>webpack 只能编译 src/ 目录下的代码，如果在 src/ 下导入了 src/ 目录之外的文件（除了npm 包），则 webpack 会报错；<br>这样做的目的是为了减少由于路径书写错导而导致的错误；如果一定要导入 src/ 外的 非 npm 包 文件，<br>则可以在 /config/paths.js 文件中的 allowedFilesOutOfSrc 属性 中添加需要包含的 src 外部非 npm 包文件 的路径；</p>
<p><strong>项目结构的核心思想</strong><br>因为代码的相关性主要与业务功能有关，而与文件类型的关系不大，所以，为了便于 编写、查阅、理解 代码，项目结构遵循以下核心宗指（宗指属于思想）：</p>
<ul>
<li>以业务功能为单位组织项目结构；</li>
<li>以低耦合度为目标划分模块职责和逻辑；</li>
</ul>
<p>优点：</p>
<ul>
<li>业务功能模块的相关代码都集中在一块，方便移动和删除；</li>
<li>实现了关注点分离，方便开发、调试、维护、编写、查阅、理解代码；</li>
</ul>
<p><strong>src目录结构</strong></p>
<p>搭建的项目中 src 的目录结构修改如下。src的目录结构将以业务功能划分</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── app/    <span class="comment"># 存放项目业务代码</span></span><br><span class="line">│   ├── App.css</span><br><span class="line">│   ├── App.js      <span class="comment"># 根组件，路由也在这里写</span></span><br><span class="line">│   └── App.test.js</span><br><span class="line">│</span><br><span class="line">├──assets/  <span class="comment"># 存放项目共用的代码以外的资源，如：图片、图标、视频 等；</span></span><br><span class="line">│   ├── logo.svg</span><br><span class="line">│   ├── constant.less    <span class="comment"># 存放 Less 的常量；如果是 scss 就是 scss 常量</span></span><br><span class="line">│   └── constant.js      <span class="comment"># 存放 js 的常量；</span></span><br><span class="line">│</span><br><span class="line">├── component/   <span class="comment"># 组件</span></span><br><span class="line">│   ├──</span><br><span class="line">│   └──</span><br><span class="line">│</span><br><span class="line">├── views/       <span class="comment"># 页面</span></span><br><span class="line">│   ├──</span><br><span class="line">│   └──</span><br><span class="line">│</span><br><span class="line">├── index.css            <span class="comment"># 全局 css 样式</span></span><br><span class="line">├── index.js             <span class="comment"># webpack 的入口文件；</span></span><br><span class="line">└── serviceWorker.js</span><br></pre></td></tr></table></figure>
<h3 id="4-3-src-index-js-插入-lt-div-id-quot-root-quot-gt-lt-div-gt-中的-JSX-拓展语言代码组件"><a href="#4-3-src-index-js-插入-lt-div-id-quot-root-quot-gt-lt-div-gt-中的-JSX-拓展语言代码组件" class="headerlink" title="4.3 src/index.js 插入 &lt;div id=&quot;root&quot;&gt;&lt;/div&gt; 中的 JSX 拓展语言代码组件"></a>4.3 src/index.js 插入 <code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code> 中的 JSX 拓展语言代码组件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;<span class="comment">// 导入 react.js</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;<span class="comment">// 导入 react-dom</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;<span class="comment">//导入 index 对应的 css 文件</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;<span class="comment">// 导入 app 组件                路径需要响应的修改！！！！！！！！！！！！！！！！！！</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> serviceWorker <span class="keyword">from</span> <span class="string">'./serviceWorker'</span>;<span class="comment">//导入服务器</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>, document.getElementById('root'));// 将 app 组件渲染到 html 中</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">// If you want your app to work offline and load faster, you can change如果您希望您的应用脱机工作并加载更快，您可以更改</span></span><br><span class="line"><span class="xml">// unregister() to register() below. Note this comes with some pitfalls.取消注册（）以注册（）如下。 请注意，这带来了一些陷阱。</span></span><br><span class="line"><span class="xml">// Learn more about service workers: http://bit.ly/CRA-PWA了解有关服务工作者的更多信息：http：//bit.ly/CRA-PWA</span></span><br><span class="line"><span class="xml">serviceWorker.unregister();// 脱机工作</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-src-index-css-全局样式-body，一些页面初始化的样式可以在这里写"><a href="#4-4-src-index-css-全局样式-body，一些页面初始化的样式可以在这里写" class="headerlink" title="4.4 src/index.css 全局样式 body，一些页面初始化的样式可以在这里写"></a>4.4 src/index.css 全局样式 body，一些页面初始化的样式可以在这里写</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">"Segoe UI"</span>, <span class="string">"Roboto"</span>, <span class="string">"Oxygen"</span>,</span><br><span class="line">    <span class="string">"Ubuntu"</span>, <span class="string">"Cantarell"</span>, <span class="string">"Fira Sans"</span>, <span class="string">"Droid Sans"</span>, <span class="string">"Helvetica Neue"</span>,</span><br><span class="line">    sans-serif;</span><br><span class="line">  <span class="attribute">-webkit-font-smoothing</span>: antialiased;</span><br><span class="line">  <span class="attribute">-moz-osx-font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: source-code-pro, Menlo, Monaco, Consolas, <span class="string">"Courier New"</span>,</span><br><span class="line">    monospace;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-5-src-App-js-App-css-组件-app-与-其对应的-css-样式"><a href="#4-5-src-App-js-App-css-组件-app-与-其对应的-css-样式" class="headerlink" title="4.5 src/App.js  App.css  组件 app 与 其对应的 css 样式"></a>4.5 src/App.js  App.css  组件 app 与 其对应的 css 样式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;<span class="comment">// 为什么导入的是 &#123; Component &#125;</span></span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">'./logo.svg'</span>;<span class="comment">// 导入 图片                      路径需要响应的修改！！！！！！！！！！！！！！！！！！</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;<span class="comment">//导入 css 文件</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123; <span class="comment">// 这里创建组件，怎么又变成 Component 了，不是 React.Component 的么，因为 ES6 的解构赋值</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">        &lt;header className=<span class="string">"App-header"</span>&gt;</span><br><span class="line">          &lt;img src=&#123;logo&#125; className=<span class="string">"App-logo"</span> alt=<span class="string">"logo"</span> /&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            Edit &lt;code&gt;src/App.js&lt;<span class="regexp">/code&gt; and save to reload.</span></span><br><span class="line"><span class="regexp">          &lt;/</span>p&gt;</span><br><span class="line">          &lt;a</span><br><span class="line">            className=<span class="string">"App-link"</span></span><br><span class="line">            href=<span class="string">"https://reactjs.org"</span></span><br><span class="line">            target=<span class="string">"_blank"</span></span><br><span class="line">            rel=<span class="string">"noopener noreferrer"</span></span><br><span class="line">          &gt;</span><br><span class="line">            Learn React</span><br><span class="line">          &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>header&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.App</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.App-logo</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: App-logo-spin infinite <span class="number">20s</span> linear; <span class="comment">/* 动画 */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40vmin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.App-header</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#282c34</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="built_in">calc</span>(10px + 2vmin);</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.App-link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#61dafb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> App-logo-spin &#123;<span class="comment">/*animation 的关键帧   */</span></span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-6-src-serviceWorker-js-服务器配置文件，网络代理服务器"><a href="#4-6-src-serviceWorker-js-服务器配置文件，网络代理服务器" class="headerlink" title="4.6 src/serviceWorker.js  服务器配置文件，网络代理服务器"></a>4.6 src/serviceWorker.js  服务器配置文件，网络代理服务器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This optional code is used to register a service worker.</span></span><br><span class="line"><span class="comment">// register() is not called by default.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This lets the app load faster on subsequent visits in production, and gives</span></span><br><span class="line"><span class="comment">// it offline capabilities. However, it also means that developers (and users)</span></span><br><span class="line"><span class="comment">// will only see deployed updates on subsequent visits to a page, after all the</span></span><br><span class="line"><span class="comment">// existing tabs open on the page have been closed, since previously cached</span></span><br><span class="line"><span class="comment">// resources are updated in the background.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// To learn more about the benefits of this model and instructions on how to</span></span><br><span class="line"><span class="comment">// opt-in, read http://bit.ly/CRA-PWA</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isLocalhost = <span class="built_in">Boolean</span>(</span><br><span class="line">  <span class="built_in">window</span>.location.hostname === <span class="string">'localhost'</span> ||</span><br><span class="line">    <span class="comment">// [::1] is the IPv6 localhost address.</span></span><br><span class="line">    <span class="built_in">window</span>.location.hostname === <span class="string">'[::1]'</span> ||</span><br><span class="line">    <span class="comment">// 127.0.0.1/8 is considered localhost for IPv4.</span></span><br><span class="line">    <span class="built_in">window</span>.location.hostname.match(</span><br><span class="line">      /^<span class="number">127</span>(?:\.(?:<span class="number">25</span>[<span class="number">0</span><span class="number">-5</span>]|<span class="number">2</span>[<span class="number">0</span><span class="number">-4</span>][<span class="number">0</span><span class="number">-9</span>]|[<span class="number">01</span>]?[<span class="number">0</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]?))&#123;<span class="number">3</span>&#125;$/</span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span> &amp;&amp; <span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="comment">// The URL constructor is available in all browsers that support SW.</span></span><br><span class="line">    <span class="keyword">const</span> publicUrl = <span class="keyword">new</span> URL(process.env.PUBLIC_URL, <span class="built_in">window</span>.location.href);</span><br><span class="line">    <span class="keyword">if</span> (publicUrl.origin !== <span class="built_in">window</span>.location.origin) &#123;</span><br><span class="line">      <span class="comment">// Our service worker won't work if PUBLIC_URL is on a different origin</span></span><br><span class="line">      <span class="comment">// from what our page is served on. This might happen if a CDN is used to</span></span><br><span class="line">      <span class="comment">// serve assets; see https://github.com/facebook/create-react-app/issues/2374</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> swUrl = <span class="string">`<span class="subst">$&#123;process.env.PUBLIC_URL&#125;</span>/service-worker.js`</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isLocalhost) &#123;</span><br><span class="line">        <span class="comment">// This is running on localhost. Let's check if a service worker still exists or not.</span></span><br><span class="line">        checkValidServiceWorker(swUrl, config);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add some additional logging to localhost, pointing developers to the</span></span><br><span class="line">        <span class="comment">// service worker/PWA documentation.</span></span><br><span class="line">        navigator.serviceWorker.ready.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(</span><br><span class="line">            <span class="string">'This web app is being served cache-first by a service '</span> +</span><br><span class="line">              <span class="string">'worker. To learn more, visit http://bit.ly/CRA-PWA'</span></span><br><span class="line">          );</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Is not localhost. Just register service worker</span></span><br><span class="line">        registerValidSW(swUrl, config);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">registerValidSW</span>(<span class="params">swUrl, config</span>) </span>&#123;</span><br><span class="line">  navigator.serviceWorker</span><br><span class="line">    .register(swUrl)</span><br><span class="line">    .then(<span class="function"><span class="params">registration</span> =&gt;</span> &#123;</span><br><span class="line">      registration.onupdatefound = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> installingWorker = registration.installing;</span><br><span class="line">        <span class="keyword">if</span> (installingWorker == <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        installingWorker.onstatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (installingWorker.state === <span class="string">'installed'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (navigator.serviceWorker.controller) &#123;</span><br><span class="line">              <span class="comment">// At this point, the updated precached content has been fetched,</span></span><br><span class="line">              <span class="comment">// but the previous service worker will still serve the older</span></span><br><span class="line">              <span class="comment">// content until all client tabs are closed.</span></span><br><span class="line">              <span class="built_in">console</span>.log(</span><br><span class="line">                <span class="string">'New content is available and will be used when all '</span> +</span><br><span class="line">                  <span class="string">'tabs for this page are closed. See http://bit.ly/CRA-PWA.'</span></span><br><span class="line">              );</span><br><span class="line"></span><br><span class="line">              <span class="comment">// Execute callback</span></span><br><span class="line">              <span class="keyword">if</span> (config &amp;&amp; config.onUpdate) &#123;</span><br><span class="line">                config.onUpdate(registration);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// At this point, everything has been precached.</span></span><br><span class="line">              <span class="comment">// It's the perfect time to display a</span></span><br><span class="line">              <span class="comment">// "Content is cached for offline use." message.</span></span><br><span class="line">              <span class="built_in">console</span>.log(<span class="string">'Content is cached for offline use.'</span>);</span><br><span class="line"></span><br><span class="line">              <span class="comment">// Execute callback</span></span><br><span class="line">              <span class="keyword">if</span> (config &amp;&amp; config.onSuccess) &#123;</span><br><span class="line">                config.onSuccess(registration);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">'Error during service worker registration:'</span>, error);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkValidServiceWorker</span>(<span class="params">swUrl, config</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Check if the service worker can be found. If it can't reload the page.</span></span><br><span class="line">  fetch(swUrl)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Ensure service worker exists, and that we really are getting a JS file.</span></span><br><span class="line">      <span class="keyword">const</span> contentType = response.headers.get(<span class="string">'content-type'</span>);</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        response.status === <span class="number">404</span> ||</span><br><span class="line">        (contentType != <span class="literal">null</span> &amp;&amp; contentType.indexOf(<span class="string">'javascript'</span>) === <span class="number">-1</span>)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="comment">// No service worker found. Probably a different app. Reload the page.</span></span><br><span class="line">        navigator.serviceWorker.ready.then(<span class="function"><span class="params">registration</span> =&gt;</span> &#123;</span><br><span class="line">          registration.unregister().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">window</span>.location.reload();</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Service worker found. Proceed as normal.</span></span><br><span class="line">        registerValidSW(swUrl, config);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(</span><br><span class="line">        <span class="string">'No internet connection found. App is running in offline mode.'</span></span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">unregister</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    navigator.serviceWorker.ready.then(<span class="function"><span class="params">registration</span> =&gt;</span> &#123;</span><br><span class="line">      registration.unregister();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-6-1-service-worker-介绍"><a href="#4-6-1-service-worker-介绍" class="headerlink" title="4.6.1 service worker 介绍"></a>4.6.1 service worker 介绍</h3><p>可以实现消息推动、地理围栏、离线应用等功能，相当于在浏览器端建立了一个代理服务，实现一些现在看来逆天的功能。</p>
<p>这个是用来做离线缓存的新的 api 实现。<br>其工作原理是 <strong>缓存同源路径下的请求</strong>，相当于是在前端与后端数据中加了一个缓存层，<strong>使得在离线状态下也能够正常访问部分页面</strong>。</p>
<p><img src="https://segmentfault.com/img/bVWgUS?w=884&amp;h=67" alt="t">，访问中之所以报错，可能是你以本地 (localhost) 等方式打开，并非是在打包中制定的域名下。</p>
<p>目前原生 App 跟 HTML5 相比具有如下优势:富离线体验、消息推送、定时默认更行等功能，这些优势决定了 HTML5 无法取代 native。<br>service worker(后面简称 sw )，就是在这样的背景下提出来的。</p>
<p>sw 是一段运行在浏览器 <strong>后端的脚本</strong>，独立于页面，是一个 worker，也可以理解为一个 <strong>网络代理服务器</strong>。因此 sw 是无法与 DOM 进行交互的，但是可以与 js 主线程进行通信。</p>
<h3 id="4-6-2-service-worker-实现的功能"><a href="#4-6-2-service-worker-实现的功能" class="headerlink" title="4.6.2  service worker 实现的功能"></a>4.6.2  service worker 实现的功能</h3><p>目前 sw 还是一个草案(现在应该不是了吧，脚手架都用了，)，各个浏览器支持程度还不是很高，除了 chrome 40、firefox 以外，其他浏览器均不支持该功能，但是 sw 提供的逆天功能还是非常值得期待:</p>
<ul>
<li>后台数据的同步</li>
<li>从其他域获取资源请求</li>
<li>接受计算密集型数据的更新，多页面共享该数据</li>
<li>客户端编译与依赖管理</li>
<li>后端服务的 hook 机制</li>
<li>根据 URL 模式，自定义模板</li>
<li>性能优化</li>
<li>消息推送</li>
<li>定时默认更新</li>
<li>地理围栏</li>
</ul>
<p>其中最期待的还是通过 HTTP 请求的拦截，进而实现离线应用，提升页面的性能体验。</p>
<h3 id="4-6-3-简单使用"><a href="#4-6-3-简单使用" class="headerlink" title="4.6.3 简单使用"></a>4.6.3 简单使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a. 首先在页面注册一个service worker</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  navigator.serviceWorker.register(<span class="string">'./index.js'</span>).then(<span class="function">(<span class="params">reg</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'register a service worker: '</span>, reg)</span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'err: '</span>, err);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//b. 接着就可以在Service worker中尽情畅想</span></span><br><span class="line"><span class="comment">//以页面的离线应用为出发点，说明sw如实做到离线应用的。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cacheUrl = [</span><br><span class="line">  <span class="string">'/base.css'</span>,</span><br><span class="line">  <span class="string">'/france.html'</span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> cacheName = <span class="string">'my-site-cache'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// install阶段</span></span><br><span class="line">self.addEventListener(<span class="string">'install'</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'sw event: install'</span>);</span><br><span class="line">  event.waitUntil(</span><br><span class="line">    caches.open(cacheName).then(<span class="function">(<span class="params">cache</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'open cache'</span>);</span><br><span class="line">      <span class="keyword">return</span> cache.addAll(cacheUrl);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.addEventListener(<span class="string">'fetch'</span>, (event) =&gt; &#123;</span><br><span class="line">  event.respondWith(caches.match(event.request).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'match'</span>);</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fetch(event.request);</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="4-6-4-生命周期"><a href="#4-6-4-生命周期" class="headerlink" title="4.6.4 生命周期"></a>4.6.4 生命周期</h3><p>sw（ service worker ） 的说明周期主要包括三个阶段: install、active、working。<br>下面这张图说明各个阶段完成的工作:<br><img src="http://zhenhua-lee.github.io/img/service-work/sw-lifecycle.png" alt="Y"></p>
<h3 id="4-6-5-事件机制"><a href="#4-6-5-事件机制" class="headerlink" title="4.6.5 事件机制"></a>4.6.5 事件机制</h3><p>sw （ service worker ）本质上也是一个 worker，所以 sw 开发也是建立在事件的基础上，通过事件机制完成相关业务逻辑的处理。<br>其中 sw （ service worker ）里面的事件在原始事件对象 EVENT,进行了拓展，例如 fetch event 里面拥有 respondWith、waitUtil 方法。</p>
<h3 id="4-6-6-补充介绍-Cache-API"><a href="#4-6-6-补充介绍-Cache-API" class="headerlink" title="4.6.6 补充介绍: Cache API"></a>4.6.6 补充介绍: Cache API</h3><p>cache api 就是对 http 的 request/response 进行缓存管理，是在 service worker 的规范中定义的，往往跟 service worker 一起操作使用，是实现 web app 离线应用的关键一环。但是 cache api 又不依赖于 service worker，可以单独在 window 下使用，。</p>
<p>在 window 对象下，cache api 的操作封装在 caches 对象下面，里面的操作分为两类: 对 cache 的操作、对 cache 里面 http 的操作。下面简单说明下 cache storage 的相关操作:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面是对cache的相关操作</span></span><br><span class="line"><span class="comment">// open: 创建或打开一个cache</span></span><br><span class="line">caches.open(<span class="string">'test'</span>).then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> cache.add(<span class="string">'/base.css'</span>)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'create a cache and add "base.css" to it'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 在cache storage查找缓存的资源</span></span><br><span class="line">caches.match(<span class="string">'/base.css'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!res) <span class="keyword">return</span> <span class="string">'can not find this http in caches storage'</span>;</span><br><span class="line">  <span class="keyword">return</span> res.text()</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 得到所有的cache</span></span><br><span class="line">caches.keys().then(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'names: '</span>, name)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 得到某个cache</span></span><br><span class="line">caches.delete(<span class="string">'test'</span>).then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'delete success?: '</span>, val)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对cache里面http进行操作</span></span><br><span class="line">caches.open(<span class="string">'test'</span>).then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 添加缓存资源</span></span><br><span class="line">  <span class="keyword">return</span> cache.add(<span class="string">'/base.css'</span>)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'create a cache and add "base.css" to it'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">caches.open(<span class="string">'test'</span>).then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 资源匹配</span></span><br><span class="line">  <span class="keyword">return</span> cache.match(<span class="string">'/base.css'</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> res.text()</span><br><span class="line">&#125;).then(<span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(str)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="4-7-src-App-test-js-测试文件"><a href="#4-7-src-App-test-js-测试文件" class="headerlink" title="4.7 src/App.test.js  测试文件"></a>4.7 src/App.test.js  测试文件</h2><p>关于测试可以学习<a href="http://joescott.coding.me/blog/2017/04/27/create-react-app-tests/" target="_blank" rel="noopener">T</a>,<br>当运行 npm run test, Jest 会以 watch 模式启动。每次你保存一个文件，它都会重新运行测试，就像 npm start 重新编译代码一样。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"></span><br><span class="line">it(<span class="string">'renders without crashing'</span>, () =&gt; &#123;<span class="comment">// 渲染没有崩溃</span></span><br><span class="line">  <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>, div);//？？？？？？？？？？？？？</span></span><br><span class="line"><span class="xml">  ReactDOM.unmountComponentAtNode(div);// 、？？？？？？？？？？？？？？？？？？？</span></span><br><span class="line"><span class="xml">&#125;);</span></span><br></pre></td></tr></table></figure>
<h2 id="4-8-package-json"><a href="#4-8-package-json" class="headerlink" title="4.8 package.json"></a>4.8 package.json</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"todo"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"react"</span>: <span class="string">"^16.7.0"</span>,</span><br><span class="line">    <span class="attr">"react-dom"</span>: <span class="string">"^16.7.0"</span>,</span><br><span class="line">    <span class="attr">"react-scripts"</span>: <span class="string">"2.1.2"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    "start": "react-scripts start", // 开发环境运行,默认监听 3000 端口</span><br><span class="line">    "build": "react-scripts build",// 生产环境运行，进行项目打包，默认打包到 build 目录</span><br><span class="line">    "test": "react-scripts test",</span><br><span class="line">    "eject": "react-scripts eject"</span><br><span class="line">  &#125;,</span><br><span class="line">  "eslintConfig": &#123;</span><br><span class="line">    "extends": "react-app"</span><br><span class="line">  &#125;,</span><br><span class="line">  "browserslist": [</span><br><span class="line">    "&gt;0.2%",</span><br><span class="line">    "not dead",</span><br><span class="line">    "not ie &lt;= 11",</span><br><span class="line">    <span class="string">"not op_mini all"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="六、自己添加的框架思想"><a href="#六、自己添加的框架思想" class="headerlink" title="六、自己添加的框架思想!!!!!!!!!!!!!!!!!!!!!!!!!!"></a>六、自己添加的框架思想!!!!!!!!!!!!!!!!!!!!!!!!!!</h1><p><a href="https://react.docschina.org/docs/faq-structure.html" target="_blank" rel="noopener">官网网址</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//按照文件类型来分组,类似这样</span></span><br><span class="line">api/</span><br><span class="line">  APIUtils.js</span><br><span class="line">  APIUtils.test.js</span><br><span class="line">  ProfileAPI.js</span><br><span class="line">  UserAPI.js</span><br><span class="line">components/</span><br><span class="line">  Avatar.js</span><br><span class="line">  Avatar.css</span><br><span class="line">  Feed.js</span><br><span class="line">  Feed.css</span><br><span class="line">  FeedStory.js</span><br><span class="line">  FeedStory.test.js</span><br><span class="line">  Profile.js</span><br><span class="line">  ProfileHeader.js</span><br><span class="line">  ProfileHeader.css</span><br></pre></td></tr></table></figure>
<ul>
<li>避免太多嵌套，不要分太细！文件夹太多，总是 import 不好！</li>
<li>不要过度思考这个问题，重要的是代码做出东西来！</li>
</ul>
<p>例如下面是完整的框架</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">|-- build/   <span class="comment">#存放项目被webpack处理后生成的文件；</span></span><br><span class="line">|</span><br><span class="line">|-- config/  <span class="comment"># webpack 配置文件，存放的是项目的配置文件；</span></span><br><span class="line">|   |-- jest/</span><br><span class="line">|   |   |-- cssTransform.js</span><br><span class="line">|   |   |-- fileTransform.js</span><br><span class="line">|   |</span><br><span class="line">|   |-- env.js</span><br><span class="line">|   |-- paths.js</span><br><span class="line">|   |-- webpack.config.js</span><br><span class="line">|   |-- webpackDevServer.config.js</span><br><span class="line">|</span><br><span class="line">|-- node_modules/ <span class="comment"># 依赖包，存放 npm 安装的工具包 或 模块</span></span><br><span class="line">|</span><br><span class="line">|-- public   <span class="comment"># 静态资源，该目录下的文件不会被webpack处理，它们会被拷贝到 build/ 文件夹下</span></span><br><span class="line">|   |-- favicon.ico      <span class="comment"># 网站图片标识</span></span><br><span class="line">|   |-- index.html       <span class="comment"># 页面模板：一切的开始都从这里开始，所以这个是代码执行的源头</span></span><br><span class="line">|   |-- manifest.json    <span class="comment"># 指定了开始页面为 index.html。</span></span><br><span class="line">|</span><br><span class="line">|-- scripts           <span class="comment"># 运行配置，与项目的构建、打包 或 服务 相关的脚本</span></span><br><span class="line">|   |-- build.js      <span class="comment">#</span></span><br><span class="line">|   |-- start.js      <span class="comment">#</span></span><br><span class="line">|   |-- test.js       <span class="comment">#</span></span><br><span class="line">|</span><br><span class="line"><span class="comment"># |-- src/              # src 目录下的文件才会被 webpack 打包，所以要把 js、css 文件放在 src 目录下，项目的源代码及资源</span></span><br><span class="line"><span class="comment"># |   |-- App.css</span></span><br><span class="line"><span class="comment"># |   |-- App.js</span></span><br><span class="line"><span class="comment"># |   |-- App.test.js</span></span><br><span class="line"><span class="comment"># |   |-- index.css</span></span><br><span class="line"><span class="comment"># |   |-- index.js    # 入口文件</span></span><br><span class="line"><span class="comment"># |   |-- logo.svg</span></span><br><span class="line"><span class="comment"># |   |-- serviceWorker.js</span></span><br><span class="line"><span class="comment"># 实际代码中会去修改这个文件夹下的结构，</span></span><br><span class="line">├── src/</span><br><span class="line">│   ├──app/    <span class="comment"># 存放项目业务代码</span></span><br><span class="line">│   │   ├── App.css</span><br><span class="line">│   │   ├── App.js    <span class="comment"># 根组件，路由也在这里写，或者是在外面写，在这里导入</span></span><br><span class="line">│   │   └── App.test.js</span><br><span class="line">│   │</span><br><span class="line">│   ├──assets/  <span class="comment"># 存放项目共用的代码以外的资源，如：图片、图标、视频 等；</span></span><br><span class="line">│   │   ├── logo.svg</span><br><span class="line">│   │   ├── constant.less    <span class="comment"># 存放 Less 的常量；如果是 scss 就是 scss 常量</span></span><br><span class="line">│   │   ├── index.css        <span class="comment"># 全局 css 样式</span></span><br><span class="line">│   │   └── constant.js      <span class="comment"># 存放 js 的常量；</span></span><br><span class="line">│   │</span><br><span class="line">│   ├── component/   <span class="comment"># 组件</span></span><br><span class="line">│   │   ├──</span><br><span class="line">│   │   └──</span><br><span class="line">│   │</span><br><span class="line">│   ├── views/       <span class="comment"># 页面</span></span><br><span class="line">│   │   ├──pagesA/</span><br><span class="line">│   │   └──pagesB/</span><br><span class="line">│   │</span><br><span class="line">│   ├── index.js             <span class="comment"># webpack 的入口文件；</span></span><br><span class="line">│   └── serviceWorker.js</span><br><span class="line">|</span><br><span class="line">|-- .gitignore       <span class="comment"># git 上传需要忽略的文件格式</span></span><br><span class="line">|-- package.json     <span class="comment"># 项目基本信息</span></span><br><span class="line">|-- README.md        <span class="comment"># 项目说明</span></span><br><span class="line">|-- yarn.lock        <span class="comment"># 明确 安装包的具体版本</span></span><br></pre></td></tr></table></figure>
<p>注意修改了项目结构目录之后，不要忘记修改其中文件的路径!!!!!!!!!!!!!!!!!否则会运行错误哦！！！！！！！！！！！！！！！！</p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/08/19/⑩ -【命令-工具】github- 团队合作/" class="pre">git 命令行全解-详解</a><a href="/2018/08/19/{ vue.js 框架 }- vue-cli3 脚手架/" class="next">vue-cli3--[小白入门篇、速学篇]</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、前言"><span class="toc-text">一、前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、环境准备：应用的安装"><span class="toc-text">二、环境准备：应用的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1全局安装-node-js"><span class="toc-text">2.1全局安装 node.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2全局安装-npm"><span class="toc-text">2.2全局安装 npm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3全局安装-cnpm"><span class="toc-text">2.3全局安装 cnpm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-全局安装-pnpm"><span class="toc-text">2.4 全局安装 pnpm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-升级NPM版本"><span class="toc-text">2.5 升级NPM版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-react-安装-（不需要额外安装）"><span class="toc-text">2.6 react 安装 （不需要额外安装）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-npm-安装方法-npm-init-name"><span class="toc-text">2.6.1 npm 安装方法 npm init [name]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-yarn-安装方法-yarn-add"><span class="toc-text">2.6.2 yarn 安装方法 yarn add</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-pnpm-cnpm-安装法"><span class="toc-text">2.6.3 pnpm/cnpm 安装法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-5-cdn-安装方法"><span class="toc-text">2.6.5 cdn 安装方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-create-react-app（包括-react-与-react-dom）"><span class="toc-text">2.7 create-react-app（包括 react 与 react-dom）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-安装-调试工具-debugging"><span class="toc-text">2.8 安装  调试工具 debugging</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、初始化项目：react-项目构建完整构建过程"><span class="toc-text">三、初始化项目：react 项目构建完整构建过程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-react-框架项目创建"><span class="toc-text">3.1 react 框架项目创建!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-查看版本-以及其他-命令操作"><span class="toc-text">3.2 查看版本 以及其他 命令操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-搭建完成的项目包含的功能"><span class="toc-text">3.3 搭建完成的项目包含的功能</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、搭建框架中间遇到的问题"><span class="toc-text">四、搭建框架中间遇到的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-npm-WARN-deprecated-circular-json-0-3-3-CircularJSON-is-in-maintenance-only-flatted-is-its-successor"><span class="toc-text">4.1 npm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-npm-install-出错"><span class="toc-text">4.2 npm install 出错</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-安装-scss-出错-webpack"><span class="toc-text">4.3 安装 scss 出错/webpack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-使用-yarn-安装时候出现的问题"><span class="toc-text">4.4 使用 yarn 安装时候出现的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-yarn-eject"><span class="toc-text">4.5 yarn eject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Can’t-resolve-‘-assets-logo-svg’"><span class="toc-text">4.1 Can’t resolve ‘./assets/logo.svg’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-没有-cd-进入文件夹-每次都犯这个错误"><span class="toc-text">4.1 没有 cd 进入文件夹!!!!!!!!!!!!!!!!!!!!!!!!!!!!!每次都犯这个错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-yarn-add-node-sass"><span class="toc-text">4.8 yarn add node-sass</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、框架结构详解"><span class="toc-text">五、框架结构详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-没有-eject-的项目结构"><span class="toc-text">5.1 没有 eject 的项目结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-eject-之后的项目结构"><span class="toc-text">5.2 eject 之后的项目结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-public"><span class="toc-text">5.3 public/</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-public-manifest-json-配置文件"><span class="toc-text">4.1 public/manifest.json 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-public-index-html-入口文件"><span class="toc-text">4.2 public/index.html 入口文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-src"><span class="toc-text">5.4 src/</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-src-index-js-插入-lt-div-id-quot-root-quot-gt-lt-div-gt-中的-JSX-拓展语言代码组件"><span class="toc-text">4.3 src/index.js 插入 &lt;div id=&quot;root&quot;&gt;&lt;/div&gt; 中的 JSX 拓展语言代码组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-src-index-css-全局样式-body，一些页面初始化的样式可以在这里写"><span class="toc-text">4.4 src/index.css 全局样式 body，一些页面初始化的样式可以在这里写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-src-App-js-App-css-组件-app-与-其对应的-css-样式"><span class="toc-text">4.5 src/App.js  App.css  组件 app 与 其对应的 css 样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-src-serviceWorker-js-服务器配置文件，网络代理服务器"><span class="toc-text">4.6 src/serviceWorker.js  服务器配置文件，网络代理服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-1-service-worker-介绍"><span class="toc-text">4.6.1 service worker 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-2-service-worker-实现的功能"><span class="toc-text">4.6.2  service worker 实现的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-3-简单使用"><span class="toc-text">4.6.3 简单使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-4-生命周期"><span class="toc-text">4.6.4 生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-5-事件机制"><span class="toc-text">4.6.5 事件机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-6-补充介绍-Cache-API"><span class="toc-text">4.6.6 补充介绍: Cache API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-src-App-test-js-测试文件"><span class="toc-text">4.7 src/App.test.js  测试文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-package-json"><span class="toc-text">4.8 package.json</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六、自己添加的框架思想"><span class="toc-text">六、自己添加的框架思想!!!!!!!!!!!!!!!!!!!!!!!!!!</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/">① html-css</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/Normalize-css/">Normalize.css</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/css/">css</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/html/">html</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/less/">less</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/scss/">scss</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/">② Javascript-ES6-Typescript</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/ES6/">ES6</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/Javascript/">Javascript</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/TypeScript/">TypeScript</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/">③ Jquery.js</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/JQurey-UI/">JQurey-UI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/Jquery-js-框架学习/">Jquery.js 框架学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/ajax-前后端数据交互/">ajax 前后端数据交互</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/">④ vue.js</a><span class="category-list-count">22</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/axios-前后端数据交互/">axios 前后端数据交互</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-中使用-less-scss-等预处理器/">vue 中使用 less/scss 等预处理器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-cli-脚手架/">vue-cli 脚手架</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-router-路由设置/">vue-router 路由设置</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-js-框架学习/">vue.js 框架学习</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-js-的-UI-组件库/">vue.js 的 UI 组件库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vuex-状态管理器/">vuex 状态管理器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/">⑤ react.js</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/axios-在-react-js-中使用/">axios 在 react.js 中使用</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/create-react-app-脚手架/">create-react-app 脚手架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/less-scss-在-react-中使用/">less/scss 在 react 中使用</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/mixins-混合组件-与-hoc-高阶组件/">mixins 混合组件 与 hoc 高阶组件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-router-v4-路由管理器/">react-router v4 路由管理器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-js-框架学习/">react.js 框架学习</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-js-的-UI-组件库/">react.js 的 UI 组件库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/taro-js-多终端框架-京东/">taro.js 多终端框架(京东)</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/状态管理器/">状态管理器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑥-react-native-js/">⑥ react-native.js</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑥-react-native-js/react-native-框架/">react-native 框架</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/">⑦ 小程序</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/MINA-框架/">MINA 框架</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/mpvue-框架/">mpvue 框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/wepy-框架/">wepy 框架</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/">⑧ JS 工具集/ JS拓展语言</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/Chrome-开发者工具/">Chrome 开发者工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/JSL-拓展语言/">JSL 拓展语言</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/day-js-框架/">day.js 框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/markdown/">markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/node-js-语言/">node.js 语言</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/render-函数/">render 函数</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/阿里矢量图用法（字符实体）/">阿里矢量图用法（字符实体）</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑨-HTTP/">⑨ HTTP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/">⑩ 打包工具-命令行工具-包管理器-github</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/github/">github</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/npm-yarn/">npm & yarn</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/webpack/">webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/编辑器/">编辑器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑪-网站部署/">⑪ 网站部署</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/">⑫ 综合实战项目</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/jQuery/">jQuery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/vue/">vue</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑬-数据结构与算法/">⑬ 数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑭-静态网页生成器/">⑭ 静态网页生成器</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑭-静态网页生成器/hexo/">hexo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑮-bug-集合/">⑮ bug 集合</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑮-bug-集合/vue-中遇到的-bug/">vue 中遇到的 bug</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/㊿-无关编程/">㊿ 无关编程</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/animation-动画/" style="font-size: 15px;">animation 动画</a> <a href="/tags/cookie-session-token/" style="font-size: 15px;">cookie,session,token</a> <a href="/tags/立即执行函数/" style="font-size: 15px;">立即执行函数</a> <a href="/tags/gradients-线性/" style="font-size: 15px;">gradients 线性</a> <a href="/tags/Jquery-ajax/" style="font-size: 15px;">Jquery->ajax</a> <a href="/tags/interceptor-请求拦截器/" style="font-size: 15px;">interceptor 请求拦截器</a> <a href="/tags/v-charts-图标库/" style="font-size: 15px;">v-charts 图标库</a> <a href="/tags/react-js-组件传值/" style="font-size: 15px;">react.js 组件传值</a> <a href="/tags/递归函数/" style="font-size: 15px;">递归函数</a> <a href="/tags/transition-过渡/" style="font-size: 15px;">transition 过渡</a> <a href="/tags/react-js事件处理/" style="font-size: 15px;">react.js事件处理</a> <a href="/tags/react-js-生命周期/" style="font-size: 15px;">react.js 生命周期</a> <a href="/tags/transform-转换-变形/" style="font-size: 15px;">transform 转换/变形</a> <a href="/tags/flex/" style="font-size: 15px;">flex</a> <a href="/tags/ESlint之坑/" style="font-size: 15px;">ESlint之坑</a> <a href="/tags/axios-使用于-vue-js-react-js/" style="font-size: 15px;">axios(使用于 vue.js react.js)</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/06/⑧-【JS 工具集-拓展语言】-node.js- 爬虫/">node.js--爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-ES6-基础入门/">ES6【1】--[ECMAScript 6 入门]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/{ vue.js 框架 }-事件/">vue.js--事件 以及 vue 中的所有修饰符学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-new Date() 日期时间处理/">JavaScript---new Date]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-正则表达式/">JavaScript--正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-递归函数/">JavaScript【2】--[递归函数的深入了解]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-立即执行函数/">JavaScript【4】--[立即执行函数 IIFE ]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-高质量高效率代码编辑/">[编写高质量 JS 代码 ]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/⑬ -数据结构与算法-JS-入门/">JavaScript 数据结构与算法【1】--[入门版]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/⑨-【HTTP】-HTTP 状态码/">HTTP--[状态码]</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://gofoer.com/" title="Gofoer" target="_blank">Gofoer</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p></p><p><span> &nbsp;&nbsp;Copyright &copy;2018&nbsp;<a href="/." rel="nofollow">小米粥.</a></span><span> <a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> </a></span><span> <a rel="nofollow" target="_blank" href="https://hexo.io"> </a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>