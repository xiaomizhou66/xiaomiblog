<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="小米粥e博客"><meta name="keywords" content="html, css, vue, JavaScript,js,vuex,element-ui,iveiw-ui,axios"><title>vuex 状态管理器 | liuxmoo</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">vuex 状态管理器</h1><a id="logo" href="/.">liuxmoo</a><p class="description">半路被拎来的前端。(*^▽^*)。学习最快的方法→慢慢来</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">vuex 状态管理器</h1><div class="post-meta"><a href="/2018/08/19/{ vue.js 框架 } vuex 状态管理器/#comments" class="comment-count"></a><p><span class="date">Aug 19, 2018</span><span><a href="/categories/④-vue-js/" class="category">④  vue.js</a><a href="/categories/④-vue-js/vuex-状态管理器/" class="category">vuex 状态管理器</a></span></p></div><div class="post-content"><h2 id="一、Vuex-是什么"><a href="#一、Vuex-是什么" class="headerlink" title="一、Vuex 是什么"></a>一、Vuex 是什么</h2><p>vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。Vuex 也集成到 Vue 的官方调试工具 vue-devtools。提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。</p>
<p>Vuex 是专门为 Vue.js 设计的状态管理库，以利用 Vue.js 的细粒度数据响应机制来进行高效的状态更新。</p>
<p>vuex 是一个专门为 vue.js 设计的集中式状态管理架构。<strong>状态？</strong> 我把它理解为在 data 中的属性需要共享给其他 vue 组件使用的部分，就叫做状态。简单的说 <strong>就是 data 中需要共用的属性</strong>。比如：我们有几个页面要显示用户名称和用户等级，或者显示用户的地理位置。如果我们不把这些属性设置为状态，那每个页面遇到后，都会到服务器进行查找计算，返回后再显示。在中大型项目中会有很多共用的数据，所以尤大神给我们提供了 vuex。相当于把需要公用的数据做放到一个仓库中，每次调用就 ok 了</p>
<h2 id="二、vuex-深入了解"><a href="#二、vuex-深入了解" class="headerlink" title="二、vuex 深入了解"></a>二、vuex 深入了解</h2><h3 id="2-1-什么是“状态管理模式”？"><a href="#2-1-什么是“状态管理模式”？" class="headerlink" title="2.1 什么是“状态管理模式”？"></a>2.1 什么是“状态管理模式”？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个状态自管理应用包含以下 3 个部分：</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// state：驱动应用的数据源；</span></span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// view，以声明方式将 state 映射到视图；</span></span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="comment">// actions，响应在 view 上的用户输入导致的状态变化。</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment () &#123;</span><br><span class="line">      <span class="keyword">this</span>.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-vuex-用来干什么？"><a href="#2-2-vuex-用来干什么？" class="headerlink" title="2.2 vuex 用来干什么？"></a>2.2 vuex 用来干什么？</h3><p>多个组件共享状态时，单向数据流的简洁性很容易被破坏：</p>
<ul>
<li>多个视图依赖于同一状态。</li>
<li>来自不同视图的行为需要变更同一状态。</li>
</ul>
<p>对于问题一，传参的方法对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。对于问题二，我们经常会采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。</p>
<p>因此，我们为什么不把组件的共享状态抽取出来，以一个全局单例模式管理呢？在这种模式下，我们的组件树构成了一个巨大的“视图”，不管在树的哪个位置，任何组件都能获取状态或者触发行为！另外，通过定义和隔离状态管理中的各种概念并强制遵守一定的规则，我们的代码将会变得更结构化且易维护。<br>这就是 Vuex 背后的基本思想。</p>
<h3 id="2-3-什么情况下我应该使用-Vuex？"><a href="#2-3-什么情况下我应该使用-Vuex？" class="headerlink" title="2.3 什么情况下我应该使用 Vuex？"></a>2.3 什么情况下我应该使用 Vuex？</h3><p>虽然 Vuex 可以帮助我们管理共享状态，但也附带了更多的概念和框架。这需要对短期和长期效益进行权衡。</p>
<p>如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。确实是如此——如果您的应用够简单，您最好不要使用 Vuex。一个简单的 global event bus 就足够您所需了。但是，如果您需要构建是一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，Vuex 将会成为自然而然的选择。</p>
<p>说白了 vuex 是用来管理那些在多个组件中需要使用到的数据的。在大型应用设计上我们用 vuex 来管理那些多个页面需要使用到的数据。<br>也就是说小型设计就没有必要用了， eventBus.js 就可以解决数据公用问题了。<br>也不是什么数据都放在 vuex 来管理，  vuex 管理的数据越少才越好。</p>
<h2 id="三、安装-引入"><a href="#三、安装-引入" class="headerlink" title="三、安装/引入"></a>三、安装/引入</h2><h3 id="3-1-安装-vuex"><a href="#3-1-安装-vuex" class="headerlink" title="3.1 安装 vuex"></a>3.1 安装 vuex</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm/cnpm 安装</span></span><br><span class="line">$ npm install vuex --save</span><br><span class="line"><span class="comment"># 这个包我们在生产环境中是要使用的不用 dev，Development：开发坏境，指定是开发坏境需要，不需要在生产坏境中。</span></span><br><span class="line"><span class="comment"># 完成安装之后，可以在 vue-cli 的项目框架 package.json 文件中的 dependencies 中查看到版本</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># CDN安装（可以控制版本）</span></span><br><span class="line"><span class="comment"># [CDN链接：](https://www.bootcdn.cn/vuex/)</span></span><br><span class="line">&lt;script src=<span class="string">"https://cdn.bootcss.com/vuex/3.0.1/vuex.js"</span>&gt;&lt;/script&gt; <span class="comment"># 这样 vuex 会被注册为一个全局变量，不需要再手动引入</span></span><br><span class="line"><span class="comment"># 然后这个全局引入就不需要了，可以使用 vuex 了 import Vue from 'vue', import Vuex from 'vuex',  Vue.use(Vuex)。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 独立版本引入，就是将代码放在本地的意思，不用的</span></span><br><span class="line">&lt;script src=<span class="string">"./vuex"</span>&gt;&lt;/script&gt;<span class="comment"># 这样 vuex 会被注册为一个全局变量，不需要再手动引入</span></span><br><span class="line"><span class="comment"># 然后这个全局引入就不需要了，可以使用 vuex 了 import Vue from 'vue', import Vuex from 'vuex',  Vue.use(Vuex)。</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-引入使用-vuex"><a href="#3-2-引入使用-vuex" class="headerlink" title="3.2 引入使用 vuex"></a>3.2 引入使用 vuex</h3><h4 id="3-2-1-在-main-js-文件中引入-store-js-文件-vue-获取状态数据与方法【使用这个方法】"><a href="#3-2-1-在-main-js-文件中引入-store-js-文件-vue-获取状态数据与方法【使用这个方法】" class="headerlink" title="3.2.1 在 main.js 文件中引入 store.js 文件, .vue 获取状态数据与方法【使用这个方法】"></a>3.2.1 在 main.js 文件中引入 store.js 文件, .vue 获取状态数据与方法【使用这个方法】</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store.js</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> iView <span class="keyword">from</span> <span class="string">'iview'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'iview/dist/styles/iview.css'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/vuex/store'</span><span class="comment">//导入 store.js 文件，vue-cli</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'store'</span><span class="comment">//导入 store.js 文件，vue-cli3</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line">Vue.use(iView)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  store, <span class="comment">//注册 store，一种机制将状态从根组件“注入”到每一个子组件中</span></span><br><span class="line">  <span class="comment">//把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件</span></span><br><span class="line">  <span class="comment">//子组件能通过 this.$store 访问到。</span></span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>需要注意的是，通过在根实例中注册 store 选项，该 store 实例会注入到根组件下的所有子组件中，且子组件能通过 this.$store 访问到。简单的说，这样全局引用的话，必须以要用 this.$store.state.xxx ,才能获取数据了。没有 this 的话获取不到数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- .vue 子组件，不需要再引入 store.js 了，不要忘记加上 this --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.$store.state.count&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.$store.commit('add')"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.$store.commit('reduce')"</span>&gt;</span>减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="undefined">        data()&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="javascript">                msg:<span class="string">'Hello Vuex'</span>,</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-2-单个文件单独的引入-store-js（一般不用这个方法）"><a href="#3-2-2-单个文件单独的引入-store-js（一般不用这个方法）" class="headerlink" title="3.2.2 单个文件单独的引入 store.js（一般不用这个方法）"></a>3.2.2 单个文件单独的引入 store.js（一般不用这个方法）</h4><p>这种模式导致组件依赖全局状态单例。在模块化的构建系统中，在每个需要使用 state 的组件中需要频繁地导入，并且在测试组件时需要模拟状态。因此我们不要这样单独应用！！！一定要全局的引用 store.js 文件：即在，main.js 中引用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store.js</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 实际应用中会是这样来创建组件的，也是 $store.state.count 这样来调用数据的，而不是上面那样 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- .vue 组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;$store.state.count&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"$store.commit('add')"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"$store.commit('reduce')"</span>&gt;</span>减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/vuex/store'</span> <span class="comment">// 路径相应的自己去看着自己的项目改变</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="undefined">      data()&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="javascript">            msg:<span class="string">'Hello Vuex'</span>,</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="javascript">      store  <span class="comment">//注册 在子组件 .vue 中引入 store.js 的注册</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="四、vuex-具体使用"><a href="#四、vuex-具体使用" class="headerlink" title="四、vuex 具体使用"></a>四、vuex 具体使用</h2><p><strong>vuex 管理数据 store.js文件</strong> <strong>.vue 文件中 template 调用数据</strong></p>
<p>每一个 Vuex 应用的核心就是 store（仓库）。“store”基本上就是一个容器，它包含着你的应用中大部分的状态 (state)。Vuex 和单纯的全局对象有以下两点不同：</p>
<ul>
<li>Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新。</li>
<li>你不能直接改变 store 中的状态。改变 store 中的状态的唯一途径就是显式地提交 (commit) mutation。这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。</li>
</ul>
<p>script 中改写后 ，再在 template 调用。在第三章中我们子组件 .vue 文件，是 template 直接去调用 store.js 文件数据与 mutations 方法,这个状态是在 store.js 中的，在 .vue 文件的 data 中是不存在的。这样如果我们需要在 .vue 文件中多处调用同一个状态数据或者方法的话，就要写很多遍 this.$store.state.XXXX  ，this.$store.commit(‘xxx’),这样会很麻烦，我们可以现在 .vue 文件中用 computed 属性选项来改写 state 之后，再在 template 中调用。说白了，这样做的目的就是为了简化 template 中的调用 store.js 状态。</p>
<h3 id="4-1-store-js"><a href="#4-1-store-js" class="headerlink" title="4.1 store.js"></a>4.1 store.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store.js文件</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="comment">// 如果在模块化构建系统中，请确保在开头调用了 Vue.use(Vuex),也就是上面 3 句</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state=&#123;</span><br><span class="line">    count:<span class="number">1</span>,  <span class="comment">//这里写一些状态数据（就是类似组件中的 data()&#123;return&#123;//&#125;&#125; ） 中的数据</span></span><br><span class="line">    todos: [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类似 .vue 中的 methods</span></span><br><span class="line"><span class="keyword">const</span> mutations=&#123;</span><br><span class="line">    add(state)&#123;  <span class="comment">//这里写一些方法，用来改变 state 中的状态值</span></span><br><span class="line">        state.count++;<span class="comment">//store 中的状态的唯一途径就是显式地提交 (commit) mutation</span></span><br><span class="line">    &#125;,</span><br><span class="line">    reduce(state)&#123;</span><br><span class="line">        state.count--;</span><br><span class="line">    &#125;,</span><br><span class="line">    increment (state) &#123; <span class="comment">//在这里面的方法都是同步进行的</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions=&#123; <span class="comment">//这里写一些方法，用来改变 state 中的状态值，在这里面的方法是异步进行的</span></span><br><span class="line">  increment (context) &#123; <span class="comment">//①参数 context：上下文对象</span></span><br><span class="line">    context.commit(<span class="string">'increment'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  addAction (context) &#123;</span><br><span class="line">    context.commit(<span class="string">'add'</span>, <span class="number">10</span>)</span><br><span class="line">    setTimeOut(<span class="function"><span class="params">()</span>=&gt;</span>&#123;context.commit(reduce)&#125;,<span class="number">3000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我先执行完，因为在这里允许前面的人没有做完，我也可以开始了，我要的时间短，我就先完成了'</span>);</span><br><span class="line">    <span class="comment">//console.log 先执行完毕，然后 setTimeOut(()=&gt;&#123;context.commit(reduce)&#125;,3000);才会被执行完，</span></span><br><span class="line">    <span class="comment">//事实上 setTimeOut 代码是先执行的，然后他执行时间比较长，后面的一个输出的执行时间比较短，后面一句都//比前面一句先执行完成了。</span></span><br><span class="line">    <span class="comment">//关于执行时间的问题可以查看 JavaScript 中代码的执行时间问题。</span></span><br><span class="line">  &#125;,</span><br><span class="line">  reduceAction (&#123;commit&#125;) &#123;</span><br><span class="line">    commit(<span class="string">'reduce'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* actions: &#123;</span></span><br><span class="line"><span class="comment">  increment (&#123; commit &#125;) &#123;//②参数&#123;commit&#125;：直接把 commit 对象传递过来，方法体逻辑和代码更清晰明了。</span></span><br><span class="line"><span class="comment">    commit('increment')</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125; ES6/ES2015 的写法，</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters=&#123; <span class="comment">//这些写一下方法过滤 state 状态的数据</span></span><br><span class="line">  <span class="keyword">const</span> getters=&#123;</span><br><span class="line">    count:<span class="function"><span class="params">state</span>=&gt;</span>state.count+<span class="number">10</span> <span class="comment">//ES6 的写法，注意 ES6 返回值不能是赋值的形式，只能这样写</span></span><br><span class="line">    <span class="comment">//而不能写成state.count+=10</span></span><br><span class="line">  &#125;,</span><br><span class="line">  doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done)</span><br><span class="line">    <span class="comment">//返回值state.todos.filter(todo =&gt; todo.done)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-使用-state，getters，mutations，actions-的四个办法"><a href="#4-2-使用-state，getters，mutations，actions-的四个办法" class="headerlink" title="4.2 使用 state，getters，mutations，actions 的四个办法"></a>4.2 使用 state，getters，mutations，actions 的四个办法</h3><ul>
<li>state:</li>
<li>mutation:<br>  更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。Vuex 中的 mutation 非常类似于事件：每个 mutation 都有一个字符串的 事件类型 (type) 和 一个 回调函数 (handler)。这个回调函数就是我们实际进行状态更改的地方，并且它会接受 state 作为第一个参数。简单来说就是一句话：Mutations 就是包含改变 state 的值的方法</li>
<li>getters<br>  从 store 中的 state 中派生出一些状态，例如对列表进行过滤并计数,<br>  computed: {<pre><code>doneTodosCount () {
  return this.$store.state.todos.filter(todo =&gt; todo.done).length
}
</code></pre>  }<br>  如果有多个组件需要用到此属性，我们要么复制这个函数，或者抽取到一个共享函数然后在多处导入它——无论哪种方式都不是很理想。Vuex 允许我们在 store 中定义 “getter”（可以认为是 store 的计算属性）。就像计算属性一样，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。<strong>简单来说：getters从表面是获得的意思，可以把他看作在获取数据之前进行的一种再编辑,相当于对数据的一个过滤和加工。你可以把它看作store.js的计算属性。</strong><br>  this.$store.getters.doneTodos,this.$store.getters.donecount 如果在 template 中多处使用同一个数据是很麻烦的，因此我们要在 script 中 computed 中对它进行改写，后再在 template 中调用。</li>
<li><p>actions<br>  和之前讲的 Mutations 功能基本一样，不同点是，actions 是异步的改变 state 状态，而 Mutations 是同步改变状态。<br>  Action 提交的是 mutation，而不是直接变更状态。<br>  Action 可以包含任意异步操作。<br>  Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用 context.commit 提交一个 mutation，或者通过 context.state 和 context.getters 来获取 state 和 getters。但是 context 并不是 store 实例本身。更复杂的异步处理学习：<a href="https://vuex.vuejs.org/zh/guide/actions.html" target="_blank" rel="noopener">vuex官网</a></p>
</li>
<li><p>方法一：（少的时候可以用，但是通常不会少吧）<br>  state：直接在 template 中调用，一长串的 this.$store.state.xxx<br>  mutations：直接在 template 中调用，一长串的 @click=”this.$store.commit(‘add’,10)”<br>  getters:直接在 template中调用（用属性/方法都可以的）<br>  actions：直接在 template 中调用</p>
</li>
<li>方法二：<br>  state：通过 computed 的 computed 计算属性直接赋值，后在 template 中调用<br>  mutations：通过导入 mapMutations 的对象 methods 方法中放 <strong>mapMutations 的对象</strong>赋值，再在 template 中调用<br>  getters:通过导入 mapGetters 的对象 computed 方法中放 <strong>mapGetters 的对象</strong>赋值，再在 template 中调用<br>  actions：通过导入 mapActions 的对象 methods 方法中放 <strong>mapActions 的对象</strong>赋值，再在 template 中调用</li>
<li>方法三：（太复杂了不用了）<br>  state：通过导入 mapState 的对象 computed 的计算属性中放 <strong>mapState 的对象</strong>赋值，后在 template 中调用</li>
<li>方法四：（直白易懂，通常都使用这样的数组赋值方法！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！）<br>  state：通过导入 mapState 的对象 computed 的计算属性中放 <strong>mapState 的数组</strong>赋值<pre><code>(如果需要使用的数据很多时，通常使用这种，但是如果只使用一次的话，第一种显然又更合理了)
</code></pre>  mutations：通过导入 mapMutations 的对象 methods 方法中放 <strong>mapMutations 的数组</strong>赋值，再在 template 中调用<br>  getters:通过导入 mapGetters 的对象 computed 方法中放 <strong>mapGetters 的数组</strong>赋值，再在 template 中调用<br>  actions：通过导入 mapActions 的对象 methods 方法中放 <strong>mapActions 的数组</strong>赋值，再在 template 中调用</li>
</ul>
<h4 id="4-2-1-直接在-template-中使用（见前面的第-3-章）"><a href="#4-2-1-直接在-template-中使用（见前面的第-3-章）" class="headerlink" title="4.2.1 直接在 template 中使用（见前面的第 3 章）"></a>4.2.1 直接在 template 中使用（见前面的第 3 章）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- //.vue子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- 一长串的 this.$store.state 全在这里 --&gt;</span></span><br><span class="line">        &#123;&#123;msg&#125;&#125; is &#123;&#123;this.$store.state.count&#125;&#125;  years old</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.$store.commit('add',10)"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.$store.commit('reduce',19)"</span>&gt;</span>减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.$store.state.donecount&#125;&#125;这里用属性 <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.$store.state.donecount()&#125;&#125;这里用方法 <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.$store.dispatch('increment')"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'Count'</span>, <span class="comment">// 这里是组件名称</span></span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="javascript">      msg:<span class="string">'xiaomi'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-2-使用-computed-gt-state-methods-gt-mutations（这个其实就是别名的意义！！！）"><a href="#4-2-2-使用-computed-gt-state-methods-gt-mutations（这个其实就是别名的意义！！！）" class="headerlink" title="4.2.2 使用 computed=&gt;state,methods=&gt;mutations（这个其实就是别名的意义！！！）"></a>4.2.2 使用 computed=&gt;state,methods=&gt;mutations（这个其实就是别名的意义！！！）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- //.vue子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- /* 这里就不需要再像第三张那样复杂的写 &#123;&#123;this.$store.state.count&#125;&#125; 的长串了 */ --&gt;</span></span><br><span class="line">        &#123;&#123;msg&#125;&#125; is &#123;&#123;count&#125;&#125;  years old</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.add(10)"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注意因为是用 main.js 引入的，不要忘记使用 this. --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 不需要这样麻烦的调用了this.$store.commit('add',10) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.reduce(19)"</span>&gt;</span>减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.aaaaacount&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.doneTodos&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.qqincrement"</span>&gt;</span>自增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.sssaddAction"</span>&gt;</span>这里每次增加10<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.sssaddAction(10)"</span>&gt;</span>这里每次增加20<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.aaaaareduceAction"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; mapMutations,mapGetters,mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>  <span class="comment">//导入 mapState 的对象</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'Count'</span>, <span class="comment">// 这里是组件名称</span></span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="javascript">      msg:<span class="string">'xiaomi'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    count () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count</span></span><br><span class="line"><span class="javascript">      <span class="comment">//main.js 中已经将 store 实例会注入到根组件下的所有子组件中，子组件能通过 this.$store 访问到</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//一定要写 this，要不你会找不到 $store 的。</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//这种写法很好理解，但是写起来是比较麻烦的</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    ...mapGetters(&#123;</span></span><br><span class="line"><span class="javascript">      aaaaacount:<span class="string">'donecount'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 把 `this.aaaaacount` 映射为 `this.$store.getters.doneTodosCount`</span></span></span><br><span class="line"><span class="javascript">      aaaaatodos:<span class="string">'doneTodos'</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 把 `this.aaaaatodos` 映射为 `this.$store.getters.doneTodosCount`</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//mapGetters 的对象赋值，其实就是 把这个过滤方法换一个名称，</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//不建议用这种方法，还是用数组赋值比较好</span></span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods:&#123;</span></span><br><span class="line"><span class="undefined">    ...mapMutations(&#123;</span></span><br><span class="line"><span class="javascript">      add: <span class="string">'add'</span>, <span class="comment">// 将 `this.add()` 映射为 `this.$store.commit('add')`</span></span></span><br><span class="line"><span class="javascript">      reduce: <span class="string">'reduce'</span> <span class="comment">// 将 `this.reduce()` 映射为 `this.$store.commit('reduce')`</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//换句话说：想将一个 Mutations 属性另取一个名字，使用对象形式。，</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//上面可以随便改写名称</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//addrrrrr: 'add',   将 `this.addrrrrr()` 映射为 `this.$store.commit('add')`</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//reducerr:'reduce'  将 `thisreducerr()` 映射为 `this.$store.commit('reduce')`</span></span></span><br><span class="line"><span class="undefined">    &#125;),</span></span><br><span class="line"><span class="undefined">    ...mapActions(&#123;</span></span><br><span class="line"><span class="javascript">      qqincrement:<span class="string">'increment'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 将 `this.qqincrement()` 映射为 `this.$store.dispatch('increment')`</span></span></span><br><span class="line"><span class="javascript">      sssaddAction:<span class="string">'addAction'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 将 `this.sssaddAction()` 映射为 `this.$store.dispatch('addAction')`</span></span></span><br><span class="line"><span class="javascript">      aaaaareduceAction:<span class="string">'reduceAction'</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 将 `this.aaaaareduceAction()` 映射为 `this.$store.dispatch('reduceAction')`</span></span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-3-这个方法太复杂了，不看了！！！！！！！！！！！"><a href="#4-2-3-这个方法太复杂了，不看了！！！！！！！！！！！" class="headerlink" title="4.2.3 这个方法太复杂了，不看了！！！！！！！！！！！"></a>4.2.3 这个方法太复杂了，不看了！！！！！！！！！！！</h4><p>通过导入 mapState 的对象 computed 的计算属性中放 mapState 的对象赋值</p>
<p>方法①很简单，好理解，同一个状态值调用一次可以这样用，但是当一个组件需要获取多个状态时候，将这些状态都声明为计算属性会有些重复和冗余。为了解决这个问题，我们可以使用 mapState 辅助函数帮助我们生成计算属性，让你少按几次键：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.vue 子组件</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"count"</span>&gt;  </span><br><span class="line">        <span class="comment">/* 这里就不需要再像第三张那样复杂的写&#123;&#123;this.$store.state.count&#125;&#125;的长串了 */</span></span><br><span class="line">        &#123;&#123;msg&#125;&#125; is &#123;&#123;count&#125;&#125;  years old !</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>  <span class="comment">//导入 mapState 的对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'Count'</span>, <span class="comment">// 这里是组件名称，给 template 中的 class 没有关系，原名为 HelloWorld</span></span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      msg:<span class="string">'xiaomi'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: mapState(&#123;  <span class="comment">//这里 computed 属性,加上 mapState()，里面是对象</span></span><br><span class="line">    count:<span class="function"><span class="params">state</span>=&gt;</span>state.count,<span class="comment">//函数 count 的 ES6 箭头函数写法</span></span><br><span class="line">    countAlias: <span class="string">'count'</span>,<span class="comment">// 传字符串参数 'count' 等同于 `state =&gt; state.count`？？？不懂？？</span></span><br><span class="line">    countPlusLocalState (state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + <span class="keyword">this</span>.localCount</span><br><span class="line">      <span class="comment">// 这里为了能够使用 `this` 获取局部状态，必须使用常规函数????budong</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>解析：count:state=&gt;state.count，这里我们使用 ES6 的箭头函数来给 count 赋值。意思即使说一个 count 函数传入 state 参数返回值是 state.count。箭头函数是我们必须要理解学会的。这个 ES6 函数可以转化为以下 ES5 函数。便于看不懂 ES6 的理解。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed:mapState(&#123;</span><br><span class="line">  count:<span class="function"><span class="keyword">function</span>(<span class="params">state</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> state.count</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="4-2-4-类似拓展符号的方法引入！！！！！！！！！！！！！！！！！！！！！！！！！！重点，重点，重点，使用这方法来做！！！！！！！"><a href="#4-2-4-类似拓展符号的方法引入！！！！！！！！！！！！！！！！！！！！！！！！！！重点，重点，重点，使用这方法来做！！！！！！！" class="headerlink" title="4.2.4  类似拓展符号的方法引入！！！！！！！！！！！！！！！！！！！！！！！！！！重点，重点，重点，使用这方法来做！！！！！！！"></a>4.2.4  类似拓展符号的方法引入！！！！！！！！！！！！！！！！！！！！！！！！！！重点，重点，重点，使用这方法来做！！！！！！！</h4><p>通过导入 mapState 的对象 computed 的计算属性中放 mapState 的数组赋值。这个办法是在实际应用中常用的方法，也是最简单的方法。需要注意的是 computed 里面是用的的数组，但是导入的时候都是对象，vuex 里面就是有 mapState 这个对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- //.vue 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>  &#123;&#123;msg&#125;&#125; is &#123;&#123;count&#125;&#125;  years old !<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.add(10)"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="comment">&lt;!-- 注意因为是用 main.js 引入的，不要忘记使用this. --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 不需要这样麻烦的调用了 this.$store.commit('add',10) --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.reduce(19)"</span>&gt;</span>减<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="comment">&lt;!-- 不需要这样麻烦的调用了 this.$store.commit('reduce',19) --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.donecount&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;this.doneTodost&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.increment"</span>&gt;</span>自增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.addAction"</span>&gt;</span>这里每次增加 10<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.addAction(10)"</span>&gt;</span>这里每次增加 20<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.reduceAction"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"save"</span>&gt;</span>原方法直接用，不需要 this<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; mapState, mapMutations,mapGetters, mapActions&#125; <span class="keyword">from</span> <span class="string">'vuex'</span> <span class="comment">//导入 mapGetters 对象</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'Count'</span>, <span class="comment">// 这里是组件名称，给 template 中的 class 没有关系，原名为 HelloWorld</span></span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="javascript">      msg:<span class="string">'xiaomi'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed:&#123;</span></span><br><span class="line"><span class="javascript">    newmsg()&#123; <span class="comment">//原生 computed 计算属性方法</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    ...mapState([<span class="string">'count'</span>]), <span class="comment">//改写 store.js 的 state 状态(和原生的计算属性并列显示)</span></span></span><br><span class="line"><span class="javascript">    ...mapGetters([  <span class="comment">//数组赋值改写</span></span></span><br><span class="line"><span class="javascript">      <span class="string">'donecount'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="string">'doneTodos'</span></span></span><br><span class="line"><span class="undefined">    ])</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods:&#123;</span></span><br><span class="line"><span class="undefined">    ...mapMutations([</span></span><br><span class="line"><span class="javascript">      <span class="string">'add'</span>, <span class="comment">// 将 `this.add(n)` 映射为 `this.$store.commit('add',n)`</span></span></span><br><span class="line"><span class="javascript">      <span class="string">'reduce'</span> <span class="comment">// 将 `this.reduce(n)` 映射为 `this.$store.commit('reduce',n)`</span></span></span><br><span class="line"><span class="undefined">    ]),</span></span><br><span class="line"><span class="javascript">    ...mapActions([ <span class="comment">//数组赋值</span></span></span><br><span class="line"><span class="javascript">      <span class="string">'increment'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="string">'addAction'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="string">'reduceAction'</span></span></span><br><span class="line"><span class="undefined">    ]),</span></span><br><span class="line"><span class="javascript">    save()&#123; <span class="comment">//.vue 文件的原方法</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">/*执行语句*/</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-module-模块组运用"><a href="#4-3-module-模块组运用" class="headerlink" title="4.3 module 模块组运用"></a>4.3 module 模块组运用</h3><p>随着项目的复杂性增加，我们共享的状态越来越多，这时候我们就需要把我们状态的各种操作进行一个分组，分组后再进行按组编写。那今天我们就学习一下 module：状态管理器的模块组操作。尤其是一个很大的项目很多人同时进行，为了不影响他人的数据，我们每个人都有自己的模块组。将 store 分割成模块（module）。每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块——从上至下进行同样方式的分割：避免 store 对象就有可能变得相当臃肿。但是 module 模块组使用有坑，如果项目不是那么的大，建议不要轻易使用模块组。更多的学习到：<a href="https://vuex.vuejs.org/zh/guide/modules.html" target="_blank" rel="noopener">vuex官网-module模块组</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store.js文件</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="comment">// 如果在模块化构建系统中，请确保在开头调用了 Vue.use(Vuex),也就是上面3句</span></span><br><span class="line"><span class="keyword">const</span> moduleA=&#123;</span><br><span class="line">  state:&#123;</span><br><span class="line">    count:<span class="number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB=&#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123;... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    increment (context) &#123; <span class="comment">//①参数 context：上下文对象</span></span><br><span class="line">      context.commit(<span class="string">'increment'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules:&#123;</span><br><span class="line">    a:moduleA,</span><br><span class="line">    b:moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- .vue 子组件调用，这里是 template 中直接调用，在 script 得到改些到官网学习，</span></span><br><span class="line"><span class="comment">太复杂了，如果项目不复杂不要用模块组，无形给自己增添麻烦 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>  </span><br><span class="line">    &#123;&#123;this.$store.state.a.count&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"this.$store.dipatch.increment"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>太难了，后面如果实在项目麻烦，再去学习使用！！！！</p>
<p>其实 vuex 也要适当的用直接传递参数会比这个好用多</p>
<h2 id="五、JavaScript-的常见的算法类型执行时间"><a href="#五、JavaScript-的常见的算法类型执行时间" class="headerlink" title="五、JavaScript 的常见的算法类型执行时间"></a>五、<strong>JavaScript 的常见的算法类型执行时间</strong></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 标记       名称     描述</span></span><br><span class="line"><span class="comment"># O(1)      常数      不管有多少值，执行的时间都是恒定的。一般表示简单值和存储在变量中的值|</span></span><br><span class="line"><span class="comment"># O(log n)  对数      总的执行时间和值的数量相关，但是要完成算法并不一定要获取每个值。例如：二分查找|</span></span><br><span class="line"><span class="comment"># O(log n)  线性      总执行时间和值的数量直接相关。例如：遍历某个数组中的所有元素|</span></span><br><span class="line"><span class="comment"># O(n2)     平方      总执行时间和值的数量有关，每个值至少要获取 n 次。例如：插入排序|</span></span><br></pre></td></tr></table></figure>
<h2 id="六、使用过程的坑-与自己的犯错"><a href="#六、使用过程的坑-与自己的犯错" class="headerlink" title="六、使用过程的坑/与自己的犯错"></a>六、使用过程的坑/与自己的犯错</h2><h3 id="6-1-调用-mutations-方法错误"><a href="#6-1-调用-mutations-方法错误" class="headerlink" title="6.1 调用 mutations 方法错误"></a>6.1 调用 mutations 方法错误</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> [Vue warn]: <span class="built_in">Error</span> <span class="keyword">in</span> mounted hook: <span class="string">"SyntaxError: Unexpected token u in JSON at position 0"</span></span><br><span class="line"></span><br><span class="line">found <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">---&gt; <span class="xml"><span class="tag">&lt;<span class="name">Home</span>&gt;</span> at src\components\home.vue</span></span><br><span class="line">       &lt;App&gt; at src\App.vue</span><br><span class="line">         &lt;Root&gt;</span><br><span class="line">vue.esm.js?efeb:1741 SyntaxError: Unexpected token u in JSON at position 0</span><br><span class="line">    at JSON.parse (&lt;anonymous&gt;)</span><br><span class="line">    at Store.gettabledata (store.js?0dc8:23)</span><br><span class="line">    at wrappedMutationHandler (vuex.esm.js?358c:697)</span><br><span class="line">    at commitIterator (vuex.esm.js?358c:389)</span><br><span class="line">    at Array.forEach (&lt;anonymous&gt;)</span><br><span class="line">    at eval (vuex.esm.js?358c:388)</span><br><span class="line">    at Store._withCommit (vuex.esm.js?358c:495)</span><br><span class="line">    at Store.commit (vuex.esm.js?358c:387)</span><br><span class="line">    at Store.boundCommit [as commit] (vuex.esm.js?358c:335)</span><br><span class="line">    at VueComponent.mounted (home.vue?250d:180)</span><br></pre></td></tr></table></figure>
<p><strong>填坑</strong></p>
<p>问题解析：在位置 0 的 JSON 中出现意外的标记 u</p>
<h3 id="6-2-调用-mutations-方法错误"><a href="#6-2-调用-mutations-方法错误" class="headerlink" title="6.2 调用 mutations 方法错误"></a>6.2 调用 mutations 方法错误</h3></div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/08/19/{ vue.js 框架 } vue-router 路由设置/" class="pre">vue-router--[小白入门篇、速学篇]</a><a href="/2018/08/19/{ vue.js 框架 } axios 前后端数据交换/" class="next">axios 小白入门篇、速学篇</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、Vuex-是什么"><span class="toc-text">一、Vuex 是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、vuex-深入了解"><span class="toc-text">二、vuex 深入了解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-什么是“状态管理模式”？"><span class="toc-text">2.1 什么是“状态管理模式”？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-vuex-用来干什么？"><span class="toc-text">2.2 vuex 用来干什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-什么情况下我应该使用-Vuex？"><span class="toc-text">2.3 什么情况下我应该使用 Vuex？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、安装-引入"><span class="toc-text">三、安装/引入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-安装-vuex"><span class="toc-text">3.1 安装 vuex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-引入使用-vuex"><span class="toc-text">3.2 引入使用 vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-在-main-js-文件中引入-store-js-文件-vue-获取状态数据与方法【使用这个方法】"><span class="toc-text">3.2.1 在 main.js 文件中引入 store.js 文件, .vue 获取状态数据与方法【使用这个方法】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-单个文件单独的引入-store-js（一般不用这个方法）"><span class="toc-text">3.2.2 单个文件单独的引入 store.js（一般不用这个方法）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、vuex-具体使用"><span class="toc-text">四、vuex 具体使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-store-js"><span class="toc-text">4.1 store.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-使用-state，getters，mutations，actions-的四个办法"><span class="toc-text">4.2 使用 state，getters，mutations，actions 的四个办法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-直接在-template-中使用（见前面的第-3-章）"><span class="toc-text">4.2.1 直接在 template 中使用（见前面的第 3 章）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-使用-computed-gt-state-methods-gt-mutations（这个其实就是别名的意义！！！）"><span class="toc-text">4.2.2 使用 computed=&gt;state,methods=&gt;mutations（这个其实就是别名的意义！！！）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-这个方法太复杂了，不看了！！！！！！！！！！！"><span class="toc-text">4.2.3 这个方法太复杂了，不看了！！！！！！！！！！！</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-类似拓展符号的方法引入！！！！！！！！！！！！！！！！！！！！！！！！！！重点，重点，重点，使用这方法来做！！！！！！！"><span class="toc-text">4.2.4  类似拓展符号的方法引入！！！！！！！！！！！！！！！！！！！！！！！！！！重点，重点，重点，使用这方法来做！！！！！！！</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-module-模块组运用"><span class="toc-text">4.3 module 模块组运用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、JavaScript-的常见的算法类型执行时间"><span class="toc-text">五、JavaScript 的常见的算法类型执行时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、使用过程的坑-与自己的犯错"><span class="toc-text">六、使用过程的坑/与自己的犯错</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-调用-mutations-方法错误"><span class="toc-text">6.1 调用 mutations 方法错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-调用-mutations-方法错误"><span class="toc-text">6.2 调用 mutations 方法错误</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/">① html-css</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/Normalize-css/">Normalize.css</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/css/">css</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/html/">html</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/less/">less</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/scss/">scss</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/">② Javascript-ES6-Typescript</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/ES6/">ES6</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/Javascript/">Javascript</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/TypeScript/">TypeScript</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/">③ Jquery.js</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/JQurey-UI/">JQurey-UI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/Jquery-js-框架学习/">Jquery.js 框架学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/ajax-前后端数据交互/">ajax 前后端数据交互</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/">④  vue.js</a><span class="category-list-count">21</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/axios-前后端数据交互/">axios 前后端数据交互</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-中使用-less-scss-等预处理器/">vue 中使用 less/scss 等预处理器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-cli-脚手架/">vue-cli 脚手架</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-router-路由设置/">vue-router 路由设置</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-js-框架学习/">vue.js 框架学习</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-js-的-UI-组件库/">vue.js 的 UI 组件库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vuex-状态管理器/">vuex 状态管理器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/">⑤ react.js</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/axios-在-react-js-中使用/">axios 在 react.js 中使用</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/create-react-app-脚手架/">create-react-app 脚手架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/less-scss/">less/scss</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/mixins-混合组件-与-hoc-高阶组件/">mixins 混合组件 与 hoc 高阶组件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-router-v4-路由管理器/">react-router v4 路由管理器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-js-框架学习/">react.js 框架学习</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-js-的-UI-组件库/">react.js 的 UI 组件库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/taro-js-多终端框架-京东/">taro.js 多终端框架(京东)</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/状态管理器/">状态管理器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑥-react-native-js/">⑥ react-native.js</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑥-react-native-js/react-native-框架/">react-native 框架</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/">⑦ 小程序</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/MINA-框架/">MINA 框架</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/mpvue-框架/">mpvue 框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/wepy-框架/">wepy 框架</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/">⑧ JS 工具集/ JS拓展语言</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/Chrome-开发者工具/">Chrome 开发者工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/JSL-拓展语言/">JSL 拓展语言</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/day-js-框架/">day.js 框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/markdown/">markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/node-js-语言/">node.js 语言</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/render-函数/">render 函数</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/阿里矢量图用法（字符实体）/">阿里矢量图用法（字符实体）</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑨-HTTP/">⑨ HTTP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/">⑩ 打包工具-命令行工具-包管理器-github</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/github/">github</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/npm-yarn/">npm & yarn</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/webpack/">webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/编辑器/">编辑器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑪-网站部署/">⑪ 网站部署</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/">⑫ 综合实战项目</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/jQuery/">jQuery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/vue/">vue</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑬-数据结构与算法/">⑬ 数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑭-静态网页生成器/">⑭ 静态网页生成器</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑭-静态网页生成器/hexo/">hexo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/㊿-无关编程/">㊿ 无关编程</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/animation-动画/" style="font-size: 15px;">animation 动画</a> <a href="/tags/cookie-session-token/" style="font-size: 15px;">cookie,session,token</a> <a href="/tags/递归函数/" style="font-size: 15px;">递归函数</a> <a href="/tags/gradients-线性/" style="font-size: 15px;">gradients 线性</a> <a href="/tags/Jquery-ajax/" style="font-size: 15px;">Jquery->ajax</a> <a href="/tags/interceptor-请求拦截器/" style="font-size: 15px;">interceptor 请求拦截器</a> <a href="/tags/v-charts-图标库/" style="font-size: 15px;">v-charts 图标库</a> <a href="/tags/react-js-组件传值/" style="font-size: 15px;">react.js 组件传值</a> <a href="/tags/立即执行函数/" style="font-size: 15px;">立即执行函数</a> <a href="/tags/transition-过渡/" style="font-size: 15px;">transition 过渡</a> <a href="/tags/react-js事件处理/" style="font-size: 15px;">react.js事件处理</a> <a href="/tags/react-js-生命周期/" style="font-size: 15px;">react.js 生命周期</a> <a href="/tags/transform-转换-变形/" style="font-size: 15px;">transform 转换/变形</a> <a href="/tags/flex/" style="font-size: 15px;">flex</a> <a href="/tags/ESlint之坑/" style="font-size: 15px;">ESlint之坑</a> <a href="/tags/axios-使用于-vue-js-react-js/" style="font-size: 15px;">axios(使用于 vue.js react.js)</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/08/15/[html-css]-css-float 浮动/">css--[盒状模型：display:inline-block + position 属性 + float 属性]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/06/⑧-【JS 工具集-拓展语言】-node.js- 爬虫/">node.js--爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-ES7-async 异步编程进阶/">async 异步编程进阶</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-立即执行函数/">JavaScript【4】--[立即执行函数 IIFE ]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-高质量高效率代码编辑/">[编写高质量 JS 代码 ]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-正则表达式/">JavaScript--正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-递归函数/">JavaScript【2】--[递归函数的深入了解]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/⑧-【JS 工具集-拓展语言】markdown 的技巧/">markdown 的技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/㊿ 其他---谷歌浏览器使用技巧/">谷歌浏览器使用技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/⑬ -数据结构与算法-JS-入门/">JavaScript 数据结构与算法【1】--[入门版]</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://gofoer.com/" title="Gofoer" target="_blank">Gofoer</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p></p><p><span> &nbsp;&nbsp;Copyright &copy;2018&nbsp;<a href="/." rel="nofollow">小米粥.</a></span><span> <a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> </a></span><span> <a rel="nofollow" target="_blank" href="https://hexo.io"> </a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>