<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="小米粥e博客"><meta name="keywords" content="html, css, vue, JavaScript,js,vuex,element-ui,iveiw-ui,axios"><title>wepy-cli 框架 入门学习 | liuxmoo</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">wepy-cli 框架 入门学习</h1><a id="logo" href="/.">liuxmoo</a><p class="description">半路被拎来的前端。(*^▽^*)。学习最快的方法→慢慢来</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">wepy-cli 框架 入门学习</h1><div class="post-meta"><a href="/2018/08/18/⑦ - 【小程序】-wepy 框架/#comments" class="comment-count"></a><p><span class="date">Aug 18, 2018</span><span><a href="/categories/⑦-小程序/" class="category">⑦ 小程序</a><a href="/categories/⑦-小程序/wepy-框架/" class="category">wepy 框架</a></span></p></div><div class="post-content"><h2 id="一、wepy-cli-类-vue-cli-脚手架：组件化开发框架-wepy"><a href="#一、wepy-cli-类-vue-cli-脚手架：组件化开发框架-wepy" class="headerlink" title="一、wepy-cli 类 vue-cli 脚手架：组件化开发框架 wepy"></a>一、wepy-cli 类 vue-cli 脚手架：组件化开发框架 wepy</h2><p>WePY 是一款让小程序支持组件化开发的框架，通过预编译的手段让开发者可以选择自己喜欢的开发风格去开发小程序。框架的细节优化，Promise，Async Functions 的引入都是为了能让开发小程序项目变得更加简单，高效。<br>特性：</p>
<p>类 Vue 开发风格<br>支持自定义组件开发<br>支持引入 NPM 包<br>支持 Promise<br>支持 ES2015+ 特性，如 Async Functions<br>支持多种编译器，Less/Sass/Styus、Babel/Typescript、Pug<br>支持多种插件处理，文件压缩，图片压缩，内容替换等<br>支持 Sourcemap，ESLint 等<br>小程序细节优化，如请求列队，事件优化等</p>
<p><a href="https://github.com/Tencent/wepy" target="_blank" rel="noopener">Github地址:</a><br><a href="https://tencent.github.io/wepy/" target="_blank" rel="noopener">官网首页</a><br><a href="https://tencent.github.io/wepy/document.html#/" target="_blank" rel="noopener">官网使用文档</a></p>
<h2 id="二、wepy-与-vue-的异同"><a href="#二、wepy-与-vue-的异同" class="headerlink" title="二、wepy 与 vue 的异同"></a>二、wepy 与 vue 的异同</h2><p>wepy 和 vue 主要区别<br>1.二者均支持 props、data、computed、components、methods、watch（wepy 中是 watcher）， 但 wepy 中的 methods 仅可用于页面事件绑定，其他自定义方法都要放在外层，而 vue 中所有方法均放在 methods 下</p>
<p>2.wepy 中 props 传递需要加上 .sync 修饰符（类似VUE1.x）才能实现 props 动态更新，并且父组件再 变更传递给子组件 props 后要执行this.$apply() 方法才能更新</p>
<p>3.wepy支持数据双向绑定，子组件在定义props时加上twoway:true属性值即可实现子组件修改父组 件数据</p>
<p>4.VUE2.x推荐使用eventBus方式进行组件通信，而在wepy中是通过broadcast，broadcast，emit，$invoke 三种方法实现通信</p>
<h2 id="二、wepy-cli-的安装-与使用"><a href="#二、wepy-cli-的安装-与使用" class="headerlink" title="二、wepy-cli 的安装 与使用"></a>二、wepy-cli 的安装 与使用</h2><h3 id="2-1-全局安装-wepy-cli"><a href="#2-1-全局安装-wepy-cli" class="headerlink" title="2.1 全局安装 wepy-cli"></a>2.1 全局安装 wepy-cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install wepy-cli -g</span><br></pre></td></tr></table></figure>
<h3 id="2-2-使用-wepy-cli-初始化项目，类似-vue-cli"><a href="#2-2-使用-wepy-cli-初始化项目，类似-vue-cli" class="headerlink" title="2.2 使用 wepy-cli 初始化项目，类似 vue-cli"></a>2.2 使用 wepy-cli 初始化项目，类似 vue-cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wepy init standard myproject (1.7.0之后的版本)初始化项目   ，还可以使用 wepy list 查看项目模板</span><br><span class="line"><span class="built_in">cd</span> myproject                  <span class="comment">#切换至项目目录</span></span><br><span class="line">npm  install                  <span class="comment">#安装依赖</span></span><br><span class="line">wepy build --watch  <span class="comment">#开启实时编译，微信开发者工具 打开 dist 文件夹，注意把 设置改为 false，如下图</span></span><br><span class="line"><span class="comment"># 两种办法， npm run dev 是简写，是 package.json 中设置的(好像没有设置好，用 npm run dev 没有出来哦)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 问题：如果是 yarn 怎么做？</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#完成项目之后打包</span></span><br><span class="line">npm run build <span class="comment">#打包项目</span></span><br></pre></td></tr></table></figure>
<p>project.config.json 项目配置文件，与MINA框架的项目配置文件一样的，只是几个值一定要设置为 false，其实在开发者工具中右边就是项目配置项，一个是可视化的，一个是文件的xnia形式，可视化的是这台电脑的开发者工具的设置。文件是这个项目的设置，走到哪里，这个小程序项目的设置都是不会变的。<br><img src="http://liuxmoo.foryung.com/20180325141533103.png" alt="t"></p>
<h3 id="2-2-1-注意事项"><a href="#2-2-1-注意事项" class="headerlink" title="2.2.1 注意事项"></a>2.2.1 注意事项</h3><p>使用微信开发者工具新建项目，本地开发选择dist目录。</p>
<ul>
<li>微信开发者工具–&gt;项目–&gt;关闭ES6转ES5。重要：漏掉此项会运行报错。</li>
<li>微信开发者工具–&gt;项目–&gt;关闭上传代码时样式自动补全 重要：某些情况下漏掉此项会也会运行报错。</li>
<li>微信开发者工具–&gt;项目–&gt;关闭代码压缩上传 重要：若开启，会导致真机computed, props.sync 等等属性失效。</li>
<li>本地项目根目录运行wepy build –watch，开启实时编译。</li>
</ul>
<h3 id="2-3-安装过程中的问题"><a href="#2-3-安装过程中的问题" class="headerlink" title="2.3 安装过程中的问题"></a>2.3 安装过程中的问题</h3><h4 id="2-3-1-安装过程中版本支持问题解决"><a href="#2-3-1-安装过程中版本支持问题解决" class="headerlink" title="2.3.1 安装过程中版本支持问题解决"></a>2.3.1 安装过程中版本支持问题解决</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">λ cnpm install</span><br><span class="line">√ Installed 23 packages</span><br><span class="line">√ Linked 286 latest versions</span><br><span class="line">√ Run 0 scripts</span><br><span class="line">`deprecate eslint@3.19.0 › file-entry-cache@2.0.0 › flat-cache@1.3.4 › circular-json@^0.3.1 CircularJSON is <span class="keyword">in</span> maintenance only, flatted is its successor.` <span class="comment">#deprecate 弃用 flatted 分层</span></span><br><span class="line">`deprecate wepy-compiler-less@1.3.12 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › cryptiles@2.x.x This version is no longer maintained. Please upgrade to the latest version.` <span class="comment"># 此版本不再维护，请更新最近的版本。</span></span><br><span class="line">`deprecate wepy-compiler-less@1.3.12 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › boom@2.x.x This version is no longer maintained. Please upgrade to the latest version.`</span><br><span class="line">`deprecate wepy-compiler-less@1.3.12 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › hoek@2.x.x This version is no longer maintained. Please upgrade to the latest version.`</span><br><span class="line">Recently updated (since 2018-11-08): 2 packages (detail see file F:\qianduan_dir\00program\wechat-wepy\suduku\node_modules\.recently_updates.t</span><br><span class="line">t)</span><br><span class="line">  Today:</span><br><span class="line">    → eslint@3.19.0 › file-entry-cache@2.0.0 › flat-cache@^1.2.1(1.3.4) (04:42:27)</span><br><span class="line">√ All packages installed (322 packages installed from npm registry, used 17s(network 16s), speed 201.4kB/s, json 309(3.15MB), tarball 85.51kB)</span><br></pre></td></tr></table></figure>
<p>解决：npm install <a href="mailto:wepy-compiler-less@2.0.0" target="_blank" rel="noopener">wepy-compiler-less@2.0.0</a> –save</p>
<h4 id="2-3-2-微信开发者工具打开-dist-文件夹是-后台报错"><a href="#2-3-2-微信开发者工具打开-dist-文件夹是-后台报错" class="headerlink" title="2.3.2 微信开发者工具打开 dist 文件夹是 后台报错"></a>2.3.2 微信开发者工具打开 dist 文件夹是 后台报错</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">VM6906:1 thirdScriptError</span><br><span class="line"> sdk uncaught third Error</span><br><span class="line"> `Cannot <span class="built_in">read</span> property <span class="string">'Promise'</span> of undefined`</span><br><span class="line"> `TypeError: Cannot <span class="built_in">read</span> property <span class="string">'Promise'</span> of undefined` <span class="comment">#Promise   没有定义</span></span><br><span class="line">    at http://127.0.0.1:61988/appservice/npm/wepy-async-function/index.js:14:7</span><br><span class="line">    at require (http://127.0.0.1:61988/appservice/__dev__/WAService.js:23:12444)</span><br><span class="line">    at http://127.0.0.1:61988/appservice/__dev__/WAService.js:23:12051</span><br><span class="line">    at http://127.0.0.1:61988/appservice/app.js:23:1</span><br><span class="line">    at require (http://127.0.0.1:61988/appservice/__dev__/WAService.js:23:12444)</span><br><span class="line">    at &lt;anonymous&gt;:1:1</span><br><span class="line">    at HTMLScriptElement.scriptLoaded (http://127.0.0.1:61988/appservice/appservice?t=15374</span><br></pre></td></tr></table></figure>
<p>这是因为，project.config.json  项目配置文件，与 MINA 框架的项目配置文件一样的，只是几个值一定要设置为 false 。如下是 这个文件的内容</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// project.config.json 文件 内容</span><br><span class="line">//wepy 框架以为版本不同，生成的文件目录可能不同，</span><br><span class="line">//1.7.0 版本之后的版本会生成的这个文件，</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"project description"</span>,</span><br><span class="line">  <span class="attr">"setting"</span>: &#123;</span><br><span class="line">    <span class="attr">"urlCheck"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"es6"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"postcss"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"minified"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"compileType"</span>: <span class="string">"miniprogram"</span>,</span><br><span class="line">  <span class="attr">"appid"</span>: <span class="string">"touristappid"</span>,</span><br><span class="line">  <span class="attr">"projectname"</span>: <span class="string">"Project name"</span>,</span><br><span class="line">  <span class="attr">"miniprogramRoot"</span>: <span class="string">"./dist"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>project.config.json 文件中我们已经用了 false 为什么还会报错呢，是因为在开发者工具中农我们没有设置为 false 。<br>build 之后，用开发者工具打开 dist 文件内容，build 生成的 project.config.json 可能不正确，里面设置的值为 true 了需要注意修正，否则会报错，错误如下。除了在文件修正之外，在开发者工具可视化项目设置中也可以直接把 ES6 转 ES5。<br><img src="http://p1teq0wgy.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180921102512.png" alt="1"></p>
<h2 id="三、WePY-demo-项目的目录结构（含自定义）"><a href="#三、WePY-demo-项目的目录结构（含自定义）" class="headerlink" title="三、WePY demo 项目的目录结构（含自定义）"></a>三、WePY demo 项目的目录结构（含自定义）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">├── dist/             <span class="comment"># （生成）小程序运行代码目录（该目录由 WePY 的 build 指令自动编译生成，请不要直接修改该目录下的文件）</span></span><br><span class="line">├── node_modules/     <span class="comment"># （生成） 安装的依赖包</span></span><br><span class="line">├── src/             <span class="comment">#  （生成）代码编写的目录（该目录为使用 WePY 后的开发目录）</span></span><br><span class="line">|   ├── assets/       <span class="comment"># （创建） 自定义文件夹</span></span><br><span class="line">|   |   ├── images   <span class="comment">#   （创建）自定义存放图片文件夹</span></span><br><span class="line">|   |   ├── svgs     <span class="comment">#   （创建）自定义存放图片文件夹</span></span><br><span class="line">|   |   ├──</span><br><span class="line">|   |   └── styles   <span class="comment">#  （创建/引用文件）引用的 css 或者 less 等文件</span></span><br><span class="line">|   |</span><br><span class="line">|   ├── components    <span class="comment"># （生成） WePY 组件目录（组件不属于完整页面，仅供完整页面或其他组件引用）</span></span><br><span class="line">|   |   ├── com_a.wpy <span class="comment">#  可复用的 WePY 组件 a</span></span><br><span class="line">|   |   └── com_b.wpy <span class="comment"># 可复用的 WePY 组件 b</span></span><br><span class="line">|   |</span><br><span class="line">|   ├── mixins        <span class="comment"># （生成） Mixin 基类，用于复用不同组件中的相同功能。</span></span><br><span class="line">|   |   └── test.js</span><br><span class="line">|   |</span><br><span class="line">|   ├──interceptor    <span class="comment"># （创建）拦截器:可以使用 WePY 提供的全局拦截器对原生 API 的请求进行拦截。</span></span><br><span class="line">|   |   └── index.js</span><br><span class="line">|   |</span><br><span class="line">|   ├── pages         <span class="comment"># （生成）WePY 页面目录（属于完整页面）</span></span><br><span class="line">|   |   ├── index.wpy <span class="comment"># index 页面（build 后，在 dist 目录下的 pages 目录</span></span><br><span class="line">|   |   |              <span class="comment">#生成 index.js、index.json、index.wxml、index.wxss 文件）</span></span><br><span class="line">|   |   └── other.wpy <span class="comment"># other 页面（build 后，在 dist 目录下的 pages 目录）</span></span><br><span class="line">|   |                  <span class="comment"># 生成 other.js、other.json、other.wxml和other.wxss文件</span></span><br><span class="line">|   |</span><br><span class="line">|   ├── store      <span class="comment"># （生成） Redux 状态管理器，类似 vue 的 vuex。对于构建大型应用，对里面共享数据、状态的管理非常方便</span></span><br><span class="line">|   |   ├── actions        <span class="comment">#（生成）</span></span><br><span class="line">|   |   |    └──counter.js <span class="comment">#（生成）</span></span><br><span class="line">|   |   |    └──index.js   <span class="comment">#（生成）</span></span><br><span class="line">|   |   |</span><br><span class="line">|   |   ├── reducers       <span class="comment"># （生成）reducers 文件件存放我们的纯函数，用来更改我们的状态</span></span><br><span class="line">|   |   |    └──counter.js <span class="comment"># （生成）定义函数</span></span><br><span class="line">|   |   |    └──index.js   <span class="comment"># （生成）暴露函数</span></span><br><span class="line">|   |   |</span><br><span class="line">|   |   ├── types           <span class="comment"># （生成）常量定义：用于定义我们要触发的 action 的名称</span></span><br><span class="line">|   |   |    └──counter.js  <span class="comment"># （生成）定义常量</span></span><br><span class="line">|   |   |    └──index.js    <span class="comment"># （生成）暴露常量</span></span><br><span class="line">|   |   |</span><br><span class="line">|   |   └──index.js   <span class="comment"># （生成）入口文件，主要是 初始化 Redux，其中 promiseMiddleware 是一个中间件，方便后面 action 做异步处理</span></span><br><span class="line">|   |</span><br><span class="line">|   ├──utils          <span class="comment"># （创建）自定义文件夹（工具文件夹）</span></span><br><span class="line">|   |   ├──util.js</span><br><span class="line">|   |   └──xxxx.js</span><br><span class="line">|   ├──app.wpy              <span class="comment"># （生成）小程序配置项（全局数据、样式、声明钩子等；build 后。</span></span><br><span class="line">|   |                        <span class="comment"># 在 dist 目录下生成 app.js、app.json 和 app.wxss 文件）</span></span><br><span class="line">|   └── index.template.html <span class="comment"># 为模块配置文件：其中通过 wepy.app 创建入口文件， wepy.page 创建页面文件</span></span><br><span class="line">|                            <span class="comment"># wepy.component 创建组件文件 （.wpy 就是模块文件）</span></span><br><span class="line">├──.editorconfig  <span class="comment">#  编辑器配置文件</span></span><br><span class="line">├──.eslintignore  <span class="comment"># 格式化 ESLint 忽略的文件</span></span><br><span class="line">├──.eslintrc.js   <span class="comment"># 格式化 ESLint 的格式样式</span></span><br><span class="line">├──.gitignore     <span class="comment"># 上传 github 忽略的文件</span></span><br><span class="line">├──.prettierrc    <span class="comment"># js 代码格式要求</span></span><br><span class="line">├──.wepycache     <span class="comment"># wepy 缓存</span></span><br><span class="line">├──.wepyignore    <span class="comment"># 是指有些文件不希望通过 wepy 编译，因此这个文件属于项目的一部分，不能在 git 中排除</span></span><br><span class="line">├── package.json         <span class="comment"># 项目的 package 配置,项目名称，版本，依赖包，类似 vue-cli 的 package.json</span></span><br><span class="line">├── project.config.json  <span class="comment"># 项目配置文件，与 MINA 框架的项目配置文件一样的，只是几个值一定要设置为 false</span></span><br><span class="line">└── wepy.config.js       <span class="comment"># 配置文件</span></span><br><span class="line">-----.npmignore</span><br><span class="line">-----LICENSE</span><br><span class="line">-----package-lock.json</span><br><span class="line">-----README.md</span><br><span class="line">-----yarn.lock</span><br></pre></td></tr></table></figure>
<p><strong>简单来说就是</strong></p>
<ul>
<li>assets 存放一些引入的 CSS JS 文件，以及一些图片（如果有需要的话创建这个文件夹）</li>
<li>①index.template.html: 页面的入口文件</li>
<li>②wepy.config.js: webpack配置文件</li>
<li>③project.config.json: 小程序项目配置文件</li>
<li>④app.wpy: 小程序入口文件</li>
<li>⑤pages: 存放页面（组件）</li>
<li>⑥components: 存放公共（组件）</li>
<li>⑦sotre: redux(如果你创建项目时使用了redux的话)</li>
<li>⑧mixins: 混合组件</li>
<li>⑨interceptor：拦截器</li>
<li>⑩utils：工具包</li>
</ul>
<h3 id="3-1-index-template-html-页面的入口文件"><a href="#3-1-index-template-html-页面的入口文件" class="headerlink" title="3.1 index.template.html: 页面的入口文件"></a>3.1 index.template.html: 页面的入口文件</h3><h3 id="3-2-wepy-config-js-webpack配置文件"><a href="#3-2-wepy-config-js-webpack配置文件" class="headerlink" title="3.2 wepy.config.js: webpack配置文件"></a>3.2 wepy.config.js: webpack配置文件</h3><h3 id="3-3-project-config-json-小程序项目配置文件"><a href="#3-3-project-config-json-小程序项目配置文件" class="headerlink" title="3.3 project.config.json: 小程序项目配置文件"></a>3.3 project.config.json: 小程序项目配置文件</h3><h3 id="3-4-app-wpy-小程序入口文件：小程序入口-app-wpy-对应原生-MINA-框架的-app-json，app-js-，app-wxml，app-wxss"><a href="#3-4-app-wpy-小程序入口文件：小程序入口-app-wpy-对应原生-MINA-框架的-app-json，app-js-，app-wxml，app-wxss" class="headerlink" title="3.4 app.wpy: 小程序入口文件：小程序入口 app.wpy  对应原生 MINA 框架的 app.json，app.js ，app.wxml，app.wxss"></a>3.4 app.wpy: 小程序入口文件：小程序入口 app.wpy  对应原生 MINA 框架的 app.json，app.js ，app.wxml，app.wxss</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">  height: 100%;</span></span><br><span class="line"><span class="undefined">  display: flex;</span></span><br><span class="line"><span class="undefined">  flex-direction: column;</span></span><br><span class="line"><span class="undefined">  align-items: center;</span></span><br><span class="line"><span class="undefined">  justify-content: space-between;</span></span><br><span class="line"><span class="undefined">  box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'wepy-async-function'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; setStore &#125; <span class="keyword">from</span> <span class="string">'wepy-redux'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> configStore <span class="keyword">from</span> <span class="string">'./store'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> store = configStore()</span></span><br><span class="line"><span class="undefined">setStore(store)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">//入口文件 app.wpy 中所声明的小程序实例继承自wepy.app类，</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">app</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">//config 属性对应原生的 app.json 文件</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// build 编译时会根据 config 属性自动生成 app.json 文件，如果需要修改 config 中的内容，请使用微信提供的相关 API。</span></span></span><br><span class="line"><span class="undefined">  config = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//① 页面路径列表</span></span></span><br><span class="line"><span class="undefined">    pages: [</span></span><br><span class="line"><span class="javascript">      <span class="string">'pages/index'</span></span></span><br><span class="line"><span class="undefined">    ],</span></span><br><span class="line"><span class="javascript">    <span class="comment">//② 全局的默认窗口表现</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>: &#123;</span></span><br><span class="line"><span class="javascript">      navigationBarBackgroundColor: <span class="string">'#fff'</span>,<span class="comment">//导航栏背景颜色，如 #000000</span></span></span><br><span class="line"><span class="javascript">      navigationBarTextStyle: <span class="string">'black'</span><span class="comment">//导航栏标题颜色，仅支持 black / white</span></span></span><br><span class="line"><span class="javascript">      navigationBarTitleText: <span class="string">'WeChat'</span>,<span class="comment">//导航栏标题文字内容</span></span></span><br><span class="line"><span class="javascript">      navigationStyle:<span class="string">'default'</span>,<span class="comment">//导航栏样式，仅支持以下值：default 默认样式 ,custom 自定义导航栏，只保留右上角胶囊按钮</span></span></span><br><span class="line"><span class="javascript">      backgroundColor:<span class="string">'#ffffff'</span><span class="comment">//窗口的背景色</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ③ 页面底部栏配置</span></span></span><br><span class="line"><span class="undefined">    tabBar: &#123;</span></span><br><span class="line"><span class="javascript">      color: <span class="string">'#AEADAD'</span>,<span class="comment">//tab 上的文字默认颜色</span></span></span><br><span class="line"><span class="javascript">      selectedColor: <span class="string">'#049BFF'</span>,<span class="comment">//tab 上的文字选中时的颜色</span></span></span><br><span class="line"><span class="javascript">      backgroundColor: <span class="string">'#fff'</span>,<span class="comment">//tab 的背景色</span></span></span><br><span class="line"><span class="javascript">      borderStyle: <span class="string">'black'</span>,<span class="comment">//tabbar上边框的颜色， 仅支持 black / white</span></span></span><br><span class="line"><span class="javascript">      position:<span class="string">'bottom'</span>,<span class="comment">//tabBar的位置，仅支持 bottom / top</span></span></span><br><span class="line"><span class="javascript">      list: [<span class="comment">//最少2个、最多5个 tab</span></span></span><br><span class="line"><span class="undefined">        &#123;</span></span><br><span class="line"><span class="javascript">          pagePath: <span class="string">'pages/index'</span>,</span></span><br><span class="line"><span class="javascript">          text: <span class="string">'游戏'</span>,</span></span><br><span class="line"><span class="javascript">          iconPath: <span class="string">''</span>,</span></span><br><span class="line"><span class="javascript">          selectedIconPath: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        &#123;</span></span><br><span class="line"><span class="javascript">          pagePath: <span class="string">'pages/ranking'</span>,</span></span><br><span class="line"><span class="javascript">          text: <span class="string">'排名'</span>,</span></span><br><span class="line"><span class="javascript">          iconPath: <span class="string">''</span>,</span></span><br><span class="line"><span class="javascript">          selectedIconPath: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      ]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  globalData = &#123;</span></span><br><span class="line"><span class="javascript">    userInfo: <span class="literal">null</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">constructor</span> () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">super</span>()</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.use(<span class="string">'requestfix'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  onLaunch() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.testAsync()</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  sleep (s) &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        resolve(<span class="string">'promise resolved'</span>)</span></span><br><span class="line"><span class="undefined">      &#125;, s * 1000)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">async</span> testAsync () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="keyword">this</span>.sleep(<span class="number">3</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(data)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  getUserInfo(cb) &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> that = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (<span class="keyword">this</span>.globalData.userInfo) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.globalData.userInfo</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    wepy.getUserInfo(&#123;</span></span><br><span class="line"><span class="undefined">      success (res) &#123;</span></span><br><span class="line"><span class="undefined">        that.globalData.userInfo = res.userInfo</span></span><br><span class="line"><span class="undefined">        cb &amp;&amp; cb(res.userInfo)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-pages-存放页面（组件）-小程序入口-pages-wpy-对应原生-MINA-框架的-pages-json，pages-js-，pages-wxml，pages-wxss"><a href="#3-5-pages-存放页面（组件）-小程序入口-pages-wpy-对应原生-MINA-框架的-pages-json，pages-js-，pages-wxml，pages-wxss" class="headerlink" title="3.5 pages: 存放页面（组件） 小程序入口 pages.wpy  对应原生 MINA 框架的 pages.json，pages.js ，pages.wxml，pages.wxss"></a>3.5 pages: 存放页面（组件） 小程序入口 pages.wpy  对应原生 MINA 框架的 pages.json，pages.js ，pages.wxml，pages.wxss</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="comment">/* less */</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'wepy-redux'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Panel <span class="keyword">from</span> <span class="string">'@/components/panel'</span> <span class="comment">// alias example</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">'counter'</span> <span class="comment">// alias example</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> List <span class="keyword">from</span> <span class="string">'../components/list'</span> <span class="comment">// aliasFields example</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> moduleA <span class="keyword">from</span> <span class="string">'module-a'</span> <span class="comment">// aliasFields ignore module example</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Group <span class="keyword">from</span> <span class="string">'../components/group'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Toast <span class="keyword">from</span> <span class="string">'wepy-com-toast'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> testMixin <span class="keyword">from</span> <span class="string">'../mixins/test'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(<span class="string">'moduleA ignored: '</span>, moduleA) <span class="comment">// =&gt; moduleA ignored: &#123;&#125;</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  @connect(&#123;</span></span><br><span class="line"><span class="undefined">    num (state) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.num</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    asyncNum (state) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.asyncNum</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    sumNum (state) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.num + state.counter.asyncNum</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//页面配置对象，对应于原生的 page.json 文件，类似于 app.wpy 中的 config, 页面设置支持支 window 设置</span></span></span><br><span class="line"><span class="undefined">    config = &#123;</span></span><br><span class="line"><span class="javascript">      navigationBarBackgroundColor: <span class="string">'#fff'</span>, <span class="comment">//导航栏背景颜色，如 #000000</span></span></span><br><span class="line"><span class="javascript">      navigationBarTitleText: <span class="string">'WeChat'</span>,<span class="comment">//导航栏标题文字内容</span></span></span><br><span class="line"><span class="javascript">      navigationBarTextStyle: <span class="string">'black'</span>,<span class="comment">//导航栏标题颜色，仅支持 black / white</span></span></span><br><span class="line"><span class="javascript">      backgroundColor:<span class="string">'#ffffff'</span>,<span class="comment">//窗口的背景色</span></span></span><br><span class="line"><span class="javascript">      backgroundTextStyle: <span class="string">'light'</span>,<span class="comment">//下拉 loading 的样式，仅支持 dark / light</span></span></span><br><span class="line"><span class="javascript">      enablePullDownRefresh:<span class="literal">false</span>,<span class="comment">//是否全局开启下拉刷新。详见 Page.onPullDownRefresh</span></span></span><br><span class="line"><span class="javascript">      onReachBottomDistance:<span class="number">50</span>,<span class="comment">//页面上拉触底事件触发时距页面底部距离，单位为px。详见 Page.onReachBottom</span></span></span><br><span class="line"><span class="javascript">      disableScroll:<span class="literal">false</span><span class="comment">//设置为 true 则页面整体不能上下滚动；</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//disableScroll 这项 只在页面配置中有效，无法在 app.json 中设置该项!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 页面组件列表对象，声明页面所引入的组件列表</span></span></span><br><span class="line"><span class="undefined">    components = &#123;</span></span><br><span class="line"><span class="undefined">      panel: Panel,</span></span><br><span class="line"><span class="undefined">      counter1: Counter,</span></span><br><span class="line"><span class="javascript">      counter2: Counter,<span class="comment">//这个与上面引入的是一样的组件，但是用到不一样的地方显示？问题是一个变了另外一个会不会变啊？</span></span></span><br><span class="line"><span class="undefined">      list: List,</span></span><br><span class="line"><span class="undefined">      group: Group,</span></span><br><span class="line"><span class="undefined">      toast: Toast</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    mixins = [testMixin]</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 页面渲染数据对象，存放可用于页面模板绑定的渲染数据</span></span></span><br><span class="line"><span class="undefined">    data = &#123;</span></span><br><span class="line"><span class="undefined">      mynum: 20,</span></span><br><span class="line"><span class="undefined">      userInfo: &#123;</span></span><br><span class="line"><span class="javascript">        nickName: <span class="string">'加载中...'</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="javascript">      normalTitle: <span class="string">'原始标题'</span>,</span></span><br><span class="line"><span class="javascript">      setTimeoutTitle: <span class="string">'标题三秒后会被修改'</span>,</span></span><br><span class="line"><span class="undefined">      count: 0,</span></span><br><span class="line"><span class="javascript">      netrst: <span class="string">''</span>,</span></span><br><span class="line"><span class="javascript">      groupList: [...<span class="string">`已略`</span>...]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    computed = &#123;</span></span><br><span class="line"><span class="undefined">      now () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> +<span class="keyword">new</span> <span class="built_in">Date</span>()</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//wxml 事件处理函数对象，存放响应 wxml 中所捕获到的事件的函数，如 bindtap 、 bindchange</span></span></span><br><span class="line"><span class="undefined">    methods = &#123;</span></span><br><span class="line"><span class="undefined">      plus () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.mynum++</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      toast () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> promise = <span class="keyword">this</span>.$invoke(<span class="string">'toast'</span>, <span class="string">'show'</span>, &#123;</span></span><br><span class="line"><span class="javascript">          title: <span class="string">'自定义标题'</span>,</span></span><br><span class="line"><span class="javascript">          img: <span class="string">'https://raw.githubusercontent.com/kiinlam/wetoast/master/images/star.png'</span></span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        promise.then(<span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">'toast done'</span>)</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      tap () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'do noting from '</span> + <span class="keyword">this</span>.$name)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      communicate () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$name + <span class="string">' tap'</span>)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$invoke(<span class="string">'counter2'</span>, <span class="string">'minus'</span>, <span class="number">45</span>, <span class="number">6</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$invoke(<span class="string">'counter1'</span>, <span class="string">'plus'</span>, <span class="number">45</span>, <span class="number">6</span>)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$broadcast(<span class="string">'index-broadcast'</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      request () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> self = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> i = <span class="number">10</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> map = [<span class="string">'MA=='</span>, <span class="string">'MQo='</span>, <span class="string">'Mg=='</span>, <span class="string">'Mw=='</span>, <span class="string">'NA=='</span>, <span class="string">'NQ=='</span>, <span class="string">'Ng=='</span>, <span class="string">'Nw=='</span>, <span class="string">'OA=='</span>, <span class="string">'OQ=='</span>]</span></span><br><span class="line"><span class="javascript">        <span class="keyword">while</span> (i--) &#123;</span></span><br><span class="line"><span class="undefined">          wepy.request(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">'https://www.madcoder.cn/tests/sleep.php?time=1&amp;t=css&amp;c='</span> + map[i] + <span class="string">'&amp;i='</span> + i,</span></span><br><span class="line"><span class="javascript">            success: <span class="function"><span class="keyword">function</span> (<span class="params">d</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              self.netrst += d.data + <span class="string">'.'</span></span></span><br><span class="line"><span class="undefined">              self.$apply()</span></span><br><span class="line"><span class="javascript">                <span class="comment">// wepy 中 props 传递需要加上 .sync 修饰符（类似VUE1.x）才能实现 props 动态更新，</span></span></span><br><span class="line"><span class="javascript">              <span class="comment">// 并且父组件再 变更传递给子组件 props 后要执行this.$apply() 方法才能更新</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      counterEmit (...args) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> $event = args[args.length - <span class="number">1</span>]</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$name&#125;</span> receive <span class="subst">$&#123;$event.name&#125;</span> from <span class="subst">$&#123;$event.source.$name&#125;</span>`</span>)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// WePY 组件事件处理函数对象，存放响应组件之间通过 $broadcast、$emit、$invoke 所传递的事件的函数</span></span></span><br><span class="line"><span class="undefined">    events = &#123;</span></span><br><span class="line"><span class="javascript">      <span class="string">'index-emit'</span>: <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> $event = args[args.length - <span class="number">1</span>]</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$name&#125;</span> receive <span class="subst">$&#123;$event.name&#125;</span> from <span class="subst">$&#123;$event.source.$name&#125;</span>`</span>)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    onLoad() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> self = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$parent.getUserInfo(<span class="function"><span class="keyword">function</span> (<span class="params">userInfo</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (userInfo) &#123;</span></span><br><span class="line"><span class="undefined">          self.userInfo = userInfo</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        self.normalTitle = <span class="string">'标题已被修改'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        self.setTimeoutTitle = <span class="string">'标题三秒后会被修改'</span></span></span><br><span class="line"><span class="javascript">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          self.setTimeoutTitle = <span class="string">'到三秒了'</span></span></span><br><span class="line"><span class="undefined">          self.$apply()</span></span><br><span class="line"><span class="undefined">        &#125;, 3000)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        self.$apply()</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-6-components-存放公共（组件）-小程序入口-common-wpy-对应原生-MINA-框架的-pages-js-，pages-wxml，pages-wxss"><a href="#3-6-components-存放公共（组件）-小程序入口-common-wpy-对应原生-MINA-框架的-pages-js-，pages-wxml，pages-wxss" class="headerlink" title="3.6 components: 存放公共（组件） 小程序入口 common.wpy  对应原生 MINA 框架的 pages.js ，pages.wxml，pages.wxss"></a>3.6 components: 存放公共（组件） 小程序入口 common.wpy  对应原生 MINA 框架的 pages.js ，pages.wxml，pages.wxss</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── components    <span class="comment"># （生成） WePY 组件目录（组件不属于完整页面，仅供完整页面或其他组件引用）</span></span><br><span class="line">|   |   ├── com_a.wpy <span class="comment">#  可复用的 WePY 组件 a</span></span><br><span class="line">|   |   └── com_b.wpy <span class="comment"># 可复用的 WePY 组件 b</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.counter</span> &#123;</span></span><br><span class="line"><span class="undefined">    text-align: left;</span></span><br><span class="line"><span class="undefined">    font-size: 12px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.count</span> &#123;</span></span><br><span class="line"><span class="undefined">    font-size: 18px;</span></span><br><span class="line"><span class="undefined">    font-weight: bold;</span></span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.red</span> &#123;</span></span><br><span class="line"><span class="undefined">      color: red;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.green</span> &#123;</span></span><br><span class="line"><span class="undefined">      color: green;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"counter &#123;&#123;style&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"plus"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>  +  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"minus"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>  -  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"incNum"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>  INCREMENT  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"decNum"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>  DECREMENT  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"asyncInc"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>  ASYNC INCREMENT  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span> &#123;&#123;num&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span> &#123;&#123;stateNum&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span> &#123;&#123;asyncNum&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// 组件文件 com.wpy 中所声明的组件实例继承自 wepy.component 类</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// 不需要 config 配置以及页面特有的一些生命周期函数</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// 属性与页面属性大致相同。</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'wepy-redux'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; INCREMENT, DECREMENT &#125; <span class="keyword">from</span> <span class="string">'../store/types/counter'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; asyncInc &#125; <span class="keyword">from</span> <span class="string">'../store/actions'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  @connect(&#123;</span></span><br><span class="line"><span class="undefined">    stateNum (state) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.num</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    asyncNum (state) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.asyncNum</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;, &#123;</span></span><br><span class="line"><span class="undefined">    incNum: INCREMENT,</span></span><br><span class="line"><span class="undefined">    decNum: DECREMENT,</span></span><br><span class="line"><span class="undefined">    asyncInc</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">    props = &#123;</span></span><br><span class="line"><span class="undefined">      num: &#123;</span></span><br><span class="line"><span class="javascript">        type: [<span class="built_in">Number</span>, <span class="built_in">String</span>],</span></span><br><span class="line"><span class="javascript">        coerce: <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> +v</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="number">50</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    data = &#123;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    events = &#123;</span></span><br><span class="line"><span class="javascript">      <span class="string">'index-broadcast'</span>: <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> $event = args[args.length - <span class="number">1</span>]</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$name&#125;</span> receive <span class="subst">$&#123;$event.name&#125;</span> from <span class="subst">$&#123;$event.source.$name&#125;</span>`</span>)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    watch = &#123;</span></span><br><span class="line"><span class="undefined">      num (curVal, oldVal) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">`旧值：<span class="subst">$&#123;oldVal&#125;</span>，新值：<span class="subst">$&#123;curVal&#125;</span>`</span>)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    methods = &#123;</span></span><br><span class="line"><span class="undefined">      plus () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.num = <span class="keyword">this</span>.num + <span class="number">1</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$name + <span class="string">' plus tap'</span>)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$emit(<span class="string">'index-emit'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      minus () &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.num = <span class="keyword">this</span>.num - <span class="number">1</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$name + <span class="string">' minus tap'</span>)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-7-sotre-redux-如果你创建项目时使用了redux的话-Redux-状态管理器-使用，类似-vue-的-vuex"><a href="#3-7-sotre-redux-如果你创建项目时使用了redux的话-Redux-状态管理器-使用，类似-vue-的-vuex" class="headerlink" title="3.7 sotre: redux(如果你创建项目时使用了redux的话) Redux 状态管理器 使用，类似 vue 的 vuex"></a>3.7 sotre: redux(如果你创建项目时使用了redux的话) Redux 状态管理器 使用，类似 vue 的 vuex</h3><p><a href="https://juejin.im/post/5b067f6ff265da0de02f3887" target="_blank" rel="noopener">学习网址</a><br><a href="https://www.jianshu.com/p/94d8f8a36ab0" target="_blank" rel="noopener">学习网址</a></p>
<h4 id="3-7-1-src-store-index-js-文件-store-的入口文件"><a href="#3-7-1-src-store-index-js-文件-store-的入口文件" class="headerlink" title="3.7.1 src/store/index.js 文件 :store 的入口文件"></a>3.7.1 src/store/index.js 文件 :store 的入口文件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore , applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> promiseMiddleware <span class="keyword">from</span> <span class="string">'redux-promise'</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducers'</span></span><br><span class="line"><span class="keyword">const</span> Store = createStore(</span><br><span class="line">  reducer ,</span><br><span class="line">  applyMiddleware(promiseMiddleware)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> configStore =&gt; Store</span><br></pre></td></tr></table></figure>
<p>入口文件 index.js ，里面主要是 初始化 Redux ， 其中 promiseMiddleware 是一个中间件，方便后面 action 做异步处理~ reducers 是一个纯函数，用于接受 Action 和当前 State 作为参数，返回一个新的 State。</p>
<h4 id="3-7-2-src-store-types-文件夹-常量定义"><a href="#3-7-2-src-store-types-文件夹-常量定义" class="headerlink" title="3.7.2 src/store/types 文件夹 常量定义"></a>3.7.2 src/store/types 文件夹 常量定义</h4><p>用于定义我们要触发的 action 的名称，这里我定义了 counter 和 list 两个 types ，内容分别如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/types/index.js 这里是 types 文件夹的入口文件 index.js，用于暴露 counter 和 list 两个 types</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./counter'</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./list'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/types/counter.js 这里是 wepy-cli 框架自带的。</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> INCREMENT = <span class="string">'INCREMENT'</span> <span class="comment">//递增</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DECREMENT = <span class="string">'DECREMENT'</span> <span class="comment">//递减</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ASYNC_INCREMENT = <span class="string">'ASYNC_INCREMENT'</span> <span class="comment">//异步递增</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/types/list.js 这个里是自己定义的</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD = <span class="string">'ADD'</span> <span class="comment">//加</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> REMOVE = <span class="string">'REMOVE'</span><span class="comment">//移除</span></span><br></pre></td></tr></table></figure>
<h4 id="3-7-3-src-store-reducers文件夹-函数定义"><a href="#3-7-3-src-store-reducers文件夹-函数定义" class="headerlink" title="3.7.3  src/store/reducers文件夹 函数定义"></a>3.7.3  src/store/reducers文件夹 函数定义</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/reducers/index.js    reducersd 入口文件</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> counter <span class="keyword">from</span> <span class="string">'./counter'</span></span><br><span class="line"><span class="keyword">import</span> list <span class="keyword">from</span> <span class="string">'./list'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">  counter ,<span class="comment">//wepy框架预定义的</span></span><br><span class="line">  list     <span class="comment">//自定义的</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//首先将 counter 和 list 的分别引入进来，通过 redux 定义的 combineReducers 函数，</span></span><br><span class="line"><span class="comment">//将所有的 reducers 合并成一个整体，方便我们后面对其进行管理</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/reducers/counter.js</span></span><br><span class="line"><span class="comment">/* 首先引入了 handleActions 方法用来创建 actions ， 它将多个相关的 reducer 写在一起也是 ，</span></span><br><span class="line"><span class="comment">方面后期维护，也方便后期通过 dispatch 来调用他们更改 state 里面的状态，</span></span><br><span class="line"><span class="comment">它主要接收两个参数，第一个参数时候个大对象，里面存放多个 reducer ，</span></span><br><span class="line"><span class="comment">第二个参数是初始化的时候 state 的状态值，因此，我们一开始就定义了 defaultState ; */</span></span><br><span class="line"><span class="keyword">import</span> &#123; handleActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span></span><br><span class="line"><span class="keyword">import</span> &#123; INCREMENT , DECREMENT , ASYNC_INCREMENT &#125; <span class="keyword">from</span> <span class="string">'../types/counter'</span></span><br><span class="line"><span class="keyword">const</span> defaultState  = &#123;</span><br><span class="line">  num: <span class="number">0</span> ,</span><br><span class="line">  asyncNum: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> handleActions(&#123;</span><br><span class="line"><span class="comment">//分别定义了 INCREMENT、 DECREMENT 和 ASYNC_INCREMENT 三个 reducer ，</span></span><br><span class="line"><span class="comment">//前两个比较简单，分别是对 state 里面的 num 值进行 加减操作 ，</span></span><br><span class="line"><span class="comment">// 最后一个是通过 action.payload 的值来对 asyncNum 的值进行异步操作</span></span><br><span class="line">  [INCREMENT](state)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      ...state,</span><br><span class="line">      num : state.num + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  [DECREMENT](state)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      ...state,</span><br><span class="line">      num : state.num - <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  [ASYNC_INCREMENT](state, action)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...state ,</span><br><span class="line">      asyncNum : state.asyncNum + action.payload</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,defaultState)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/reducers/list.js  这里是自定义的，类似 count.js 来编辑</span></span><br><span class="line"><span class="keyword">import</span> &#123; handleActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ADD , REMOVE &#125; <span class="keyword">from</span> <span class="string">'../types/list'</span></span><br><span class="line"><span class="keyword">const</span> defaultState = [</span><br><span class="line">  &#123;</span><br><span class="line">    title : <span class="string">'吃饭'</span> ,</span><br><span class="line">    text : <span class="string">'今天我要吃火锅'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title : <span class="string">'工作'</span> ,</span><br><span class="line">    text : <span class="string">'今天我要学习 Redux'</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> handleActions(&#123;</span><br><span class="line">  [ADD]( state , action )&#123;</span><br><span class="line">    state.push(action.payload)</span><br><span class="line">    <span class="keyword">return</span> [...state]</span><br><span class="line">  &#125;,</span><br><span class="line">  [REMOVE]( state , action )&#123;</span><br><span class="line">    state.splice( action.payload , <span class="number">1</span> );</span><br><span class="line">    <span class="keyword">return</span> [ ...state ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,defaultState)</span><br></pre></td></tr></table></figure>
<h4 id="3-7-4-src-store-actions-文件夹"><a href="#3-7-4-src-store-actions-文件夹" class="headerlink" title="3.7.4 src/store/actions 文件夹"></a>3.7.4 src/store/actions 文件夹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/actions/index.js 入口文件 index.js 将所需的 action 导出</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./counter'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/actions/counter.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ASYNC_INCREMENT &#125; <span class="keyword">from</span> <span class="string">'../types/counter'</span></span><br><span class="line"><span class="keyword">import</span> &#123; createAction &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> asyncInc = createAction(ASYNC_INCREMENT,()=&gt;&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      resolve(<span class="number">1</span>)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//这里跟 reducer 里面的要区分，这里是可以对数据进行一系列处理的，我们通过 createAction 创建一个 action ,</span></span><br><span class="line"><span class="comment">//该方法主要有两个参数，第一个参数 type 表示 action 的类型，</span></span><br><span class="line"><span class="comment">//第二个参数 payloadCreator 是一个 function，处理并返回需要的 payload ；</span></span><br><span class="line"><span class="comment">//如果空缺，会使用默认方法。这里我们是延迟 1s 后返回一个 1；</span></span><br></pre></td></tr></table></figure>
<h4 id="3-7-5-在-pages-wepy-中使用-store"><a href="#3-7-5-在-pages-wepy-中使用-store" class="headerlink" title="3.7.5 在 pages.wepy 中使用 store"></a>3.7.5 在 pages.wepy 中使用 store</h4><p>例如我们创建一个 index.wpy 的文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">lang</span>=<span class="string">"wxml"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">text</span>&gt;</span>同步&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">text</span>&gt;</span>异步&#123;&#123; asyncNum &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"increment"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>加一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"decrement"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>减一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"asyncIncrement"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>异步加一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">tap</span>=<span class="string">"addList"</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123; todoList &#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>&#123;&#123; item.text &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">class</span>=<span class="string">"delete"</span> @<span class="attr">tap</span>=<span class="string">"delete(&#123;&#123;index&#125;&#125;)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'wepy-redux'</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//从 wepy-redux 中 引入的 connect ，这个 connect 很关键，它是连接 组件 和 状态 的桥梁，</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//主要用法是 @connect(states, actions)</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//states: 访问 state 上的值，可以是数组或者对象，如果是对象的话，则包含的是 K-V 对，V 可以是函数还可以是字符串，</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//如果是字符串的话则默认获取 state[V]， 否则的话则是使用返回值；</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//而对于如果是数组的话（数组中的项只能为字符串），则认为是相同的 K-V 对象结构。</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//states 最终会附加到组件的 computed 属性值上。</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//actions: 只能传入对象，对象的 K-V 结构，如果 V 是字符串的话，则直接会 distatch,如下结构</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// args 就是调用传入参数</span></span></span><br><span class="line"><span class="undefined"> /* &#123;</span></span><br><span class="line"><span class="javascript">      type: val,<span class="comment">// 修正一般情况下的参数 一般支持只传一个参数</span></span></span><br><span class="line"><span class="javascript">      payload: args.length &gt; <span class="number">1</span> ? args : args[<span class="number">0</span>] <span class="comment">// 如果真的是多个参数的话 那么 payload 就是参数组成的数组</span></span></span><br><span class="line"><span class="undefined">    &#125; */</span></span><br><span class="line"><span class="javascript"> <span class="comment">//如果是一个函数 fn，则会 dispatch(val.apply(store, args))，否则的话则直接 dispatch(V)</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; INCREMENT , DECREMENT &#125; <span class="keyword">from</span> <span class="string">'../store/types/counter'</span> <span class="comment">//从 types/counter 导出所需的 action</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; asyncInc &#125; <span class="keyword">from</span> <span class="string">'../store/actions'</span><span class="comment">//从actions 导出所需的 action</span></span></span><br><span class="line"><span class="undefined">  @connect(&#123;</span></span><br><span class="line"><span class="undefined">    num(state)&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.num;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    asyncNum(state)&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> state.counter.asyncNum;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,&#123;</span></span><br><span class="line"><span class="undefined">    increment : INCREMENT ,</span></span><br><span class="line"><span class="undefined">    decrement : DECREMENT ,</span></span><br><span class="line"><span class="undefined">    asyncIncrement : asyncInc</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  components = &#123;&#125;</span></span><br><span class="line"><span class="undefined">  computed = &#123;</span></span><br><span class="line"><span class="undefined">    todoList()&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> wepy.$store.getState().list;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">    methods = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">delete</span>(index)&#123;</span></span><br><span class="line"><span class="javascript">      wepy.$store.dispatch(&#123; <span class="attr">type</span> : <span class="string">'REMOVE'</span> , <span class="attr">payload</span> : index &#125;)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">    addList()&#123;</span></span><br><span class="line"><span class="javascript">      wepy.$store.dispatch(&#123; <span class="attr">type</span> : <span class="string">'ADD'</span> , <span class="attr">payload</span> : &#123;</span></span><br><span class="line"><span class="javascript">        title : <span class="string">'学习'</span> ,</span></span><br><span class="line"><span class="javascript">                text : <span class="string">'好好学习'</span></span></span><br><span class="line"><span class="undefined">            &#125;&#125;)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  onLoad () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(wepy.$store.getState())</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    text&#123;</span></span><br><span class="line"><span class="undefined">        display: block;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="undefined">        margin: 10px auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    button&#123;</span></span><br><span class="line"><span class="undefined">        width: 90%;</span></span><br><span class="line"><span class="undefined">        display: block;</span></span><br><span class="line"><span class="undefined">        margin: 10px auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="undefined">        display: flex;</span></span><br><span class="line"><span class="undefined">        align-items: center;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="undefined">        padding: 0 15px;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.title</span>&#123;</span></span><br><span class="line"><span class="undefined">            font-size: 14px;</span></span><br><span class="line"><span class="undefined">            line-height: 20px;</span></span><br><span class="line"><span class="undefined">            margin: 10px auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span>&#123;</span></span><br><span class="line"><span class="undefined">            font-size: 15px;</span></span><br><span class="line"><span class="undefined">            flex: 1;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.delete</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 70px;</span></span><br><span class="line"><span class="undefined">            height: 40px;</span></span><br><span class="line"><span class="undefined">            line-height: 40px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>WePY 借鉴了 Vue.js（后文简称 Vue ）的语法风格和功能特性，如果你之前从未接触过 Vue，建议先阅读 Vue 的官方文档，以熟悉相关概念，否则在阅读 WePY 文档以及使用 WePY 进行开发的过程中，将会遇到比较多的障碍。</li>
<li>开发建议 <strong>使用第三方成熟IDE或编辑器</strong>(具体请参看后文的代码高亮部分)，<strong>微信开发者工具仅用于实时预览和调试</strong>。使用微信开发者工具–&gt;添加项目，项目目录请选择项目根目录即可根据配置完成项目信息自动配置。</li>
<li>如果 project.config.json 不存在，建议手动创建该文件后再添加项目。 project.config.json 文件内容如下：<br>  {<pre><code>&quot;description&quot;: &quot;project description&quot;,
&quot;setting&quot;: {
  &quot;urlCheck&quot;: true,    对应不检查安全域名选项，开启。 如果已配置好安全域名则建议关闭。
  &quot;es6&quot;: false,        对应关闭 ES6 转 ES5 选项，**关闭。 重要：未关闭会运行报错。**
  &quot;postcss&quot;: false,    对应关闭上传代码时样式自动补全选项，**关闭。 重要：某些情况下漏掉此项也会运行报**错。
  &quot;minified&quot;: false    对应关闭代码压缩上传选项，**关闭。重要：开启后，会导致真机computed, props.sync 等等属性失效。**
},
&quot;compileType&quot;: &quot;miniprogram&quot;,
&quot;appid&quot;: &quot;touristappid&quot;,
&quot;projectname&quot;: &quot;Project name&quot;,
&quot;miniprogramRoot&quot;: &quot;./dist&quot;
</code></pre>  }</li>
</ul>
<p>注：压缩功能可使用 WePY 提供的 build 指令代替，详见后文相关介绍以及 Demo 项目根目录中的 wepy.config.js 和 package.json 文件。</p>
<h3 id="3-8-mixins-混合组件-方法-js-文件"><a href="#3-8-mixins-混合组件-方法-js-文件" class="headerlink" title="3.8 mixins: 混合组件 方法 js 文件"></a>3.8 mixins: 混合组件 方法 js 文件</h3><p>mixins 是放混合组件的方法的地方，比如很多 page 中都要用到 wx.showToast 方法。那么我们可以在 mixins 文件夹里面创建一个 toast.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//toast.js</span></span><br><span class="line"><span class="comment">// mixins 是 js 文件不是 wpy 文件（当然我们需要看得懂 wepy 源码，拷源码过来自己会加功能是极好的）</span></span><br><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">testMixin</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">mixin</span> </span>&#123;</span><br><span class="line">  onLoad () &#123;  <span class="comment">// onLoad生命周期钩子函数</span></span><br><span class="line">    <span class="keyword">this</span>.showToast()</span><br><span class="line">  &#125;</span><br><span class="line">  noMore () &#123;  <span class="comment">// 普通方法直接定义到 class 的静态方法</span></span><br><span class="line">    wepy.showToast(&#123;        <span class="comment">// wepy.showToast 等同于 wx.showToast</span></span><br><span class="line">      title: <span class="string">'没有更多了...'</span>,</span><br><span class="line">      icon: <span class="string">'none'</span>,</span><br><span class="line">      duration: <span class="number">1500</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  showToast () &#123;</span><br><span class="line">    wepy.showToast(&#123;</span><br><span class="line">      title: <span class="string">'拼命加载中...'</span>,</span><br><span class="line">      icon: <span class="string">'loading'</span>,</span><br><span class="line">      duration: <span class="number">3000</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  hideToast () &#123;</span><br><span class="line">    wepy.hideToast()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//其中 wepy 继承了 wx 对象的方法，建议在 wepy 框架开发中不要用到 wx 对象的方法，</span></span><br><span class="line"><span class="comment">//虽然运行时效果是一样，但是打包时会 cli 报错（wepy 中没有 wx 对象）。</span></span><br></pre></td></tr></table></figure>
<p>mixins 的方法定义好后，就可以在组件中使用 mixin 了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.wpy  page.wpy--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> toast <span class="keyword">from</span> <span class="string">'mixins/toast'</span> <span class="comment">// 导入 mixins 组件</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">    onLoad () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.showToast() <span class="comment">// 导入和注册后，就可直接使用</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.getMovies()</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    mixins = [  <span class="comment">// 注册混合组件，注意 mixins 是一个数组</span></span></span><br><span class="line"><span class="undefined">      toast</span></span><br><span class="line"><span class="undefined">    ]</span></span><br><span class="line"><span class="undefined">    ......</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>首先在引入和注册后，然后就可以直接调用 this.showToast() 注意在 wepy 中组件中使用的是 class ,而不是 vue 中使用的 Object。</p>
<h3 id="3-9-interceptor：拦截器"><a href="#3-9-interceptor：拦截器" class="headerlink" title="3.9 interceptor：拦截器"></a>3.9 interceptor：拦截器</h3><p>拦截器,可以使用全域拦截器配置API的config、fail、success、complete方法，参考示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">app</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">        <span class="keyword">this</span>.intercept(<span class="string">'request'</span>, &#123;</span><br><span class="line">            config (p) &#123;</span><br><span class="line">                p.timestamp = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;,</span><br><span class="line">            success (p) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'request success'</span>);</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;,</span><br><span class="line">            fail (p) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'request error'</span>);</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-10-utils：工具包"><a href="#3-10-utils：工具包" class="headerlink" title="3.10 utils：工具包"></a>3.10 utils：工具包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formatTime = <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> h = <span class="built_in">Math</span>.floor(time / <span class="number">3600</span>)</span><br><span class="line">  h = (h &lt; <span class="number">10</span>) ? <span class="string">'0'</span> + h : h</span><br><span class="line">  <span class="keyword">let</span> m = <span class="built_in">Math</span>.floor(time % <span class="number">3600</span> / <span class="number">60</span>)</span><br><span class="line">  m = (m &lt; <span class="number">10</span>) ? <span class="string">'0'</span> + m : m</span><br><span class="line">  <span class="keyword">let</span> s = time % <span class="number">3600</span> % <span class="number">60</span></span><br><span class="line">  s = (s &lt; <span class="number">10</span>) ? <span class="string">'0'</span> + s : s</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;h&#125;</span>:<span class="subst">$&#123;m&#125;</span>:<span class="subst">$&#123;s&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 可以将一些公共的代码抽离成为一个单独的 js (utils.js)文件，作为一个模块;模块只有通过 module.exports 或者 exports 才能对外暴露接口。所以当你在util.js里封装的方法想要在外部使用的话,必须通过 module.exports 或者 exports 对外暴露</span></span><br><span class="line"><span class="comment">需要注意的是，这个文件名是指定的，只能是 utils 文件夹下的 util.js 文件，改变了就会出错的。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">问题是这个文件夹是只能有一个工具文件么？？？*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  formatTime: formatTime<span class="comment">//'对外方法名':'本地方法名'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用 util.js 中的函数</span></span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">'../utils/util'</span>;<span class="comment">// ES6 写法</span></span><br><span class="line"><span class="comment">//var util= require('../utils/util.js') // ES5 写法</span></span><br><span class="line">util.formatTime(params))</span><br></pre></td></tr></table></figure>
<p>问题：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Missing files: ../utils/utils.js <span class="keyword">in</span> F:\pages.wpy <span class="comment">#出现这个问题就是不正确的命名了，不要去修改工具包的名字</span></span><br><span class="line"><span class="comment"># 只能是 ../utils/util.js</span></span><br></pre></td></tr></table></figure>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><p>wepy 使用脏数据检查对 setData 进行封装，在函数运行周期结束时执行脏数据检查，一来可以不用关心页面多次 setData 是否会有性能上的问题，二来可以更加简洁去修改数据实现绑定，不用重复去写 setData 方法。代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.title = <span class="string">'this is title'</span>;<span class="comment">// 可以直接赋值</span></span><br></pre></td></tr></table></figure>
<p>在异步函数中更新数据的时候，必须手动调用 $apply 方法，才会触发脏数据检查流程的运行。如：<br>之前说的作为回调呢？<br>子组件的 onload 里面也需要 this.$apply() 吧，还有其他的情况么？？<br>网址：<a href="https://tencent.github.io/wepy/document.html#/?id=props-%E4%BC%A0%E5%80%BC" target="_blank" rel="noopener">wepy props传值有说道</a><br>网址：<a href="https://github.com/Tencent/wepy/issues/1556" target="_blank" rel="noopener">gitHub issue 也有说道</a></p>
<p>但需注意，在函数运行周期之外的函数里去修改数据需要手动调用 $apply<br>方法。如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.title = <span class="string">'this is title'</span>;</span><br><span class="line">    <span class="keyword">this</span>.$apply();</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>
<h2 id="四、wepy-完整的属性-方法-配置"><a href="#四、wepy-完整的属性-方法-配置" class="headerlink" title="四、wepy 完整的属性/方法/配置 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!]"></a>四、wepy 完整的属性/方法/配置 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!]</h2><h3 id="4-1-app-wpy-的-config-选项-属性-data，生命周期，配置，等等"><a href="#4-1-app-wpy-的-config-选项-属性-data，生命周期，配置，等等" class="headerlink" title="4.1 app.wpy 的 config 选项/属性() ,data，生命周期，配置，等等"></a>4.1 app.wpy 的 config 选项/属性() ,data，生命周期，配置，等等</h3><p>App 小程序实例中主要包含小程序生命周期函数、 config 配置对象、 globalData 全局数据对象，以及其他自定义方法与属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAPP</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">app</span> </span>&#123;</span><br><span class="line">  <span class="comment">//config 属性对应原生的 app.json 文件</span></span><br><span class="line">  <span class="comment">// build 编译时会根据 config 属性自动生成 app.json 文件，如果需要修改 config 中的内容，请使用微信提供的相关 API。</span></span><br><span class="line">  config = &#123;</span><br><span class="line">    <span class="comment">//① 页面路径列表</span></span><br><span class="line">    pages: [</span><br><span class="line">      <span class="string">'pages/index'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">//② 全局的默认窗口表现</span></span><br><span class="line">    <span class="built_in">window</span>: &#123;</span><br><span class="line">      navigationBarBackgroundColor: <span class="string">'#fff'</span>,<span class="comment">//导航栏背景颜色，如 #000000</span></span><br><span class="line">      navigationBarTextStyle: <span class="string">'black'</span><span class="comment">//导航栏标题颜色，仅支持 black / white</span></span><br><span class="line">      navigationBarTitleText: <span class="string">'WeChat'</span>,<span class="comment">//导航栏标题文字内容</span></span><br><span class="line">      navigationStyle:<span class="string">'default'</span>,<span class="comment">//导航栏样式，仅支持以下值：default 默认样式 ,custom 自定义导航栏，只保留右上角胶囊按钮</span></span><br><span class="line">      backgroundColor:<span class="string">'#ffffff'</span><span class="comment">//窗口的背景色</span></span><br><span class="line">      backgroundTextStyle: <span class="string">'light'</span>,<span class="comment">//下拉 loading 的样式，仅支持 dark / light</span></span><br><span class="line">      backgroundColorTop:<span class="string">'#ffffff'</span><span class="comment">//顶部窗口的背景色，仅 iOS 支持</span></span><br><span class="line">      backgroundColorBottom:<span class="string">'#ffffff'</span><span class="comment">//底部窗口的背景色，仅 iOS 支持</span></span><br><span class="line">      enablePullDownRefresh:<span class="literal">false</span>,<span class="comment">//是否开启当前页面的下拉刷新。详见 Page.onPullDownRefresh</span></span><br><span class="line">      onReachBottomDistance:<span class="number">50</span>,<span class="comment">//页面上拉触底事件触发时距页面底部距离，单位为px。详见 Page.onReachBottom</span></span><br><span class="line">      pageOrientation:<span class="string">'portrait'</span><span class="comment">//屏幕旋转设置，仅支持 auto / portrait 详见 响应显示区域变化</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ③ 页面底部栏配置</span></span><br><span class="line">    tabBar: &#123;</span><br><span class="line">      color: <span class="string">'#AEADAD'</span>,<span class="comment">//tab 上的文字默认颜色</span></span><br><span class="line">      selectedColor: <span class="string">'#049BFF'</span>,<span class="comment">//tab 上的文字选中时的颜色</span></span><br><span class="line">      backgroundColor: <span class="string">'#fff'</span>,<span class="comment">//tab 的背景色</span></span><br><span class="line">      borderStyle: <span class="string">'black'</span>,<span class="comment">//tabbar上边框的颜色， 仅支持 black / white</span></span><br><span class="line">      position:<span class="string">'bottom'</span>,<span class="comment">//tabBar的位置，仅支持 bottom / top</span></span><br><span class="line">      list: [<span class="comment">//最少2个、最多5个 tab</span></span><br><span class="line">        &#123;</span><br><span class="line">          pagePath: <span class="string">'pages/index'</span>,</span><br><span class="line">          text: <span class="string">'游戏'</span>,</span><br><span class="line">          iconPath: <span class="string">''</span>,</span><br><span class="line">          selectedIconPath: <span class="string">''</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          pagePath: <span class="string">'pages/ranking'</span>,</span><br><span class="line">          text: <span class="string">'排名'</span>,</span><br><span class="line">          iconPath: <span class="string">''</span>,</span><br><span class="line">          selectedIconPath: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//④ 网络超时时间 默认都是 60000 ms</span></span><br><span class="line">    networkTimeout: &#123;</span><br><span class="line">      request: <span class="number">10000</span>,<span class="comment">//wx.request 的超时时间，单位：毫秒。</span></span><br><span class="line">      downloadFile: <span class="number">10000</span>,<span class="comment">//wx.downloadFile 的超时时间，单位：毫秒。</span></span><br><span class="line">      connectSocket:<span class="number">10000</span>,</span><br><span class="line">      uploadFile:<span class="number">10000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    debug: <span class="literal">true</span>, <span class="comment">//⑥ 是否开启 debug 模式，默认关闭, 这个配置，项目上线要删除</span></span><br><span class="line">    functionalPages:<span class="literal">true</span>,<span class="comment">//⑦ 启用插件功能页时</span></span><br><span class="line">    subpackages:,<span class="comment">//⑧ subPackages 也行???? 启用分包加载时，声明项目分包结构。</span></span><br><span class="line">    workers:,<span class="comment">//⑨ 使用 Worker 处理多线程任务时，设置 Worker 代码放置的目录</span></span><br><span class="line">    requiredBackgroundModes: [<span class="string">'audio'</span>],<span class="comment">//⑩ 申明需要后台运行的能力，类型为数组。 目前也只是支持 audio</span></span><br><span class="line">    plugins:,<span class="comment">//⑪ 声明小程序需要使用的插件。</span></span><br><span class="line">    preloadRule:,<span class="comment">//⑫ 声明分包预下载的规则。</span></span><br><span class="line">    resizable:,<span class="comment">//⑬在 iPad 上运行的小程序可以设置支持屏幕旋转。</span></span><br><span class="line">    <span class="comment">//当小程序需要使用 wx.navigateToMiniProgram 接口跳转到其他小程序时，</span></span><br><span class="line">    navigateToMiniProgramAppIdList:,<span class="comment">//⑭需要先在配置文件中声明需要跳转的小程序 appId 列表，最多允许填写 10 个。</span></span><br><span class="line">    usingComponents:<span class="comment">//⑮ 开发者工具 1.02.1810190 及以上版本支持 usingComponents 字段，</span></span><br><span class="line">    <span class="comment">//在此处声明的自定义组件视为全局自定义组件，在小程序内的页面或自定义组件中可以直接使用而无需再声明。</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//小程序的生命周期，周期函数</span></span><br><span class="line">    onLaunch () &#123;&#125; <span class="comment">//小程序初始化完成时（全局只触发一次）</span></span><br><span class="line">    onShow () &#123;&#125;  <span class="comment">// 小程序启动，或从后台进入前台显示时</span></span><br><span class="line">    onHide () &#123;&#125;  <span class="comment">// 小程序从前台进入后台时</span></span><br><span class="line">    onError() &#123;&#125; <span class="comment">//小程序发生脚本错误，或者 api 调用失败时触发，会带上错误信息</span></span><br><span class="line">    onPageNotFound() &#123;&#125; <span class="comment">//小程序要打开的页面不存在时触发，会带上页面信息回调该函数</span></span><br><span class="line">   <span class="comment">//前台、后台定义： 当用户点击左上角关闭，或者按了设备 Home 键离开微信，小程序并没有直接销毁，而是进入了后台；</span></span><br><span class="line">   <span class="comment">//当再次进入微信或再次打开小程序，又会从后台进入前台。</span></span><br><span class="line">   <span class="comment">//需要注意的是：只有当小程序进入后台一定时间，或者系统资源占用过高，才会被真正的销毁。</span></span><br><span class="line"></span><br><span class="line">    globalData = &#123;&#125; <span class="comment">//全局属性</span></span><br><span class="line">    <span class="comment">// 全局方法</span></span><br><span class="line"></span><br><span class="line">    customData = &#123;&#125;; <span class="comment">// 自定义数据 ？？？没有看到过这个啊？？</span></span><br><span class="line">    customFunction ()　&#123; &#125; <span class="comment">//自定义函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-page-wpy-与-components-wpy-的-选项-属性：data，生命周期，配置，等等"><a href="#4-2-page-wpy-与-components-wpy-的-选项-属性：data，生命周期，配置，等等" class="headerlink" title="4.2 page.wpy 与 components.wpy 的 选项/属性：data，生命周期，配置，等等"></a>4.2 page.wpy 与 components.wpy 的 选项/属性：data，生命周期，配置，等等</h3><p>由于 Page 页面实际上继承自 Component 组件，即 Page 也是组件。除扩展了页面所特有的 config 配置以及特有的页面生命周期函数之外，其它属性和方法与 Component 一致，因此这里以 Page 页面为例进行介绍。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPage</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span><br><span class="line"><span class="comment">// export default class MyComponent extends wepy.component &#123;</span></span><br><span class="line">    <span class="comment">// 只在Page实例中存在的配置数据，对应于原生的page.json文件  只是 pages.wpy 中的有，components.wpy 中没有</span></span><br><span class="line">    config = &#123;</span><br><span class="line">      navigationBarBackgroundColor: <span class="string">'#fff'</span>, <span class="comment">//导航栏背景颜色，如 #000000</span></span><br><span class="line">      navigationBarTitleText: <span class="string">'WeChat'</span>,<span class="comment">//导航栏标题文字内容</span></span><br><span class="line">      navigationBarTextStyle: <span class="string">'black'</span>,<span class="comment">//导航栏标题颜色，仅支持 black / white</span></span><br><span class="line">      backgroundColor:<span class="string">'#ffffff'</span>,<span class="comment">//窗口的背景色</span></span><br><span class="line">      backgroundTextStyle: <span class="string">'light'</span>,<span class="comment">//下拉 loading 的样式，仅支持 dark / light</span></span><br><span class="line">      enablePullDownRefresh:<span class="literal">false</span>,<span class="comment">//是否全局开启下拉刷新。详见 Page.onPullDownRefresh</span></span><br><span class="line">      onReachBottomDistance:<span class="number">50</span>,<span class="comment">//页面上拉触底事件触发时距页面底部距离，单位为px。详见 Page.onReachBottom</span></span><br><span class="line">      disableScroll:<span class="literal">false</span><span class="comment">//设置为 true 则页面整体不能上下滚动；</span></span><br><span class="line">      <span class="comment">//disableScroll 这项 只在页面配置中有效，无法在 app.json 中设置该项!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data = &#123;&#125;;  <span class="comment">// 页面所需数据均需在这里声明，可用于模板数据绑定</span></span><br><span class="line"></span><br><span class="line">    components = &#123;&#125;;  <span class="comment">// 声明页面中所引用的组件，或声明组件中所引用的子组件</span></span><br><span class="line"></span><br><span class="line">    mixins = [];  <span class="comment">// 声明页面所引用的Mixin实例</span></span><br><span class="line"></span><br><span class="line">    computed = &#123;&#125;;  <span class="comment">// 声明计算属性（详见后文介绍）</span></span><br><span class="line">    watch = &#123;&#125;;  <span class="comment">// 声明数据 watcher（详见后文介绍）</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// 组件事件处理函数：页面中的某个元素触发的函数</span></span><br><span class="line">    methods = &#123;&#125;;  <span class="comment">// 声明页面 wxml 中标签的事件处理函数。用于 本组件 触发的事件处理</span></span><br><span class="line">    events = &#123;&#125;;  <span class="comment">// 声明组件之间的事件处理函数           用于 其他组件 触发的事件处理</span></span><br><span class="line"></span><br><span class="line">    customData = &#123;&#125;  <span class="comment">// 自定义数据</span></span><br><span class="line">    customFunction ()　&#123;&#125;  <span class="comment">//自定义方法，这里与 methods  平级，这些方法不能卸载  methods 里面</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生命周期函数</span></span><br><span class="line">    onLoad () &#123;&#125;  <span class="comment">// 页面加载（执行 ？？ 次）：在 Page 和 Component 共用的生命周期函数</span></span><br><span class="line">    onShow () &#123;&#125;  <span class="comment">// 页面显示（执行很多次）：只在 Page 中存在的页面生命周期函数</span></span><br><span class="line">    onReady() &#123;&#125;  <span class="comment">// 页面初次渲染完成（执行 1 次）：只在？？？</span></span><br><span class="line">    onHide () &#123;&#125;  <span class="comment">// 页面隐藏（执行很多次）：只在 Page 中存在的页面生命周期函数</span></span><br><span class="line">    onUnload()&#123;&#125;  <span class="comment">//页面卸载（执行 ？？ 次）：在 Page 和 Component 共用的生命周期函数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 页面事件处理函数：整个页面触发的函数</span></span><br><span class="line">    onPullDownRefresh()&#123;&#125;  <span class="comment">//监听用户下拉动作</span></span><br><span class="line">    onReachBottom()&#123;&#125;  <span class="comment">//页面上拉触底事件的处理函数</span></span><br><span class="line">    onShareAppMessage()&#123;&#125;  <span class="comment">//用户点击右上角转发</span></span><br><span class="line">    onPageScroll()&#123;&#125;  <span class="comment">//页面滚动触发事件的处理函数</span></span><br><span class="line">    onResize()&#123;&#125;  <span class="comment">//页面尺寸改变时触发</span></span><br><span class="line">    onTabItemTap()&#123;&#125;  <span class="comment">//当前是 tab 页时，点击 tab 时触发</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-components-wpy-的-选项-属性：data，生命周期，配置，等等"><a href="#4-2-components-wpy-的-选项-属性：data，生命周期，配置，等等" class="headerlink" title="4.2 components.wpy 的 选项/属性：data，生命周期，配置，等等"></a>4.2 components.wpy 的 选项/属性：data，生命周期，配置，等等</h3><p>除了 config 之外，拥有 page 页面的所有属性与方法<br>/.,   Zxcvbvc选项</p>
<p>在 pages 页面中我们有几种函数</p>
<ul>
<li>2、页面事件处理函数：eg：onPullDownRefresh()</li>
<li>3、组件事件处理函数 methods 内：自定义</li>
<li>4、props 传值处理函数 events 内：自定义</li>
<li>5、普通函数 为其他的函数做准备的函数：自定义</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 vue 中，所有方法都定义在 methods 里面。</span></span><br><span class="line"><span class="comment">//而在 wepy 中，</span></span><br><span class="line"><span class="comment">// ① 普通方法是直接定义在 class 静态方法里面。（就是与  methods  events 平级的地方）</span></span><br><span class="line"><span class="comment">// ② events 只定义组件间交互的方法。（它的父子组件，传递过来方法）</span></span><br><span class="line"><span class="comment">// ③ methods只定义事件方法。（本组件事件触发的方法）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* index.wpy */</span></span><br><span class="line">getSliderImg (data) &#123; <span class="comment">// ① 普通方法</span></span><br><span class="line">  <span class="keyword">this</span>.sliderImg = data.slice(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">this</span>.$apply()</span><br><span class="line">&#125;</span><br><span class="line">onPullDownRefresh () &#123;  <span class="comment">// 页面事件处理函数：顶部下拉刷新（这是对整个页面而言触发的事件）</span></span><br><span class="line">  <span class="keyword">this</span>.showToast()</span><br><span class="line">  <span class="keyword">this</span>.sliderImg = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.active = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">this</span>.$apply()</span><br><span class="line">  <span class="keyword">this</span>.getMovies()</span><br><span class="line">&#125;</span><br><span class="line">events = &#123;  <span class="comment">// ② 与子组件的交互，都要写到 events 里面</span></span><br><span class="line">  <span class="string">'showMovieDetail'</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">    wepy.navigateTo(&#123;</span><br><span class="line">      url: <span class="string">`./movie-detail?locationId=<span class="subst">$&#123;<span class="number">290</span>&#125;</span>&amp;movieId=<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">methods = &#123;</span><br><span class="line">  toggleType (flag) &#123; <span class="comment">// ③ 组件事件处理函数：点击事件方法（这是对 页面中的某个元素操作 触发的事件）</span></span><br><span class="line">    <span class="keyword">this</span>.active = flag</span><br><span class="line">    <span class="keyword">this</span>.showToast()</span><br><span class="line">    <span class="keyword">this</span>.getMovies()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-computed-属性-选项"><a href="#4-4-computed-属性-选项" class="headerlink" title="4.4 computed 属性/选项"></a>4.4 computed 属性/选项</h3><p>wepy 中也有 computed,props，data,watch 等 vue 中有的一些属性（没有filter, directive）。<br>props,data,watch 和 vue 基本无异。 wpy 中是 watcher</p>
<p>wepy 中 computed 计算属性是无法传参的（本人没能找到传参的方法，且官方文档没有提到），在处理一些动态数据的时候，只能通过其他方法来操作。<br>比如，服务端获取到的的 JSON 对象内有条时间戳数据需要转换成字符串，我的做法是将时间戳另外传值给子组件，然后在子组件中使用 computed 对props 进行记算。</p>
<h3 id="4-10-this-parent-全局方法-this-parent-全局属性"><a href="#4-10-this-parent-全局方法-this-parent-全局属性" class="headerlink" title="4.10 this.$parent.全局方法 this.$parent.全局属性"></a>4.10 this.$parent.全局方法 this.$parent.全局属性</h3><p>在 Page 页面实例中，可以通过 this.$parent 来访问 App 实例 的方法与属性</p>
<h2 id="五、wepy-继承-wx-对象的所有-API"><a href="#五、wepy-继承-wx-对象的所有-API" class="headerlink" title="五、wepy 继承 wx 对象的所有 API"></a>五、wepy 继承 wx 对象的所有 API</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/" target="_blank" rel="noopener">小程序官网 API</a></p>
<h2 id="六、wepy-中的-API-类"><a href="#六、wepy-中的-API-类" class="headerlink" title="六、wepy 中的 API 类"></a>六、wepy 中的 API 类</h2><h3 id="6-1-app-：wepy-app-Class"><a href="#6-1-app-：wepy-app-Class" class="headerlink" title="6.1 app ：wepy.app Class"></a>6.1 app ：wepy.app Class</h3><p>App 基类，小程序入口。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">app</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ① 属性</span></span><br><span class="line">   <span class="keyword">this</span>.$wxapp <span class="comment">// getApp()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ② 属性</span></span><br><span class="line">   <span class="keyword">this</span>.$pages = &#123;</span><br><span class="line">   <span class="string">'./pages/index'</span>: IndexPage</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ④ use() 使用中间件</span></span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.use(<span class="string">'requestfix'</span>); <span class="comment">//修复小程序请求并发问题。</span></span><br><span class="line">    <span class="keyword">this</span>.use(<span class="string">'promisify'</span>);<span class="comment">//使用 wepy.xxx 的方式请求小程序原生 API 都将 Promise 化。</span></span><br><span class="line">    <span class="comment">//③  $interceptors 拦截器属性</span></span><br><span class="line">    <span class="keyword">this</span>.$interceptors = &#123;</span><br><span class="line">    <span class="string">'request'</span>: &#123;</span><br><span class="line">        config (p) &#123;</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;,</span><br><span class="line">        success (rst) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*⑤ intercept 拦截器  方法</span></span><br><span class="line"><span class="comment">    //使用拦截器对原生 API 请求进行拦截。</span></span><br><span class="line"><span class="comment">    this.intercept('request', &#123;</span></span><br><span class="line"><span class="comment">      config (p) &#123;</span></span><br><span class="line"><span class="comment">        p.timestamp = +new Date()</span></span><br><span class="line"><span class="comment">        return p</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">      success (obj) &#123;</span></span><br><span class="line"><span class="comment">        console.log('request success')</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">    &#125;) */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-component-amp-amp-page-：wepy-component-Class-amp-amp-wepy-page-Class"><a href="#6-2-component-amp-amp-page-：wepy-component-Class-amp-amp-wepy-page-Class" class="headerlink" title="6.2 component &amp;&amp; page ：wepy.component Class &amp;&amp; wepy.page Class"></a>6.2 component &amp;&amp; page ：wepy.component Class &amp;&amp; wepy.page Class</h3><p>组件基类</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  $name       <span class="comment">//① String: 组件名称。</span></span><br><span class="line">  $isComponent<span class="comment">//② Boolean：是否是组件，如果是页面，此值为false。</span></span><br><span class="line">  $wxpage     <span class="comment">//③ :Object: 小程序原生page。</span></span><br><span class="line">  $parent     <span class="comment">//④ :Page|App：组件的父组件，如果当前是组件是Page对象，那么$parent的值为App对象。</span></span><br><span class="line">  $root       <span class="comment">//⑤ :Page: 组件所在的Page对象，如果当前组件是Page对象，那么$root的值就是自己本身。</span></span><br><span class="line">  $coms       <span class="comment">//⑥ :List&lt;Component&gt;：组件的子组件列表。</span></span><br><span class="line">  $mixins     <span class="comment">//⑦ :Array[Mixin]：组件所注入的Mixin对象。</span></span><br><span class="line">  data        <span class="comment">//⑧ :Object: 组件需要绑定的数据。</span></span><br><span class="line">  methods     <span class="comment">//⑨ :List&lt;Function&gt;：组件需要响应的事件列表。</span></span><br><span class="line">  props       <span class="comment">//⑩ :List&lt;Props&gt;：组件允许传递的props列表。</span></span><br><span class="line">  events      <span class="comment">//⑪:List&lt;Function&gt;：组件通信时所需要的事件表现。</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.setData(<span class="string">'list'</span>, [<span class="string">'apple'</span>, <span class="string">'pen'</span>]);<span class="comment">//⑫ 对原有小程序的setData的封装。</span></span><br><span class="line">  <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">    list: [<span class="string">'apple'</span>, <span class="string">'pen'</span>]<span class="comment">//因为 WePY 的脏检查流程会自动执行 setData 操作，所以通常情况下不需要使用此方法。</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">this</span>.getCurrentPages()<span class="comment">//                ⑬ 相当于全局方法 getCurrentPages()</span></span><br><span class="line">  <span class="keyword">this</span>.$getComponent(<span class="string">'./coma/comb'</span>); <span class="comment">//   ⑭ 通过组件名称路径查找组件对象。</span></span><br><span class="line">  <span class="keyword">this</span>.$getComponent(<span class="string">'../comc'</span>);<span class="comment">//通过组件名称路径查找组件对象。</span></span><br><span class="line">  <span class="comment">//                                      ⑮ $invoke(com:String|Component)：</span></span><br><span class="line">  <span class="comment">//调用另一组件的方法。优先调用 methods 中方法，如果方法不存在，则调用组件的自定义方法，调用自定义方法时，不会传递事件 $event。</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// comb.js</span></span><br><span class="line">  <span class="comment">/* export class ComB extends wepy.component &#123;</span></span><br><span class="line"><span class="comment">      methods = &#123;</span></span><br><span class="line"><span class="comment">          func1 (p1, p2, evt) &#123;&#125;</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">      func2 (p1, p2) &#123;&#125;</span></span><br><span class="line"><span class="comment">  &#125; */</span></span><br><span class="line">  <span class="comment">// coma.js ，假设这里是 coma.js</span></span><br><span class="line">  <span class="keyword">this</span>.$invoke(<span class="string">'./ComB'</span>, <span class="string">'func1'</span>, <span class="string">'p1'</span>, <span class="string">'p2'</span>);</span><br><span class="line">  <span class="keyword">this</span>.$invoke(<span class="string">'./ComB'</span>, <span class="string">'func2'</span>, <span class="string">'p1'</span>, <span class="string">'p2'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//⑯ $broadcast(eventName:String, [args])：组件发起一个广播事件。  父 传 子</span></span><br><span class="line">  <span class="comment">// coma.js 假设这里是 coma.js</span></span><br><span class="line">  components = &#123; ComA &#125;;</span><br><span class="line">  <span class="keyword">this</span>.$broadcast(<span class="string">'broadcast-event'</span>, <span class="string">'p1'</span>, <span class="string">'p2'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* coma.js 的所有子组件，有需要的话</span></span><br><span class="line"><span class="comment">  events = &#123;</span></span><br><span class="line"><span class="comment">      'broadcast-event': (p1, p2, event) &#123;&#125;</span></span><br><span class="line"><span class="comment">  &#125; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//⑰ $emit(eventName:String, [args])：组件发起一个冒泡事件。 子 传 父</span></span><br><span class="line">  <span class="comment">// coma.js 假设这里是 coma.js</span></span><br><span class="line">  <span class="keyword">this</span>.$emit(<span class="string">'emit-event'</span>, <span class="string">'p1'</span>, <span class="string">'p2'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* coma.js 的所有 父 组件，有需要的话</span></span><br><span class="line"><span class="comment">  components = &#123; ComA &#125;;</span></span><br><span class="line"><span class="comment">  events = &#123;</span></span><br><span class="line"><span class="comment">      'emit-event': (p1, p2, event) =&gt; &#123;&#125;</span></span><br><span class="line"><span class="comment">  &#125; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//⑱ $apply([func:Function])：组件发起脏检查</span></span><br><span class="line">  <span class="comment">//正常流程下，改变数据后，组件会在流程结束时自动触发脏检查。 在异步或者回调流程中改变数据时，需要手动调用 $apply 方法。</span></span><br><span class="line">  <span class="keyword">this</span>.userName = <span class="string">'Gcaufy'</span>;</span><br><span class="line">  <span class="keyword">this</span>.$apply();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.$apply(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.userName = <span class="string">'Gcaufy'</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//⑲ $nextTick([func:Function])：组件数据绑定完成后的回调事件，v1.6.1 以上可用。</span></span><br><span class="line">  <span class="comment">// 数据绑定后的回调事件，在不传入function时，返回一个promise对象</span></span><br><span class="line">  <span class="keyword">this</span>.userName = <span class="string">'Gcaufy'</span>;</span><br><span class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'UI updated'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 或者</span></span><br><span class="line">  <span class="keyword">this</span>.userName = <span class="string">'Gcaufy'</span>;</span><br><span class="line">  <span class="keyword">this</span>.$nextTick().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'UI updated'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 下面的 page 页面专有的属性与方法， common 组件是没有的。</span></span><br><span class="line">  <span class="comment">//⑳$preload(key:String|Object, [value:Object])，</span></span><br><span class="line">  <span class="comment">// 加载 preload 数据后，跳转至另一个页面时，在 onLoad 方法中可以获取到上个页面的 preload 数据。</span></span><br><span class="line">  <span class="keyword">this</span>.$preload(<span class="string">'userName'</span>, <span class="string">'Gcaufy'</span>);</span><br><span class="line">  <span class="keyword">this</span>.$redirect(<span class="string">'./page2'</span>);</span><br><span class="line">  <span class="comment">// page2.js</span></span><br><span class="line">  <span class="comment">/* onLoad (params, data) &#123;</span></span><br><span class="line"><span class="comment">      console.log(data.preload.userName);</span></span><br><span class="line"><span class="comment">  &#125; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//㉑ $redirect(url:String|Object, [params:Object])：wx.redirectTo的封装方法。</span></span><br><span class="line">  <span class="keyword">this</span>.$redirect(<span class="string">'./page2'</span>, &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;);</span><br><span class="line">  <span class="keyword">this</span>.$redirect(&#123;</span><br><span class="line">      url: <span class="string">'./pages?a=1&amp;b=2'</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// page2.js</span></span><br><span class="line">  <span class="comment">/* onLoad (params, data) &#123;</span></span><br><span class="line"><span class="comment">      console.log(data.preload.userName);</span></span><br><span class="line"><span class="comment">  &#125; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ㉒ $navigate(url:String|Object, [params:Object])：wx.navigateTo的封装方法</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//㉓ $switch(url:String|Object)：wx.switchTab的封装方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="预加载-？？？、这个官网上面没有啊"><a href="#预加载-？？？、这个官网上面没有啊" class="headerlink" title="预加载 ？？？、这个官网上面没有啊"></a>预加载 ？？？、这个官网上面没有啊</h4><p>预加载<br>请求数据是在 onLoad 中进行，但是小程序的 page 1跳转到 page 2，再到 page 2 的 onLoad 是存在一个 300ms ~ 400ms 的延时.<br>wepy 扩展了生命周期，添加了onPrefetch 事件，会在 redirect 之时被主动调用。同时给 onLoad 事件添加了一个参数，用于接收预加载或者是预查询的数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// params</span></span><br><span class="line"><span class="comment">// data.from: 来源页面，page1</span></span><br><span class="line"><span class="comment">// data.prefetch: 预查询数据</span></span><br><span class="line"><span class="comment">// data.preload: 预加载数据</span></span><br><span class="line">onLoad (params, data) &#123;&#125;</span><br><span class="line"><span class="comment">//预加载数据示例：</span></span><br><span class="line"><span class="comment">// page1.wpy 预先加载 page2 需要的数据。</span></span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">  tap () &#123;</span><br><span class="line">    <span class="keyword">this</span>.$redirect(<span class="string">'./page2'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">onLoad () &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.$preload(<span class="string">'list'</span>, api.getBigList())</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// page2.wpy 直接从参数中拿到 page1 中预先加载的数据</span></span><br><span class="line">onLoad (params, data) &#123;</span><br><span class="line">  data.preload.list.then(<span class="function">(<span class="params">list</span>) =&gt;</span> render(list));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//预查询数据示例：</span></span><br><span class="line"><span class="comment">// page1.wpy 使用封装的 redirect 方法跳转时，会调用 page2 的 onPrefetch 方法</span></span><br><span class="line">methods: &#123;</span><br><span class="line">  tap () &#123;</span><br><span class="line">    <span class="keyword">this</span>.$redirect(<span class="string">'./page2'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// page2.wpy 直接从参数中拿到 onPrefetch 中返回的数据</span></span><br><span class="line">onPrefetch () &#123;</span><br><span class="line">  <span class="keyword">return</span> api.getBigList();</span><br><span class="line">&#125;</span><br><span class="line">onLoad (params, data) &#123;</span><br><span class="line">  data.prefetch.then(<span class="function">(<span class="params">list</span>) =&gt;</span> render(list));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-3-event-：-wepy-event-Class-小程序事件封装类"><a href="#6-3-event-：-wepy-event-Class-小程序事件封装类" class="headerlink" title="6.3 event ： wepy.event Class  小程序事件封装类"></a>6.3 event ： wepy.event Class  小程序事件封装类</h3><h2 id="七、组件之间通信与交互，事件通信交互-页面传参"><a href="#七、组件之间通信与交互，事件通信交互-页面传参" class="headerlink" title="七、组件之间通信与交互，事件通信交互-页面传参"></a>七、组件之间通信与交互，事件通信交互-页面传参</h2><h3 id="7-1-父子组件传值：props-传值：父组件-lt-gt-子组件"><a href="#7-1-父子组件传值：props-传值：父组件-lt-gt-子组件" class="headerlink" title="7.1 父子组件传值：props 传值：父组件 &lt;=&gt; 子组件"></a>7.1 父子组件传值：props 传值：父组件 &lt;=&gt; 子组件</h3><p>也就是在父组件中 子组件处 ：写上传递的属性 与其对应的值。</p>
<p>props 传值在 WePY 中属于父子组件之间传值的一种机制，包括静态传值与动态传值。</p>
<p>静态传值：传值即使静态传值，静态传值为父组件向子组件传递常量数据，因此只能传递 String 字符串类型。<br>        静态传值，使用静态传值时，子组件会接收到字符串的值。<br>动态传值：动态传值是指父组件向子组件传递动态数据内容，父子组件数据完全独立互不干扰。!!!!!!!!!!!!!!!!!</p>
<h4 id="7-1-1-静态传值：传递字符串-父组件-gt-子组件"><a href="#7-1-1-静态传值：传递字符串-父组件-gt-子组件" class="headerlink" title="7.1.1 静态传值：传递字符串 父组件 =&gt; 子组件"></a>7.1.1 静态传值：传递字符串 父组件 =&gt; 子组件</h4><p>只能是父组件传给子组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child</span> <span class="attr">title</span>=<span class="string">"mytitle"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">    props = &#123;</span></span><br><span class="line"><span class="javascript">      title: <span class="built_in">String</span> <span class="comment">// 在子组件接收 父组件传递过来的值，这里是静态传值，数据类型值 字符串</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">    onLoad () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.title); <span class="comment">// mytitle</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="7-1-2-动态态传值：父子组件的值互相不影响-父组件-lt-gt-子组件"><a href="#7-1-2-动态态传值：父子组件的值互相不影响-父组件-lt-gt-子组件" class="headerlink" title="7.1.2 动态态传值：父子组件的值互相不影响 父组件 &lt;=&gt; 子组件"></a>7.1.2 动态态传值：父子组件的值互相不影响 父组件 &lt;=&gt; 子组件</h4><p>由于上面的静态传值，只能是父组件传值给子组件，在子组件是不能去修改父组件的属性值的，而有时候我们需要做到 父子组件的数据双向绑定，简单点的，目的也就是子组件可以修改值传递给父组件。</p>
<p>①sync修饰符：其实就是做到子组件中修改属性并传递给父组件 父组件 &lt;= 子组件，<code>:name.sync</code> 就是 <code>:name=&quot;name&quot; @update:name=&quot;name = $event&quot;</code> 的缩写。<br>  注意带有 .sync 修饰符的 v-bind 不能和表达式一起使用 (例如 <code>v-bind:title.sync=”doc.title + ‘!’”</code> 是无效的)。取而代之的是，你只能提供你想要绑定的属性名<br>②twoWay:是否可以子组件向父组件传值，默认值为 false，也就是不允许子组件向父组件传值。<br>    <code>:name.sync</code> 等价于 父组件向子组件传值 ，但是子组件不能传值给父组件，也就是静态传值的效果<br>    <code>:name.sync</code> props 中 <code>twoWay: true</code> 等价于 双向传值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child</span> <span class="attr">:title</span>=<span class="string">"parentTitle"</span> <span class="attr">:syncTitle.sync</span>=<span class="string">"parentTitle"</span> <span class="attr">:twoWayTitle</span>=<span class="string">"parentTitle"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">    props = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="built_in">String</span>, <span class="comment">// 静态传值 （父组件中 title 属性没有 .sync 修饰，并且这里默认 twoWay: false）</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    syncTitle: &#123;   <span class="comment">// 父向子单向动态传值</span></span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>, <span class="comment">//（父组件中 syncTitle 属性有 .sync 修饰，但是这里默认 twoWay: false）</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="string">'null'</span> <span class="comment">// 因此只能是父组件传值给子组件</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    twoWayTitle: &#123; <span class="comment">// 双向传值</span></span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>, <span class="comment">//（父组件中 syncTitle 属性有 .sync 修饰，这里 twoWay: true）</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="string">'nothing'</span>, <span class="comment">//问题？这里默认值是什么？？？？</span></span></span><br><span class="line"><span class="javascript">        twoWay: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">onLoad () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.title); <span class="comment">// p-Title</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.syncTitle); <span class="comment">// p-Title</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.twoWayTitle); <span class="comment">// p-Title</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.title = <span class="string">'c-title'</span>;<span class="comment">// 修改子组件的属性值，因为 title 没有 sync 只能是 父 影响 子，子无法改变 父组件的</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$parent.parentTitle); <span class="comment">// p-Title</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.twoWayTitle = <span class="string">'two-way-title'</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$apply(); <span class="comment">//https://juejin.im/post/59bfe84351882531b730bac2 ，</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// wepy 中 props 传递需要加上 .sync 修饰符（类似VUE1.x）才能实现 props 动态更新，</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 并且父组件再 变更传递给子组件 props 后要执行this.$apply() 方法才能更新</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$parent.parentTitle); <span class="comment">// two-way-title.  --- twoWay为true时，子组件props中的属性值改变时，会同时改变父组件对应的值</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$parent.parentTitle = <span class="string">'p-title-changed'</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$parent.$apply();</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.title); <span class="comment">// 'c-title';</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.syncTitle); <span class="comment">// 'p-title-changed' --- 有.sync修饰符的props属性值，当在父组件中改变时，会同时改变子组件对应的值。</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>问题： apply（） ，call 函数，等等，好难。<br>上面的这个例子举例真是不让人理解、</p>
<p>apply() 方法调用一个函数, 其具有一个指定的this值，以及作为一个数组（或类似数组的对象）提供的参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">VM139764:1 CLI报错：</span><br><span class="line">F:\qianduan_dir\00program\wechat-wepy\suduku\src\pages\grid.wpy</span><br><span class="line">  240:10  error  Missing space before value <span class="keyword">for</span> key <span class="string">'grid'</span>  key-spacing</span><br><span class="line">  269:10  error  Missing space before value <span class="keyword">for</span> key <span class="string">'name'</span>  key-spacing</span><br><span class="line"></span><br><span class="line">✖ 2 problems (2 errors, 0 warnings)</span><br></pre></td></tr></table></figure>
<p>解答：这个是因为 eslint 的要求，要求 对象中，key 与 value 之间是需要空格间隔的，否则就会报错，找到了原因，是因为在父组件中，data 部分写成了这样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">  name:<span class="string">'xiaomi'</span><span class="comment">// 这里 key 与 value 之间没有空格，eslint 是会当成错误报出来的。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//解决办法就是 ctrl + s 多按几遍，就会自动的格式化了，这里 eslint 很烦人的一个地方，文件它也不报错，只是在控制台一直报错，</span></span><br><span class="line"><span class="comment">// 明白了错误的意思之后，随手  ctrl + s  发现 data 中格式给改变了，</span></span><br><span class="line">data = &#123;</span><br><span class="line">  name: <span class="string">'xiaomi'</span><span class="comment">// 格式化成这样就正确了。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后又出来了一个问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">204:24  error  Extra semicolon  semi <span class="comment"># 多余的 分号</span></span><br><span class="line">205:37  error  Extra semicolon  semi</span><br><span class="line">206:39  error  Extra semicolon  semi</span><br><span class="line">207:30  error  Extra semicolon  semi</span><br></pre></td></tr></table></figure>
<p>这还是 eslint 的问题，要修改 .eslintrc.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>,</span><br><span class="line">  globals: &#123; <span class="attr">wx</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  parser: <span class="string">'babel-eslint'</span>,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    sourceType: <span class="string">'module'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style</span></span><br><span class="line">  extends: [</span><br><span class="line">  <span class="string">'standard'</span>,</span><br><span class="line">  <span class="string">"eslint:recommended"</span> <span class="comment">//增加这一句，并且看到这里就变成一个数组了</span></span><br><span class="line">],</span><br><span class="line">  <span class="comment">// required to lint *.wpy files</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'html'</span></span><br><span class="line">  ],</span><br><span class="line">  settings: &#123;</span><br><span class="line">    <span class="string">'html/html-extensions'</span>: [<span class="string">'.html'</span>, <span class="string">'.wpy'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// add your custom rules here</span></span><br><span class="line">  <span class="string">'rules'</span>: &#123;</span><br><span class="line">    <span class="comment">// allow paren-less arrow functions</span></span><br><span class="line">    <span class="string">'arrow-parens'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// allow async-await</span></span><br><span class="line">    <span class="string">'generator-star-spacing'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// allow debugger during development</span></span><br><span class="line">    <span class="string">'no-debugger'</span>: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="number">2</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">'space-before-function-paren'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">"no-console"</span>:<span class="number">0</span> <span class="comment">// 增加这一句</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>问题： 这个 .sync 与 twoWay 到底是怎么限制传值的？？？？？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'grid'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">childrengrid</span> <span class="attr">:syncname.sync</span>=<span class="string">"name"</span> <span class="attr">:syncTwoname.sync</span>=<span class="string">"name"</span> <span class="attr">:twoName</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">childrengrid</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">data=&#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'xiaomi'</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.common-grid</span>&#123;</span></span><br><span class="line"><span class="undefined">      width: 100%;</span></span><br><span class="line"><span class="undefined">      height: 10%;</span></span><br><span class="line"><span class="undefined">      background: red;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"common-grid"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonGrid</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">    data = &#123;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// :name='name' :syncname.sync='name' :syncTwoname.sync='name' :twoname='name'</span></span></span><br><span class="line"><span class="undefined">    props=&#123;</span></span><br><span class="line"><span class="undefined">      gridData: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Array</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      syncname: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">        twoWay: <span class="literal">false</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      syncTwoname: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">        twoWay: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      twoName: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">        twoWay: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    onLoad () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.syncname:'</span> + <span class="keyword">this</span>.syncname)<span class="comment">//this.syncname:xiaomi</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.syncTwoname:'</span> + <span class="keyword">this</span>.syncTwoname)<span class="comment">//this.syncTwoname:xiaomi</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.twoname:'</span> + <span class="keyword">this</span>.twoName)<span class="comment">//this.twoName:xiaomi</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.syncname = <span class="string">'mei'</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply()</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.$parent.name:'</span> + <span class="keyword">this</span>.$parent.name) <span class="comment">//this.$parent.name:xiaomi</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 说明 .sync 子组件 是无法改变 父组件</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.syncTwoname = <span class="string">'mei1'</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply()</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.$parent.name:'</span> + <span class="keyword">this</span>.$parent.name)<span class="comment">//this.$parent.name:mei1</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// .sync twoWay=true 子组件 可以修改 父组件</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.twoName = <span class="string">'mei2'</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply()</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.$parent.name:'</span> + <span class="keyword">this</span>.$parent.name)<span class="comment">//this.$parent.name:mei2</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// twoWay=true  子组件 可以修改 父组件</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$parent.name = <span class="string">'mei3'</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$parent.$apply()</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.syncname:'</span> + <span class="keyword">this</span>.syncname)<span class="comment">//this.syncname:mei</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//  .sync  父组件也无法修改子组件啊 ？？？？？？？？</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.syncTwoname:'</span> + <span class="keyword">this</span>.syncTwoname)<span class="comment">//this.syncTwoname:mei3</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// .sync twoWay=true  父组件 可以修改 子组件</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'this.twoName:'</span> + <span class="keyword">this</span>.twoName)<span class="comment">//this.twoName:xiaomi</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// twoWay=true  父组件 无法修改 子组件</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>没有 .sync 与 twoWay 与静态传值是一样的，父子组件互补影响<br>只有 .sync 貌似 父组件无法修改子组件啊！！！！！<br>只有 twoWay=ture 子组件可以修改父zujian<br>有 .sync 与 twoWay 父子组件可以互相修改</p>
<h3 id="7-2-emit-子组件-gt-所有父组件"><a href="#7-2-emit-子组件-gt-所有父组件" class="headerlink" title="7.2  $emit 子组件 =&gt; 所有父组件"></a>7.2  $emit 子组件 =&gt; 所有父组件</h3><p>$emit 与 $broadcast 正好相反，事件发起组件的所有祖先组件会依次接收到$emit事件。如果组件ComE发起一个$emit事件，那么接收到事件的先后顺序为：组件ComA、页面Page_Index。如下图：</p>
<p><img src="https://cloud.githubusercontent.com/assets/2182004/20554704/9997932c-b198-11e6-9840-3edae2194f47.png" alt="t"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件：触发方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">'tap'</span>&gt;</span></span><br><span class="line">    这里绑定事件</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">   <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">      components = &#123;&#125;;</span></span><br><span class="line"><span class="undefined">      data = &#123;&#125;;</span></span><br><span class="line"><span class="undefined">      methods = &#123;</span></span><br><span class="line"><span class="undefined">        tap()&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.$emit(<span class="string">'some-event'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 事件方法, 使用 $emit 发起一个名为 some-event 的监听属性 传值为 1, 2, 3, 4</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">   &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件：接受事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">      components = &#123;&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      data = &#123;&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      methods = &#123;&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// events对象中所声明的函数为用于监听组件之间的通信与交互事件的事件处理函数</span></span></span><br><span class="line"><span class="undefined">      events = &#123;</span></span><br><span class="line"><span class="javascript">          <span class="string">'some-event'</span>: <span class="function">(<span class="params">p1, p2, p3, $event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$name&#125;</span> receive <span class="subst">$&#123;$event.name&#125;</span> from <span class="subst">$&#123;$event.source.$name&#125;</span>`</span>);</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 监听 从 A 产来的 some-event 属性</span></span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// Other properties</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-broadcast-父组件-gt-所有子组件"><a href="#7-3-broadcast-父组件-gt-所有子组件" class="headerlink" title="7.3  $broadcast 父组件 =&gt; 所有子组件"></a>7.3  $broadcast 父组件 =&gt; 所有子组件</h3><p>$broadcast 事件是由父组件发起，所有子组件都会收到此广播事件，除非事件被手动取消。事件广播的顺序为广度优先搜索顺序，如上图，如果页面Page_Index 发起一个 $broadcast 事件，那么按先后顺序依次接收到该事件的组件为：ComA、ComB、ComC、ComD、ComE、ComF、ComG、ComH。如下图：</p>
<p><img src="https://cloud.githubusercontent.com/assets/2182004/20554688/800089e6-b198-11e6-84c5-352d2d0e2f7e.png" alt="tu"><br>、$invoke</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件：触发方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">'tap'</span>&gt;</span></span><br><span class="line">    这里绑定事件</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">   <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">      components = &#123;&#125;;</span></span><br><span class="line"><span class="undefined">      data = &#123;&#125;;</span></span><br><span class="line"><span class="undefined">      methods = &#123;</span></span><br><span class="line"><span class="undefined">        tap()&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.$emit(<span class="string">'some-event'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 事件方法, 使用 $emit 发起一个名为 some-event 的监听属性 传值为 1, 2, 3, 4</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">   &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件：接受事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">      components = &#123;&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      data = &#123;&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      methods = &#123;&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// events对象中所声明的函数为用于监听组件之间的通信与交互事件的事件处理函数</span></span></span><br><span class="line"><span class="undefined">      events = &#123;</span></span><br><span class="line"><span class="javascript">          <span class="string">'some-event'</span>: <span class="function">(<span class="params">p1, p2, p3, $event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$name&#125;</span> receive <span class="subst">$&#123;$event.name&#125;</span> from <span class="subst">$&#123;$event.source.$name&#125;</span>`</span>);</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 监听 从 A 产来的 some-event 属性</span></span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// Other properties</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-4-invoke-A-B-组件之间调用方法-父子组件，非父子组件中调用-其他组件的方法都是这样做"><a href="#7-4-invoke-A-B-组件之间调用方法-父子组件，非父子组件中调用-其他组件的方法都是这样做" class="headerlink" title="7.4  $invoke A B 组件之间调用方法(父子组件，非父子组件中调用 其他组件的方法都是这样做)"></a>7.4  $invoke A B 组件之间调用方法(父子组件，非父子组件中调用 其他组件的方法都是这样做)</h3><p>$invoke 是一个页面或组件对另一个组件中的方法的直接调用，通过传入组件路径找到相应的组件，然后再调用其方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件：接受事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$invoke(<span class="string">'B'</span>, <span class="string">'someMethod'</span>, <span class="string">'someArgs'</span>) <span class="comment">// 调用 B 页面 的方法</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$invoke(<span class="string">'./../compsonent/C'</span>, <span class="string">'someMethod'</span>, <span class="string">'someArgs'</span>); <span class="comment">// 调用 C 组件 的方法</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-5-url-传值"><a href="#7-5-url-传值" class="headerlink" title="7.5 url 传值"></a>7.5 url 传值</h3><h4 id="7-6-1-导航链标签-url"><a href="#7-6-1-导航链标签-url" class="headerlink" title="7.6.1 导航链标签 + url"></a>7.6.1 导航链标签 + url</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">url</span>=<span class="string">"./pages/grid?level=&#123;&#123;level&#125;&#125;"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 这里的的 路径不要搞错--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"iconfont icon-message cfff"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"doc cfff"</span>&gt;</span>消息<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- &lt;view class='levels'&gt;</span></span><br><span class="line"><span class="comment">    这里怎么就不对呢？？？</span></span><br><span class="line"><span class="comment">  &lt;block for="&#123;&#123;levels&#125;&#125;" key="index" index="index" item="level" open-type="navigate"&gt;</span></span><br><span class="line"><span class="comment">    &lt;navigator clas='level' url='./grid?level=&#123;&#123;level&#125;&#125;'&gt;</span></span><br><span class="line"><span class="comment">      &lt;text&gt;&#123;&#123;level&#125;&#125;&lt;/text&gt;</span></span><br><span class="line"><span class="comment">    &lt;/navigator&gt;</span></span><br><span class="line"><span class="comment">  &lt;/block&gt;</span></span><br><span class="line"><span class="comment">&lt;/view&gt; --&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="7-6-2-事件-基本参数-花括号-传值（优化之后使用的方法）"><a href="#7-6-2-事件-基本参数-花括号-传值（优化之后使用的方法）" class="headerlink" title="7.6.2 事件 + 基本参数 + 花括号 传值（优化之后使用的方法）"></a>7.6.2 事件 + 基本参数 + 花括号 传值（优化之后使用的方法）</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- wepy中的事件可传递一些基本类型的参数，但是需使用双括号。否则获取到的参数是字符串类型。 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"toggleType(&#123;&#123;true&#125;&#125;)"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"grid-row &#123;&#123;rowIndex % 3 == 0 ? 'grid-row-index' : ''&#125;&#125;"</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;grids&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"rowIndex"</span> <span class="attr">wx:for-item</span>=<span class="string">"items"</span> <span class="attr">wx:key</span>=<span class="string">"rowIndex"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>  <span class="attr">class</span>=<span class="string">"grid-col &#123;&#123;colIndex % 3 == 0 ? 'grid-col-index' : ''&#125;&#125;"</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;items&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"colIndex"</span> <span class="attr">wx:for-item</span>=<span class="string">"item"</span> <span class="attr">wx:key</span>=<span class="string">"colIndex"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"fixed"</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;item&#125;&#125;"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tab</span>=<span class="string">"fillNumber(&#123;&#123;rowIndex&#125;&#125;,&#123;&#123;colIndex&#125;&#125;)"</span> <span class="attr">wx:else</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="7-6-3-事件-data-e-currentTarget-dataset-level-传值（原生方法）"><a href="#7-6-3-事件-data-e-currentTarget-dataset-level-传值（原生方法）" class="headerlink" title="7.6.3 事件 + data-  +  e.currentTarget.dataset.level  传值（原生方法）"></a>7.6.3 事件 + data-  +  e.currentTarget.dataset.level  传值（原生方法）</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-movie</span>=<span class="string">"&#123;&#123;movie&#125;&#125;"</span> @<span class="attr">tap</span>=<span class="string">"showMovie"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">methods = &#123;</span></span><br><span class="line"><span class="undefined">  showMovie (e) &#123;</span></span><br><span class="line"><span class="undefined">    console.log(e.currentTarget.dataset.movie) # 这样就可以获取到data属性绑定的对象</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'levels'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;levels&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:for-item</span>=<span class="string">"level"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'level'</span> @<span class="attr">tap</span>=<span class="string">'toPageGrid'</span> <span class="attr">data-level</span>=<span class="string">'&#123;&#123;level&#125;&#125;'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;level&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span> --&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- block 与 view 不同，block 不会在 DOM 中体现 ，这里 block 只是做循环用的--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">      toPageGrid(e) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 这里的的 路径不要搞错</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> urlStr = <span class="string">'./grid?level='</span> + e.currentTarget.dataSet</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="undefined">        wx.navigateTo(&#123;</span></span><br><span class="line"><span class="undefined">          url: urlStr</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>① <code>@tap=&#39;toPageGrid&#39; data-level=&#39;&#39;</code> toPageGrid 这里没有写传值，那么在 js 里面我们可以获取到事件 e 的，并且可以在 html 中以 <code>data-level=&#39;&#39;</code> 这种方式传值，在事件 e 的 <code>e.currentTarget.dataSet</code> 中可以获取到属性值。</p>
<p>② <code>@tap=&#39;toPageGrid(22)&#39;</code> 如果我们这样传值，将获取不到事件  e， 它就是我们 在html 中传入的 22， e 只是一个参数，就是 7.6.3 节的基本参数传值</p>
<p><strong>上面原生的方法与 wepy 优化之后的方法比较</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- // 原生的事件传参方式: --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123;index&#125;&#125;"</span> <span class="attr">data-title</span>=<span class="string">"wepy"</span> <span class="attr">data-other</span>=<span class="string">"otherparams"</span> <span class="attr">bindtap</span>=<span class="string">"tapName"</span>&gt;</span> Click me! <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    tapName: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(event.currentTarget.dataset.id)<span class="comment">// output: 1</span></span><br><span class="line">        <span class="built_in">console</span>.log(event.currentTarget.dataset.title)<span class="comment">// output: wepy</span></span><br><span class="line">        <span class="built_in">console</span>.log(event.currentTarget.dataset.other)<span class="comment">// output: otherparams</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  WePY 1.1.8以后的版本，只允许传 string。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"tapName(&#123;&#123;index&#125;&#125;, 'xiaomi', '18')"</span>&gt;</span> Click me! <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">    tapName (index, name, age, event) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(index, name, age) <span class="comment">// output: 1, xiaomi, 18 直接取值，不需要 event.currentTarget 这样取值了</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也就是说上面 7.6.3 的代码可以写成</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'levels'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;levels&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:for-item</span>=<span class="string">"level"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'level'</span> @<span class="attr">tap</span>=<span class="string">'toPageGrid(&#123;&#123;level&#125;&#125;)'</span> <span class="attr">data-level</span>=<span class="string">'&#123;&#123;level&#125;&#125;'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;level&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span> --&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- block 与 view 不同，block 不会在 DOM 中体现 ，这里 block 只是做循环用的--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">      toPageGrid(level,e) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 这里的的 路径不要搞错</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> urlStr = <span class="string">'./grid?level='</span> + level</span></span><br><span class="line"><span class="javascript">        <span class="comment">// ES6 字符串模板 let urlStr = `./grid?level=$&#123;level&#125;`</span></span></span><br><span class="line"><span class="undefined">        wx.navigateTo(&#123;</span></span><br><span class="line"><span class="undefined">          url: urlStr</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="7-6-4-获取-url-的传值"><a href="#7-6-4-获取-url-的传值" class="headerlink" title="7.6.4 获取 url 的传值"></a>7.6.4 获取 url 的传值</h5><p><a href="https://blog.csdn.net/qq_35909852/article/details/78956820" target="_blank" rel="noopener">获取 url 的传值</a>，注意这里是小程序的传值，不是 web 中 js 的传值，因此这个链接也有告诉我们分二者的传值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WEB 中的取值</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">getUrlParam</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">         <span class="comment">// 获取参数</span></span><br><span class="line">        <span class="keyword">var</span> url = <span class="built_in">window</span>.location.search;</span><br><span class="line">          <span class="comment">// 正则筛选地址栏</span></span><br><span class="line">        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span>+ name +<span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">          <span class="comment">// 匹配目标参数</span></span><br><span class="line">        <span class="keyword">var</span> result = url.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">         <span class="comment">//返回参数值</span></span><br><span class="line">     <span class="keyword">return</span> result ? <span class="built_in">decodeURIComponent</span>(result[<span class="number">2</span>]) : <span class="literal">null</span>;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// 小程序取值</span></span></span><br><span class="line"><span class="undefined">  onLoad(options) &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 小程序获取 url 传值：options 就是传过来的对象</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// let urlStr = './grid?level=' + e.currentTarget.dataset.level + '&amp;id=3'  结果：&#123;level: "1", id: "3"&#125;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// let urlStr = './grid?level=' + e.currentTarget.dataset.level  结果：&#123;level: "1"&#125;</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.level = options.level</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-7-本地存储-页面传值"><a href="#7-7-本地存储-页面传值" class="headerlink" title="7.7 本地存储-页面传值"></a>7.7 本地存储-页面传值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A 组件 存值</span></span><br><span class="line">wepy.setStorageSync(<span class="string">'level'</span>,level)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// B 组件 取值</span></span><br><span class="line">wepy.getStorageSync(<span class="string">'level'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="7-8-全局属性传值"><a href="#7-8-全局属性传值" class="headerlink" title="7.8 全局属性传值"></a>7.8 全局属性传值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.wepy</span></span><br><span class="line"> globalData = &#123;</span><br><span class="line">    userInfo: <span class="literal">null</span>,</span><br><span class="line">    level:<span class="number">1</span></span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages 取值</span></span><br><span class="line"><span class="keyword">this</span>.$parent.globalData.level</span><br></pre></td></tr></table></figure>
<h3 id="7-9-正向传值-与-反向传值"><a href="#7-9-正向传值-与-反向传值" class="headerlink" title="7.9 正向传值 与 反向传值"></a>7.9 正向传值 与 反向传值</h3><h4 id="7-9-1-本次存储"><a href="#7-9-1-本次存储" class="headerlink" title="7.9.1 本次存储"></a>7.9.1 本次存储</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正向传值：pagesA=&gt;pagesB   !!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line"><span class="comment">// A 组件 存值</span></span><br><span class="line">wepy.setStorageSync(<span class="string">'level'</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// B 组件 取值</span></span><br><span class="line">wepy.getStorageSync(<span class="string">'level'</span>) <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 反向传值：pagesB=&gt;pagesA   !!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line"><span class="comment">// B 组件 存值</span></span><br><span class="line">wepy.setStorageSync(<span class="string">'level'</span>,<span class="number">5</span>)</span><br><span class="line">wepy.navigatorBack() <span class="comment">// 返回上一页面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// A 组件 取值</span></span><br><span class="line">onshow()&#123;</span><br><span class="line">  wepy.getStorageSync(<span class="string">'level'</span>) <span class="comment">//5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-9-2-APP-全局属性"><a href="#7-9-2-APP-全局属性" class="headerlink" title="7.9.2 APP 全局属性"></a>7.9.2 APP 全局属性</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正向传值：app=&gt;pages     !!!!!!!!!!!!!!!!!</span></span><br><span class="line"><span class="comment">// app.wepy 存储</span></span><br><span class="line"> globalData = &#123;</span><br><span class="line">    userInfo: <span class="literal">null</span>,</span><br><span class="line">    level:<span class="number">1</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pages 取值</span></span><br><span class="line"><span class="keyword">this</span>.$parent.globalData.level</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 反向传值：pagesA=&gt;pagesB   !!!!!!!!!!!!!!!!!!!!!!!!!</span></span><br><span class="line"><span class="comment">// pagesA 存贮</span></span><br><span class="line"><span class="keyword">this</span>.$parent.globalData.level=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pagesB 取值</span></span><br><span class="line"><span class="keyword">this</span>.$parent.globalData.level=<span class="number">2</span></span><br></pre></td></tr></table></figure>
<h2 id="八、wepy-中的指令-以及-class-动态操作"><a href="#八、wepy-中的指令-以及-class-动态操作" class="headerlink" title="八、wepy 中的指令 以及 class 动态操作"></a>八、wepy 中的指令 以及 class 动态操作</h2><h3 id="8-1-class-的动态绑定"><a href="#8-1-class-的动态绑定" class="headerlink" title="8.1 class 的动态绑定"></a>8.1 class 的动态绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"class-a"</span> <span class="attr">:class</span>=<span class="string">"&#123;true ? 'class-b': 'class-c'&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- 在vue中动态绑定class --&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在wepy中，要使用微信原生的绑定语法</span></span><br><span class="line"><span class="comment">其中 class-a 是不需要动态绑定的class， 双括号中才是需要绑定的class --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"class-a &#123;&#123;true ? 'class-b' : 'class-c'&#125;&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="8-1-1-单双引号的问题，外面单引号里面就双引号啊！！！！！！！！"><a href="#8-1-1-单双引号的问题，外面单引号里面就双引号啊！！！！！！！！" class="headerlink" title="8.1.1 单双引号的问题，外面单引号里面就双引号啊！！！！！！！！"></a>8.1.1 单双引号的问题，外面单引号里面就双引号啊！！！！！！！！</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'grid'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'grid-row &#123;&#123;index % 3 == 0 ? '</span><span class="attr">grid-row-index</span>' <span class="attr">:</span> ''&#125;&#125;' <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;grids&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:for-item</span>=<span class="string">"items"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'grid-col &#123;&#123;index % 3 == 0 ? '</span><span class="attr">grid-col-index</span>' <span class="attr">:</span> ''&#125;&#125;' <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;items&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:for-item</span>=<span class="string">"item"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Error] ERROR IN : src\pages\grid.wpy</span><br><span class="line">[xmldom error]  element parse error: Error: attribute value must after <span class="string">"="</span></span><br><span class="line">@<span class="comment">#[line:26,col:9]</span></span><br></pre></td></tr></table></figure>
<p><img src="http://liuxmoo.foryung.com/%25LSU9@E1W$TP~%5B4_BARDH@P.png" alt="t"></p>
<p>错误解决：上面控制台说出了是单双引号的问题，命令行指出了 = 号的问题，是算是一个等号。注意这里一定要外面是双引号，里面是单引号，不然会出错的！！！！！！！！！！！！！！！！！！！！！！！！！！重要，重要，重要，更新如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'grid'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"grid-row &#123;&#123;index % 3 == 0 ? 'grid-row-index' : ''&#125;&#125;"</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;grids&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:for-item</span>=<span class="string">"items"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"grid-col &#123;&#123;index % 3 == 0 ? 'grid-col-index' : ''&#125;&#125;"</span> <span class="attr">wx:for-items</span>=<span class="string">"&#123;&#123;items&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:for-item</span>=<span class="string">"item"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-2"><a href="#8-2" class="headerlink" title="8.2"></a>8.2</h3><h3 id="8-2-wx：for-与-repeat-循环渲染组件"><a href="#8-2-wx：for-与-repeat-循环渲染组件" class="headerlink" title="8.2 wx：for 与 repeat 循环渲染组件"></a>8.2 wx：for 与 repeat 循环渲染组件</h3><p>当想在wx:for中使用组件时，需要使用辅助标签<repeat>？？？？有子组件的时候采用 repeat 把？？、其他的时候用 原生的 view 都可以的把。</repeat></p>
<p>wepy的循环渲染组件，使用 <code>&lt;repeat/&gt;</code>标签（1.4.6 版本新增），或者微信官方的<block>标签(这两个标签不会渲染到视图层）否则就不会渲染成功。（但是用 view 与 wx：for 我成功了呀？？？？） 是不是说有子组件的时候使用 repeat 呀？？？？</block></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- # wepy 提供的repeat组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"movie"</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;movies&#125;&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">repeat</span> <span class="attr">for</span>=<span class="string">"&#123;&#123;movies&#125;&#125;"</span> <span class="attr">key</span>=<span class="string">"index"</span> <span class="attr">index</span>=<span class="string">"index"</span> <span class="attr">item</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">movie</span> <span class="attr">:movie.sync</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">movie</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repeat</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- # 微信提供的block组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;imgArr&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">data-movieId</span>=<span class="string">"&#123;&#123;item.id&#125;&#125;"</span> @<span class="attr">tap</span>=<span class="string">"showMovieDetail"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;item.img || item.image&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="8-2-1-问题？-与-navigator-标签是怎么用的，"><a href="#8-2-1-问题？-与-navigator-标签是怎么用的，" class="headerlink" title="8.2.1 问题？ 与 navigator 标签是怎么用的，"></a>8.2.1 问题？ 与 navigator 标签是怎么用的，</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'levels'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">for</span>=<span class="string">"&#123;&#123;levels&#125;&#125;"</span> <span class="attr">key</span>=<span class="string">"index"</span> <span class="attr">index</span>=<span class="string">"index"</span> <span class="attr">item</span>=<span class="string">"level"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">clas</span>=<span class="string">'level'</span> <span class="attr">url</span>=<span class="string">'./grid?level=&#123;&#123;level&#125;&#125;'</span> <span class="attr">open-type</span>=<span class="string">"navigate"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;level&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      &#123;&#123;level&#125;&#125;</span><br><span class="line">      这里怎么就不对呢？？？字怎么就不出来了，2 种办法都不出来，navigator 标签中部允许有字？？？？</span><br><span class="line">    <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="8-2-2-存在的问题"><a href="#8-2-2-存在的问题" class="headerlink" title="8.2.2 存在的问题"></a>8.2.2 存在的问题</h4><p>WePY 1.x 版本中，组件使用的是静态编译组件，即组件是在编译阶段编译进页面的，每个组件都是唯一的一个实例，目前只提供简单的 repeat 支持。不支持在 repeat 的组件中去使用 props, computed, watch 等等特性。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 错误使用</span></span><br><span class="line"><span class="comment"> list.wpy --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;test.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- // index.wpy --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">repeat</span> <span class="attr">for</span>=<span class="string">"&#123;&#123;mylist&#125;&#125;"</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 不要在 repeat 标签中使用 修饰 .sync --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">List</span> <span class="attr">:test.sync</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">List</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repeat</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐用法 // list.wpy --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">repeat</span> <span class="attr">for</span>=<span class="string">"&#123;&#123;mylist&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repeat</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- // index.wpy --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">List</span> <span class="attr">:mylist.sync</span>=<span class="string">"mylist"</span>&gt;</span><span class="tag">&lt;/<span class="name">List</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h3><p>1.4.8新增<br>可以使用@customEvent.user绑定用户自定义组件事件。其中，@表示事件修饰符，customEvent表示事件名称，.user表示事件后缀。<br>目前有三种后缀：</p>
<p>.default: 绑定小程序冒泡事件事件，如bindtap。</p>
<p>.stop: 绑定小程序非冒泡事件，如catchtap。</p>
<p>.user: 绑定用户自定义组件事件，通过$emit触发。</p>
<h2 id="九、项目编辑过程中的问题与优化"><a href="#九、项目编辑过程中的问题与优化" class="headerlink" title="九、项目编辑过程中的问题与优化"></a>九、项目编辑过程中的问题与优化</h2><h3 id="9-1-后台报错的问题"><a href="#9-1-后台报错的问题" class="headerlink" title="9.1 后台报错的问题"></a>9.1 后台报错的问题</h3><h4 id="9-1-1-后台-VM17809-2-tabBar-0-pagePath-tabBar-1-pagePath-报错"><a href="#9-1-1-后台-VM17809-2-tabBar-0-pagePath-tabBar-1-pagePath-报错" class="headerlink" title="9.1.1 后台 VM17809:2 tabBar[0].pagePath  tabBar[1].pagePath 报错"></a>9.1.1 后台 VM17809:2 tabBar[0].pagePath  tabBar[1].pagePath 报错</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VM17809:2 tabBar[0].pagePath <span class="string">"pages/index/index"</span> 需在 pages 数组中</span><br><span class="line">tabBar[1].pagePath <span class="string">"pages/logs/logs"</span> 需在 pages 数组中</span><br></pre></td></tr></table></figure>
<p>因为 页面与配置不匹配。</p>
<p>app.wpy 中 的 config 对象中的 pages 与 tabBar 要对应起来，路径也不要出错。</p>
<h4 id="9-1-2-unclosed-xml-attribute-没有闭标签"><a href="#9-1-2-unclosed-xml-attribute-没有闭标签" class="headerlink" title="9.1.2  unclosed xml attribute 没有闭标签"></a>9.1.2  unclosed xml attribute 没有闭标签</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unclosed xml attribute <span class="comment"># 没有闭标签</span></span><br><span class="line"><span class="comment"># 这个错误，就是我们复制粘贴的时候不小心，我们而且编辑器也不会提醒我们错误，如果是少了标签 斜杠，倒是简单，像上面的，其实是多了一个`&lt;/view&gt;` 标签，都没有发现。</span></span><br><span class="line"><span class="comment"># 其实只要格式化页面，也比较好看出是多了呀一个标签。</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-less-与-css-的运用问题"><a href="#9-2-less-与-css-的运用问题" class="headerlink" title="9.2 less  与 css 的运用问题"></a>9.2 less  与 css 的运用问题</h3><h4 id="9-2-1-让小程序高度-100"><a href="#9-2-1-让小程序高度-100" class="headerlink" title="9.2.1 让小程序高度 100%"></a>9.2.1 让小程序高度 100%</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*在 app.wpy 文件中使用如下，这样所有的页面都是占据 100% 高度了</span></span><br><span class="line"><span class="comment">然后就占满了，当然还有顶部与底部是导航栏的。*/</span></span><br><span class="line"><span class="selector-tag">page</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-2-2-让小程序高度-宽度"><a href="#9-2-2-让小程序高度-宽度" class="headerlink" title="9.2.2 让小程序高度==宽度"></a>9.2.2 让小程序高度==宽度</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//css 原生</span></span><br><span class="line"><span class="selector-class">.grid-col</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10vw</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">10vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里是  less， less 中关于运行的，都要使用 ~'' 括起来，</span></span><br><span class="line"><span class="comment">// 包括 calc 的公式运行，具体看 less 与 calc 这篇文章。</span></span><br><span class="line"><span class="selector-class">.grid-col</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="string">~'10vw'</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="string">~'10vw'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-3-第三方成熟-IDE-或编辑器-代码高亮"><a href="#9-3-第三方成熟-IDE-或编辑器-代码高亮" class="headerlink" title="9.3 第三方成熟 IDE 或编辑器-代码高亮"></a>9.3 第三方成熟 IDE 或编辑器-代码高亮</h3><p>wepy-cli 框架的项目文件后缀为 .wpy，可共用 Vue（.vue）的高亮规则，但需要手动设置。下面提供一些常见IDE或编辑器中实现代码高亮的相关设置步骤以供参考(也可通过更改文件后缀名的方式来实现高亮，详见后文相关介绍)。</p>
<p>￥第三方成熟 IDE 或编辑器-代码高亮</p>
<p>wepy-cli 框架的项目文件后缀为 .wpy，可共用 Vue（.vue）的高亮规则，但需要手动设置。下面提供一些常见IDE或编辑器中实现代码高亮的相关设置步骤以供参考(也可通过更改文件后缀名的方式来实现高亮，详见后文相关介绍)。</p>
<h4 id="4-3-1-WebStorm-PhpStorm"><a href="#4-3-1-WebStorm-PhpStorm" class="headerlink" title="4.3.1 WebStorm/PhpStorm"></a>4.3.1 WebStorm/PhpStorm</h4><p>  1. 打开 Settings，搜索 Plugins，搜索 Vue.js 插件并安装。<br>  2. 打开 Settings，搜索 File Types，找到 Vue.js Template，在 Registered Patterns 添加 *.wpy，即可高亮。</p>
<h4 id="4-3-2-VS-Code"><a href="#4-3-2-VS-Code" class="headerlink" title="4.3.2 VS Code"></a>4.3.2 VS Code</h4><p>  1. 在 Code 里先安装 Vue 的语法高亮插件 Vetur。<br>  2. 打开任意 .wpy 文件。<br>  3. 点击右下角的选择语言模式，默认为纯文本。<br>  4. 在弹出的窗口中选择 .wpy 的配置文件关联…。(注意是灰色字体部分，不要去选择有颜色的 VUE，这样只是单个文件的语言选择)<br>  5. 在选择要与 .wpy 关联的语言模式 中选择 Vue。(注意是灰色字体部分，不要去选择有颜色的 VUE，这样只是单个文件的语言选择)</p>
<p>或者我们直接在在 vscode 编辑器设置中去设置。”*.wpy”: “vue”</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//文件-首选项-设置-settings.json</span><br><span class="line">settings.json</span><br><span class="line">"files.associations": &#123;</span><br><span class="line">"*.wpy": "vue"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-3-3-Sublime"><a href="#4-3-3-Sublime" class="headerlink" title="4.3.3 Sublime"></a>4.3.3 Sublime</h4><p>  1. 打开 Sublime-&gt;Preferences-&gt;Browse Packages..进入用户包文件夹。<br>  2. 在此文件夹下打开 cmd，运行 git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:vuejs/vue-syntax-highlight.git，无 GIT 用户可以直接下载 zip 包解压至当前文件夹。<br>  3. 关闭 .wpy 文件重新打开即可高亮。</p>
<p>其他的第三方编辑器查看官网介绍</p>
<h3 id="9-4-wepy-框架中-自动补全的问题：minapp-插件"><a href="#9-4-wepy-框架中-自动补全的问题：minapp-插件" class="headerlink" title="9.4 wepy 框架中 自动补全的问题：minapp 插件"></a>9.4 wepy 框架中 自动补全的问题：minapp 插件</h3><p><a href="https://github.com/wx-minapp/minapp-vscode" target="_blank" rel="noopener">minapp 插件</a></p>
<p>在 .wpy 文件中 的 <code>&lt;template&gt;</code> 开标签中使用如 <code>&lt;template lang=&#39;wxml&#39; minapp=&#39;wepy&#39;&gt;</code> 这样就可以自动补全了。不过要注意的是自动补全需要先打尖括号 <code>&lt;</code> 输入标签名，这样才能补全的。</p>
<h4 id="9-4-1-使用-lang-’wxml’-minapp-’wepy’-发生的问题"><a href="#9-4-1-使用-lang-’wxml’-minapp-’wepy’-发生的问题" class="headerlink" title="9.4.1 使用 lang=’wxml’ minapp=’wepy’ 发生的问题"></a>9.4.1 使用 lang=’wxml’ minapp=’wepy’ 发生的问题</h4><p>发现使用了这个之后，文件就不能使用 <code>shift + alt + f</code> 来格式化了。</p>
<h3 id="9-5-API-接口使用的是-wpy-而不是-wx"><a href="#9-5-API-接口使用的是-wpy-而不是-wx" class="headerlink" title="9.5 API 接口使用的是 wpy 而不是 wx"></a>9.5 API 接口使用的是 wpy 而不是 wx</h3><p>wepy 框架中 wepy 继承了 mina 框架中 wx 对象的方法，因此在 wepy 框架中，所有的 API 都使用 wepy.</p>
<h3 id="9-6-使用-async-await-的使用方式"><a href="#9-6-使用-async-await-的使用方式" class="headerlink" title="9.6 使用 async/await 的使用方式,"></a>9.6 使用 async/await 的使用方式,</h3><p>需要开启 Promise 和 async/await 支持</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原生代码:</span></span><br><span class="line">wx.request(&#123;</span><br><span class="line">    url: <span class="string">'xxx'</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// WePY 使用方式, 需要开启 Promise 支持，参考开发规范章节</span></span><br><span class="line">wepy.request(<span class="string">'xxxx'</span>).then(<span class="function">(<span class="params">d</span>) =&gt;</span> <span class="built_in">console</span>.log(d));</span><br><span class="line"><span class="comment">// async/await 的使用方式, 需要开启 Promise 和 async/await 支持，参考 WIKI</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> d = <span class="keyword">await</span> wepy.request(<span class="string">'xxxxx'</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="十、代码规范"><a href="#十、代码规范" class="headerlink" title="十、代码规范"></a>十、代码规范</h2><h3 id="10-1-变量-方法-驼峰式命名，并且注意避免使用-开头。"><a href="#10-1-变量-方法-驼峰式命名，并且注意避免使用-开头。" class="headerlink" title="10.1 变量 方法 驼峰式命名，并且注意避免使用 $ 开头。"></a>10.1 变量 方法 驼峰式命名，并且注意避免使用 $ 开头。</h3><p>以 $ 开头的标识符为 WePY 框架的内建属性和方法（可在 JavaScript 脚本中以 this. 的方式直接使用，具体请参考 API 文档。） 用 $ 符号会让自己的代码很乱。也不好区分是 变量名/方法名 还是 内建 API</p>
<h3 id="10-2-小程序入口、页面、组件文件名的后缀为-wpy；外链的文件可以是其它后缀。"><a href="#10-2-小程序入口、页面、组件文件名的后缀为-wpy；外链的文件可以是其它后缀。" class="headerlink" title="10.2 小程序入口、页面、组件文件名的后缀为 .wpy；外链的文件可以是其它后缀。"></a>10.2 小程序入口、页面、组件文件名的后缀为 .wpy；外链的文件可以是其它后缀。</h3><p>具体请参考 wpy 文件说明。</p>
<h3 id="10-3-使用-ES6-语法开发。"><a href="#10-3-使用-ES6-语法开发。" class="headerlink" title="10.3  使用 ES6 语法开发。"></a>10.3  使用 ES6 语法开发。</h3><p>框架在 ES6(ECMAScript 6) 下开发，因此也需要使用 ES6 开发小程序，ES6 中有大量的语法糖可以让我们的代码更加简洁高效。</p>
<ul>
<li>使用 Promise。 框架默认对小程序提供的 API 全都进行了 Promise 处理，甚至可以直接使用 async/await 等新特性进行开发。启用 Promise方法</li>
</ul>
<h3 id="10-4-事件绑定语法使用优化语法代替。-tap-quot-click-quot-tap-stop-”click”-简化写法"><a href="#10-4-事件绑定语法使用优化语法代替。-tap-quot-click-quot-tap-stop-”click”-简化写法" class="headerlink" title="10.4 事件绑定语法使用优化语法代替。 @tap=&quot;click&quot; `@tap.stop=”click”` 简化写法"></a>10.4 事件绑定语法使用优化语法代替。 <code>@tap=&quot;click&quot;</code> <a href="mailto:`@tap.stop" target="_blank" rel="noopener">`@tap.stop</a>=”click”` 简化写法</h3><pre><code>原 bindtap=&quot;click&quot; 替换为 @tap=&quot;click&quot;，原 catchtap=&quot;click&quot; 替换为 @tap.stop=&quot;click&quot;。
原 capture-bind:tap=&quot;click&quot; 替换为 @tap.capture=&quot;click&quot;，原 capture-catch:tap=&quot;click&quot; 替换为@tap.capture.stop=&quot;click&quot;。
更多 @ 符用法，参见组件自定义事件。
事件传参使用优化后语法代替。 原 bindtap=&quot;click&quot; data-index={{index}} 替换为 @tap=&quot;click({{index}})&quot;。
</code></pre><h3 id="10-4-自定义组件命名应-避开-微信原生组件名称以及功能标签-lt-repeat-gt-。"><a href="#10-4-自定义组件命名应-避开-微信原生组件名称以及功能标签-lt-repeat-gt-。" class="headerlink" title="10.4 自定义组件命名应 避开 微信原生组件名称以及功能标签 &lt;repeat&gt;。"></a>10.4 自定义组件命名应 避开 微信原生组件名称以及功能标签 <code>&lt;repeat&gt;</code>。</h3><p>不可以使用 input、button、view、repeat 等微信小程序原生组件名称命名自定义组件；另外也不要使用 WePY 框架定义的辅助标签 repeat 命名。有关 repeat 的详细信息，请参见循环列表组件引用。</p>
<h3 id="10-5-事件名不要重复，不同页面也不要重复"><a href="#10-5-事件名不要重复，不同页面也不要重复" class="headerlink" title="10.5 事件名不要重复，不同页面也不要重复"></a>10.5 事件名不要重复，不同页面也不要重复</h3><p>原生小程序支持js模块化，但彼此独立，业务代码与交互事件仍需在页面处理。无法实现组件化的松耦合与复用的效果。</p>
<p>例如模板A中绑定一个bindtap=”myclick”，模板B中同样绑定一样bindtap=”myclick”，那么就会影响同一个页面事件。对于数据同样如此。因此，只有通过改变变量或者事件方法，或者给其加不同前缀才能实现绑定不同事件或者不同数据。当页面复杂之后就十分不利于开发维护。</p>
<h2 id="十五、坑-与自己的放错"><a href="#十五、坑-与自己的放错" class="headerlink" title="十五、坑 与自己的放错"></a>十五、坑 与自己的放错</h2><h3 id="15-1-js-中的逗号，分号，错误，导致-js-代码无法格式化，代码也无法运行"><a href="#15-1-js-中的逗号，分号，错误，导致-js-代码无法格式化，代码也无法运行" class="headerlink" title="15.1 js 中的逗号，分号，错误，导致 js 代码无法格式化，代码也无法运行"></a>15.1 js 中的逗号，分号，错误，导致 js 代码无法格式化，代码也无法运行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Error] SyntaxError: unknown: Unexpected token, expected , (181:4)</span><br><span class="line">  179 |     &#125;</span><br><span class="line">  180 |     <span class="comment"># 这里缺少 , 号</span></span><br><span class="line">&gt; 181 |     <span class="function"><span class="title">del</span></span>() &#123;</span><br><span class="line">      |     ^</span><br><span class="line">  182 |       this.grids[rowIndex][colIndex] == 0</span><br><span class="line">  183 |       this.<span class="variable">$apply</span>()</span><br><span class="line">  184 |     &#125;</span><br><span class="line">  <span class="comment"># 当发现自己的 js 代码无法格式化的话，就是自己的代码的逗号缺少或者是分号乱放了，看控制台或者是命令行有报错提示。</span></span><br></pre></td></tr></table></figure>
<h3 id="15-2-数据类型不对-data-中的数据给弄错了"><a href="#15-2-数据类型不对-data-中的数据给弄错了" class="headerlink" title="15.2 数据类型不对 data 中的数据给弄错了"></a>15.2 数据类型不对 data 中的数据给弄错了</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">thirdScriptError</span><br><span class="line">Cannot <span class="built_in">read</span> property <span class="string">'push'</span> of null;at pages/grid page goBack <span class="keyword">function</span></span><br><span class="line">TypeError: Cannot <span class="built_in">read</span> property <span class="string">'push'</span> of null</span><br><span class="line">    at _class.goBack (http://127.0.0.1:53324/appservice/pages/grid.js:209:24)</span><br><span class="line">    at t.config.(anonymous <span class="keyword">function</span>) (http://127.0.0.1:53324/appservice/npm/wepy/lib/bas</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> data=&#123;</span><br><span class="line">   fillArray:&#123;</span><br><span class="line">     rowIndex: <span class="literal">null</span>,</span><br><span class="line">     colIndex: <span class="literal">null</span>,</span><br><span class="line">     value: <span class="literal">null</span></span><br><span class="line">   &#125;,</span><br><span class="line">   delArray: &#123;</span><br><span class="line">     rowIndex: <span class="literal">null</span>,</span><br><span class="line">     colIndex: <span class="literal">null</span>,</span><br><span class="line">     value: <span class="literal">null</span></span><br><span class="line">   &#125;</span><br><span class="line"> <span class="comment">// 这里的数据设置成 对象了，怎么可以对一个 对象 中 push 元素呢。</span></span><br><span class="line"> &#125;</span><br><span class="line"> goBack() &#123;</span><br><span class="line">   <span class="keyword">let</span> backCellObj = <span class="keyword">this</span>.fillArray.pop();</span><br><span class="line">   <span class="keyword">if</span> (backCellObj) &#123;</span><br><span class="line">     <span class="keyword">let</span> rowIndex = backCellObj.colIndex;</span><br><span class="line">     <span class="keyword">let</span> colIndex = backCellObj.colIndex;</span><br><span class="line">     <span class="keyword">this</span>.currentCell.currentCellRowIndex = rowIndex;</span><br><span class="line">     <span class="keyword">this</span>.currentCell.currentCellColIndex = colIndex;</span><br><span class="line">     <span class="keyword">this</span>.grids[rowIndex][colIndex] = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">this</span>.delArray.push(backCellObj);<span class="comment">// push</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="重复路由设置-链接-跳转错误-VM292910-1-appLaunch-with-an-already-exist-webviewId-4542"><a href="#重复路由设置-链接-跳转错误-VM292910-1-appLaunch-with-an-already-exist-webviewId-4542" class="headerlink" title="重复路由设置/链接 跳转错误 VM292910:1 appLaunch with an already exist webviewId 4542"></a>重复路由设置/链接 跳转错误 VM292910:1 appLaunch with an already exist webviewId 4542</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VM292910:1 appLaunch with an already exist webviewId 4542</span><br></pre></td></tr></table></figure>
<p>答案解析：<a href="http://code.sike.wang/xcx/show-3162.html" target="_blank" rel="noopener">网址</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 onLoad 的函数里面先实现了 navigateTo，再实现 redirectTo 就会报错。</span></span><br><span class="line"><span class="comment">// 它们功能是一样的，这是一个 压入栈 可以返回一个不可以返回，不能两个都用</span></span><br><span class="line">onLoad()&#123;</span><br><span class="line">  wx.navigateTo(&#123;</span><br><span class="line">    url:<span class="string">'./page1'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  wx.redirectTo(&#123;</span><br><span class="line">    url:<span class="string">'./page2'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面这样也是错误的。因为 onLoad 的执行顺序比 onReady 优先。</span></span><br><span class="line">onLoad()&#123;</span><br><span class="line">  wx.navigateTo(&#123;</span><br><span class="line">    url:<span class="string">'./page1'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">onReady()&#123;</span><br><span class="line">  wx.redirectTo(&#123;</span><br><span class="line">    url:<span class="string">'./page2'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这样写就对了，先实现了redirectTo，再实现navigateTo就不会报这个错误。 为啥？？？？？</span></span><br><span class="line">  wx.redirectTo(&#123;</span><br><span class="line">    url:<span class="string">'./page2'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  wx.navigateTo(&#123;</span><br><span class="line">    url:<span class="string">'./page1'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者路由重复设置并不是写在一个页面中，是否在 app.js 中重复写了路由设置，链接跳转了、</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果不是上面的原因，就是把微信开发者工具的IDE关闭重新启动就可以了，目前微信开发者工具的IDE实在是不够完善，也会存在一些未知的问题，所以以后如果遇到一些奇怪的问题，或者实在找不到原因的，就直接重启微信开发者工具试试。</span></span><br></pre></td></tr></table></figure>
<h4 id="微信开发者工具-预览-真机测试"><a href="#微信开发者工具-预览-真机测试" class="headerlink" title="微信开发者工具 预览  真机测试"></a>微信开发者工具 预览  真机测试</h4><p>预览的效果是不全的，调试的话还是使用真机测试，就比如说有的时候 class 是三元表达式动态绑定的，仅仅是预览的话效果可能不会表现出来，但是实际上功能已经做好了，就是预览没有把自己完整的代码上传，而真机测试是完整的代码。</p>
<p>类似 问题的 <a href="https://github.com/Tencent/wepy/issues/1669" target="_blank" rel="noopener">gitHub 网址</a>，就是开启了代码上传 自动压缩，那么有部分代码可能就不会得到上传，自然效果就不会出来了。</p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/08/18/⑦ - 【小程序】-状态管理器==-redux/" class="pre">redux 状态容器 在 wepy 框架使用</a><a href="/2018/08/18/⑦ - 【小程序】-MINA 框架-iview-weapp 组件库/" class="next">iview-weapp  小程序 ui 组件库</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、wepy-cli-类-vue-cli-脚手架：组件化开发框架-wepy"><span class="toc-text">一、wepy-cli 类 vue-cli 脚手架：组件化开发框架 wepy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、wepy-与-vue-的异同"><span class="toc-text">二、wepy 与 vue 的异同</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、wepy-cli-的安装-与使用"><span class="toc-text">二、wepy-cli 的安装 与使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-全局安装-wepy-cli"><span class="toc-text">2.1 全局安装 wepy-cli</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-使用-wepy-cli-初始化项目，类似-vue-cli"><span class="toc-text">2.2 使用 wepy-cli 初始化项目，类似 vue-cli</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-注意事项"><span class="toc-text">2.2.1 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-安装过程中的问题"><span class="toc-text">2.3 安装过程中的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-安装过程中版本支持问题解决"><span class="toc-text">2.3.1 安装过程中版本支持问题解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-微信开发者工具打开-dist-文件夹是-后台报错"><span class="toc-text">2.3.2 微信开发者工具打开 dist 文件夹是 后台报错</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、WePY-demo-项目的目录结构（含自定义）"><span class="toc-text">三、WePY demo 项目的目录结构（含自定义）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-index-template-html-页面的入口文件"><span class="toc-text">3.1 index.template.html: 页面的入口文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-wepy-config-js-webpack配置文件"><span class="toc-text">3.2 wepy.config.js: webpack配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-project-config-json-小程序项目配置文件"><span class="toc-text">3.3 project.config.json: 小程序项目配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-app-wpy-小程序入口文件：小程序入口-app-wpy-对应原生-MINA-框架的-app-json，app-js-，app-wxml，app-wxss"><span class="toc-text">3.4 app.wpy: 小程序入口文件：小程序入口 app.wpy  对应原生 MINA 框架的 app.json，app.js ，app.wxml，app.wxss</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-pages-存放页面（组件）-小程序入口-pages-wpy-对应原生-MINA-框架的-pages-json，pages-js-，pages-wxml，pages-wxss"><span class="toc-text">3.5 pages: 存放页面（组件） 小程序入口 pages.wpy  对应原生 MINA 框架的 pages.json，pages.js ，pages.wxml，pages.wxss</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-components-存放公共（组件）-小程序入口-common-wpy-对应原生-MINA-框架的-pages-js-，pages-wxml，pages-wxss"><span class="toc-text">3.6 components: 存放公共（组件） 小程序入口 common.wpy  对应原生 MINA 框架的 pages.js ，pages.wxml，pages.wxss</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-sotre-redux-如果你创建项目时使用了redux的话-Redux-状态管理器-使用，类似-vue-的-vuex"><span class="toc-text">3.7 sotre: redux(如果你创建项目时使用了redux的话) Redux 状态管理器 使用，类似 vue 的 vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-1-src-store-index-js-文件-store-的入口文件"><span class="toc-text">3.7.1 src/store/index.js 文件 :store 的入口文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-2-src-store-types-文件夹-常量定义"><span class="toc-text">3.7.2 src/store/types 文件夹 常量定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-3-src-store-reducers文件夹-函数定义"><span class="toc-text">3.7.3  src/store/reducers文件夹 函数定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-4-src-store-actions-文件夹"><span class="toc-text">3.7.4 src/store/actions 文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-5-在-pages-wepy-中使用-store"><span class="toc-text">3.7.5 在 pages.wepy 中使用 store</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-mixins-混合组件-方法-js-文件"><span class="toc-text">3.8 mixins: 混合组件 方法 js 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-interceptor：拦截器"><span class="toc-text">3.9 interceptor：拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-10-utils：工具包"><span class="toc-text">3.10 utils：工具包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据绑定"><span class="toc-text">数据绑定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、wepy-完整的属性-方法-配置"><span class="toc-text">四、wepy 完整的属性/方法/配置 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-app-wpy-的-config-选项-属性-data，生命周期，配置，等等"><span class="toc-text">4.1 app.wpy 的 config 选项/属性() ,data，生命周期，配置，等等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-page-wpy-与-components-wpy-的-选项-属性：data，生命周期，配置，等等"><span class="toc-text">4.2 page.wpy 与 components.wpy 的 选项/属性：data，生命周期，配置，等等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-components-wpy-的-选项-属性：data，生命周期，配置，等等"><span class="toc-text">4.2 components.wpy 的 选项/属性：data，生命周期，配置，等等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-computed-属性-选项"><span class="toc-text">4.4 computed 属性/选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-this-parent-全局方法-this-parent-全局属性"><span class="toc-text">4.10 this.$parent.全局方法 this.$parent.全局属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、wepy-继承-wx-对象的所有-API"><span class="toc-text">五、wepy 继承 wx 对象的所有 API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、wepy-中的-API-类"><span class="toc-text">六、wepy 中的 API 类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-app-：wepy-app-Class"><span class="toc-text">6.1 app ：wepy.app Class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-component-amp-amp-page-：wepy-component-Class-amp-amp-wepy-page-Class"><span class="toc-text">6.2 component &amp;&amp; page ：wepy.component Class &amp;&amp; wepy.page Class</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#预加载-？？？、这个官网上面没有啊"><span class="toc-text">预加载 ？？？、这个官网上面没有啊</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-event-：-wepy-event-Class-小程序事件封装类"><span class="toc-text">6.3 event ： wepy.event Class  小程序事件封装类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、组件之间通信与交互，事件通信交互-页面传参"><span class="toc-text">七、组件之间通信与交互，事件通信交互-页面传参</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-父子组件传值：props-传值：父组件-lt-gt-子组件"><span class="toc-text">7.1 父子组件传值：props 传值：父组件 &lt;=&gt; 子组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-静态传值：传递字符串-父组件-gt-子组件"><span class="toc-text">7.1.1 静态传值：传递字符串 父组件 =&gt; 子组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-动态态传值：父子组件的值互相不影响-父组件-lt-gt-子组件"><span class="toc-text">7.1.2 动态态传值：父子组件的值互相不影响 父组件 &lt;=&gt; 子组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-emit-子组件-gt-所有父组件"><span class="toc-text">7.2  $emit 子组件 =&gt; 所有父组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-broadcast-父组件-gt-所有子组件"><span class="toc-text">7.3  $broadcast 父组件 =&gt; 所有子组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-invoke-A-B-组件之间调用方法-父子组件，非父子组件中调用-其他组件的方法都是这样做"><span class="toc-text">7.4  $invoke A B 组件之间调用方法(父子组件，非父子组件中调用 其他组件的方法都是这样做)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-url-传值"><span class="toc-text">7.5 url 传值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-1-导航链标签-url"><span class="toc-text">7.6.1 导航链标签 + url</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-6-2-事件-基本参数-花括号-传值（优化之后使用的方法）"><span class="toc-text">7.6.2 事件 + 基本参数 + 花括号 传值（优化之后使用的方法）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-6-3-事件-data-e-currentTarget-dataset-level-传值（原生方法）"><span class="toc-text">7.6.3 事件 + data-  +  e.currentTarget.dataset.level  传值（原生方法）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-6-4-获取-url-的传值"><span class="toc-text">7.6.4 获取 url 的传值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-本地存储-页面传值"><span class="toc-text">7.7 本地存储-页面传值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-全局属性传值"><span class="toc-text">7.8 全局属性传值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-正向传值-与-反向传值"><span class="toc-text">7.9 正向传值 与 反向传值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-9-1-本次存储"><span class="toc-text">7.9.1 本次存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-9-2-APP-全局属性"><span class="toc-text">7.9.2 APP 全局属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八、wepy-中的指令-以及-class-动态操作"><span class="toc-text">八、wepy 中的指令 以及 class 动态操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-class-的动态绑定"><span class="toc-text">8.1 class 的动态绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-1-单双引号的问题，外面单引号里面就双引号啊！！！！！！！！"><span class="toc-text">8.1.1 单双引号的问题，外面单引号里面就双引号啊！！！！！！！！</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2"><span class="toc-text">8.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-wx：for-与-repeat-循环渲染组件"><span class="toc-text">8.2 wx：for 与 repeat 循环渲染组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-问题？-与-navigator-标签是怎么用的，"><span class="toc-text">8.2.1 问题？ 与 navigator 标签是怎么用的，</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2-存在的问题"><span class="toc-text">8.2.2 存在的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义事件"><span class="toc-text">自定义事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九、项目编辑过程中的问题与优化"><span class="toc-text">九、项目编辑过程中的问题与优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-后台报错的问题"><span class="toc-text">9.1 后台报错的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-1-后台-VM17809-2-tabBar-0-pagePath-tabBar-1-pagePath-报错"><span class="toc-text">9.1.1 后台 VM17809:2 tabBar[0].pagePath  tabBar[1].pagePath 报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-2-unclosed-xml-attribute-没有闭标签"><span class="toc-text">9.1.2  unclosed xml attribute 没有闭标签</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-less-与-css-的运用问题"><span class="toc-text">9.2 less  与 css 的运用问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-1-让小程序高度-100"><span class="toc-text">9.2.1 让小程序高度 100%</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-2-让小程序高度-宽度"><span class="toc-text">9.2.2 让小程序高度==宽度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-第三方成熟-IDE-或编辑器-代码高亮"><span class="toc-text">9.3 第三方成熟 IDE 或编辑器-代码高亮</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-WebStorm-PhpStorm"><span class="toc-text">4.3.1 WebStorm/PhpStorm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-VS-Code"><span class="toc-text">4.3.2 VS Code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-Sublime"><span class="toc-text">4.3.3 Sublime</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-wepy-框架中-自动补全的问题：minapp-插件"><span class="toc-text">9.4 wepy 框架中 自动补全的问题：minapp 插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-1-使用-lang-’wxml’-minapp-’wepy’-发生的问题"><span class="toc-text">9.4.1 使用 lang=’wxml’ minapp=’wepy’ 发生的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-API-接口使用的是-wpy-而不是-wx"><span class="toc-text">9.5 API 接口使用的是 wpy 而不是 wx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-使用-async-await-的使用方式"><span class="toc-text">9.6 使用 async/await 的使用方式,</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十、代码规范"><span class="toc-text">十、代码规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-变量-方法-驼峰式命名，并且注意避免使用-开头。"><span class="toc-text">10.1 变量 方法 驼峰式命名，并且注意避免使用 $ 开头。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-小程序入口、页面、组件文件名的后缀为-wpy；外链的文件可以是其它后缀。"><span class="toc-text">10.2 小程序入口、页面、组件文件名的后缀为 .wpy；外链的文件可以是其它后缀。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-使用-ES6-语法开发。"><span class="toc-text">10.3  使用 ES6 语法开发。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-事件绑定语法使用优化语法代替。-tap-quot-click-quot-tap-stop-”click”-简化写法"><span class="toc-text">10.4 事件绑定语法使用优化语法代替。 @tap=&quot;click&quot; `@tap.stop=”click”` 简化写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-自定义组件命名应-避开-微信原生组件名称以及功能标签-lt-repeat-gt-。"><span class="toc-text">10.4 自定义组件命名应 避开 微信原生组件名称以及功能标签 &lt;repeat&gt;。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-事件名不要重复，不同页面也不要重复"><span class="toc-text">10.5 事件名不要重复，不同页面也不要重复</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十五、坑-与自己的放错"><span class="toc-text">十五、坑 与自己的放错</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-js-中的逗号，分号，错误，导致-js-代码无法格式化，代码也无法运行"><span class="toc-text">15.1 js 中的逗号，分号，错误，导致 js 代码无法格式化，代码也无法运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-数据类型不对-data-中的数据给弄错了"><span class="toc-text">15.2 数据类型不对 data 中的数据给弄错了</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重复路由设置-链接-跳转错误-VM292910-1-appLaunch-with-an-already-exist-webviewId-4542"><span class="toc-text">重复路由设置/链接 跳转错误 VM292910:1 appLaunch with an already exist webviewId 4542</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#微信开发者工具-预览-真机测试"><span class="toc-text">微信开发者工具 预览  真机测试</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/">① html-css</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/Normalize-css/">Normalize.css</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/css/">css</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/html/">html</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/less/">less</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/①-html-css/scss/">scss</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/">② Javascript-ES6-Typescript</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/ES6/">ES6</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/Javascript/">Javascript</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/②-Javascript-ES6-Typescript/TypeScript/">TypeScript</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/">③ Jquery.js</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/JQurey-UI/">JQurey-UI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/Jquery-js-框架学习/">Jquery.js 框架学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/③-Jquery-js/ajax-前后端数据交互/">ajax 前后端数据交互</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/">④  vue.js</a><span class="category-list-count">21</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/axios-前后端数据交互/">axios 前后端数据交互</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-中使用-less-scss-等预处理器/">vue 中使用 less/scss 等预处理器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-cli-脚手架/">vue-cli 脚手架</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-router-路由设置/">vue-router 路由设置</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-js-框架学习/">vue.js 框架学习</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vue-js-的-UI-组件库/">vue.js 的 UI 组件库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/④-vue-js/vuex-状态管理器/">vuex 状态管理器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/">⑤ react.js</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/axios-在-react-js-中使用/">axios 在 react.js 中使用</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/create-react-app-脚手架/">create-react-app 脚手架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/less-scss/">less/scss</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/mixins-混合组件-与-hoc-高阶组件/">mixins 混合组件 与 hoc 高阶组件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-router-v4-路由管理器/">react-router v4 路由管理器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-js-框架学习/">react.js 框架学习</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/react-js-的-UI-组件库/">react.js 的 UI 组件库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/taro-js-多终端框架-京东/">taro.js 多终端框架(京东)</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑤-react-js/状态管理器/">状态管理器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑥-react-native-js/">⑥ react-native.js</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑥-react-native-js/react-native-框架/">react-native 框架</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/">⑦ 小程序</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/MINA-框架/">MINA 框架</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/mpvue-框架/">mpvue 框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑦-小程序/wepy-框架/">wepy 框架</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/">⑧ JS 工具集/ JS拓展语言</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/Chrome-开发者工具/">Chrome 开发者工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/JSL-拓展语言/">JSL 拓展语言</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/day-js-框架/">day.js 框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/node-js-语言/">node.js 语言</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/render-函数/">render 函数</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑧-JS-工具集-JS拓展语言/阿里矢量图用法（字符实体）/">阿里矢量图用法（字符实体）</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑨-HTTP/">⑨ HTTP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/">⑩ 打包工具-命令行工具-包管理器-github</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/github/">github</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/npm-yarn/">npm & yarn</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/webpack/">webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑩-打包工具-命令行工具-包管理器-github/编辑器/">编辑器</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑪-网站部署/">⑪ 网站部署</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/">⑫ 综合实战项目</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/jQuery/">jQuery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑫-综合实战项目/vue/">vue</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑬-数据结构与算法/">⑬ 数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/⑭-静态网页生成器/">⑭ 静态网页生成器</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/⑭-静态网页生成器/hexo/">hexo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/㊿-无关编程/">㊿ 无关编程</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/animation-动画/" style="font-size: 15px;">animation 动画</a> <a href="/tags/cookie-session-token/" style="font-size: 15px;">cookie,session,token</a> <a href="/tags/递归函数/" style="font-size: 15px;">递归函数</a> <a href="/tags/gradients-线性/" style="font-size: 15px;">gradients 线性</a> <a href="/tags/Jquery-ajax/" style="font-size: 15px;">Jquery->ajax</a> <a href="/tags/interceptor-请求拦截器/" style="font-size: 15px;">interceptor 请求拦截器</a> <a href="/tags/v-charts-图标库/" style="font-size: 15px;">v-charts 图标库</a> <a href="/tags/react-js-组件传值/" style="font-size: 15px;">react.js 组件传值</a> <a href="/tags/立即执行函数/" style="font-size: 15px;">立即执行函数</a> <a href="/tags/transition-过渡/" style="font-size: 15px;">transition 过渡</a> <a href="/tags/react-js事件处理/" style="font-size: 15px;">react.js事件处理</a> <a href="/tags/react-js-生命周期/" style="font-size: 15px;">react.js 生命周期</a> <a href="/tags/transform-转换-变形/" style="font-size: 15px;">transform 转换/变形</a> <a href="/tags/flex/" style="font-size: 15px;">flex</a> <a href="/tags/ESlint之坑/" style="font-size: 15px;">ESlint之坑</a> <a href="/tags/axios-使用于-vue-js-react-js/" style="font-size: 15px;">axios(使用于 vue.js react.js)</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/08/15/[html-css]-css-float 浮动/">css--[盒状模型：display:inline-block + position 属性 + float 属性]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/06/⑧-【JS 工具集-拓展语言】-node.js- 爬虫/">node.js--爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-ES6-基础入门/">ES6【1】--[ECMAScript 6 入门]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-立即执行函数/">JavaScript【4】--[立即执行函数 IIFE ]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-高质量高效率代码编辑/">[编写高质量 JS 代码 ]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/⑬ -数据结构与算法-JS-入门/">JavaScript 数据结构与算法【1】--[入门版]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/[Javascript]-js-递归函数/">JavaScript【2】--[递归函数的深入了解]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/㊿ 其他---谷歌浏览器使用技巧/">谷歌浏览器使用技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/{ vue.js 框架 }-入门/">vue.js--[小白入门篇]</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/19/⑨-【HTTP】-HTTP 状态码/">HTTP--[状态码]</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://gofoer.com/" title="Gofoer" target="_blank">Gofoer</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p></p><p><span> &nbsp;&nbsp;Copyright &copy;2018&nbsp;<a href="/." rel="nofollow">小米粥.</a></span><span> <a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> </a></span><span> <a rel="nofollow" target="_blank" href="https://hexo.io"> </a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>